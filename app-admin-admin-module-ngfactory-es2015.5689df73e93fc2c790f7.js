(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{G6fN:function(t,e,n){"use strict";n.r(e);var i=n("8Y7J");const r={title:"Admin"},o={title:!1};class a{}var s=n("pMnS"),l=n("iInd"),u=n("SVse");class c{}class h{}const d=new i.o("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(i.V)(u.d)}}),p=function(){class t{constructor(t){if(this.value="ltr",this.change=new i.m,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t(Object(i.V)(d,8))},token:t,providedIn:"root"}),t}();class f{}var m=n("cUpR");function g(t){return null!=t&&"false"!==`${t}`}function v(t){return t instanceof i.k?t.nativeElement:t}var y=n("XNiG"),_=n("HDdC");let b;try{b="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(pi){b=!1}const w=function(){class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(u.r)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!b)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t(Object(i.V)(i.z,8))},token:t,providedIn:"root"}),t}();class C{}let E;const S=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function T(){if(E)return E;if("object"!=typeof document||!document)return E=new Set(S);let t=document.createElement("input");return E=new Set(S.filter(e=>(t.setAttribute("type",e),t.type===e)))}let I;function k(t){return function(){if(null==I&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>I=!0}))}finally{I=I||!1}return I}()?t:!!t.capture}var N=n("JX91"),A=(n("quSY"),n("LRne")),O=n("vkgz"),x=n("7o/Q"),P=n("D0XW");function D(t,e=P.a){return n=>n.lift(new R(t,e))}class R{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new L(t,this.dueTime,this.scheduler))}}class L extends x.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(F,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function F(t){t.debouncedNext()}n("pLZG");var M=n("lJxs"),V=n("IzEk");const j=new i.o("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});class z{constructor(t,e){this._sanityChecksEnabled=t,this._hammerLoader=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&Object(i.W)()&&!this._isTestEnv()}_isTestEnv(){const t=this._window;return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}function q(t,e){return class extends t{get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...t){super(...t),this.color=e}}}function U(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new y.a}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}let W;try{W="undefined"!=typeof Intl}catch(pi){W=!1}const G=function(){class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t},token:t,providedIn:"root"}),t}(),H=new i.o("mat-label-global-options");var B=i.ob({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}});function K(t){return i.Ib(2,[i.yb(null,0),i.yb(null,1)],null,null)}var Q=n("DH7j"),Y=n("XoHu"),$=n("Cfvw");function X(t,e){return new _.a(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,a=0;for(let s=0;s<i;s++){const l=Object($.a)(t[s]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,a++),r[s]=t},error:t=>n.error(t),complete:()=>{++o!==i&&u||(a===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}const J=new i.o("NgValueAccessor"),Z=new i.o("CompositionEventMode");class tt{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(m.t)()?Object(m.t)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class et{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class nt extends et{get formDirective(){return null}get path(){return null}}function it(){throw new Error("unimplemented")}class rt extends et{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return it()}get asyncValidator(){return it()}}class ot{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class at extends ot{constructor(t){super(t)}}function st(t){return null==t||0===t.length}const lt=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class ut{static min(t){return e=>{if(st(e.value)||st(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(st(e.value)||st(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return st(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return st(t.value)?null:lt.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(st(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return ut.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(st(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(ct);return 0==e.length?null:function(t){return dt(function(t,n){return e.map(e=>e(t))}(t))}}static composeAsync(t){if(!t)return null;const e=t.filter(ct);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Q.a)(e))return X(e,null);if(Object(Y.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return X(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return X(t=1===t.length&&Object(Q.a)(t[0])?t[0]:t,null).pipe(Object(M.a)(t=>e(...t)))}return X(t,null)}(function(t,n){return e.map(e=>e(t))}(t).map(ht)).pipe(Object(M.a)(dt))}}}function ct(t){return null!=t}function ht(t){const e=Object(i.ub)(t)?Object($.a)(t):t;if(!Object(i.tb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function dt(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function pt(t){return t.validate?e=>t.validate(e):t}function ft(t){return t.validate?e=>t.validate(e):t}class mt{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const gt={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class vt{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${gt.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${gt.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${gt.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${gt.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${gt.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${gt.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function yt(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class _t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._compareWith=i.vb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=yt(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=(e=>{this.value=this._getOptionValue(e),t(this.value)})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}class bt{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(yt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function wt(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class Ct{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(wt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Et(t,e){return[...e.path,t]}function St(t,e){t||Nt(e,"Cannot find control with"),e.valueAccessor||Nt(e,"No value accessor for form control with"),t.validator=ut.compose([t.validator,e.validator]),t.asyncValidator=ut.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Tt(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Tt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Tt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function It(t,e){null==t&&Nt(e,"Cannot find control with"),t.validator=ut.compose([t.validator,e.validator]),t.asyncValidator=ut.composeAsync([t.asyncValidator,e.asyncValidator])}function kt(t){return Nt(t,"There is no FormControl instance attached to form control element with")}function Nt(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function At(t){return null!=t?ut.compose(t.map(pt)):null}function Ot(t){return null!=t?ut.composeAsync(t.map(ft)):null}const xt=[class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=(e=>{t(""==e?null:parseFloat(e))})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=(e=>{t(""==e?null:parseFloat(e))})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},_t,class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._compareWith=i.vb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=((t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)})}else e=((t,e)=>{t._setSelected(!1)});this._optionMap.forEach(e)}registerOnChange(t){this.onChange=(e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},class{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(rt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=(()=>{t(this.value),this._registry.select(this)})}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function Pt(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Dt(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Rt="VALID",Lt="INVALID",Ft="PENDING",Mt="DISABLED";function Vt(t){const e=zt(t)?t.validators:t;return Array.isArray(e)?At(e):e||null}function jt(t,e){const n=zt(e)?e.asyncValidators:t;return Array.isArray(n)?Ot(n):n||null}function zt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class qt{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===Rt}get invalid(){return this.status===Lt}get pending(){return this.status==Ft}get disabled(){return this.status===Mt}get enabled(){return this.status!==Mt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Vt(t)}setAsyncValidators(t){this.asyncValidator=jt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ft,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Mt,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Rt,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Rt&&this.status!==Ft||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mt:Rt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ft;const e=ht(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof Wt?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof Gt&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new i.m,this.statusChanges=new i.m}_calculateStatus(){return this._allControlsDisabled()?Mt:this.errors?Lt:this._anyControlsHaveStatus(Ft)?Ft:this._anyControlsHaveStatus(Lt)?Lt:Rt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){zt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Ut extends qt{constructor(t=null,e,n){super(Vt(e),jt(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Wt extends qt{constructor(t,e,n){super(Vt(e),jt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ut?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,i)=>{e=e||this.contains(i)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Gt extends qt{constructor(t,e,n){super(Vt(e),jt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ut?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Ht=Promise.resolve(null);class Bt extends nt{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new i.m,this.form=new Wt({},At(t),Ot(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ht.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),St(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ht.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Dt(this._directives,t)})}addFormGroup(t){Ht.then(()=>{const e=this._findContainer(t.path),n=new Wt({});It(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ht.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Ht.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Pt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class Kt{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${gt.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${gt.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${gt.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${gt.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${gt.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${gt.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const Qt=new i.o("NgFormSelectorWarning");class Yt extends nt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Et(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return At(this._validators)}get asyncValidator(){return Ot(this._asyncValidators)}_checkParentType(){}}class $t extends Yt{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof $t||this._parent instanceof Bt||Kt.modelGroupParentException()}}const Xt=Promise.resolve(null);class Jt extends rt{constructor(t,e,n,r){super(),this.control=new Ut,this._registered=!1,this.update=new i.m,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Nt(t,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return e.forEach(e=>{e.constructor===tt?n=e:function(t){return xt.some(e=>t.constructor===e)}(e)?(i&&Nt(t,"More than one built-in value accessor matches form control with"),i=e):(r&&Nt(t,"More than one custom value accessor matches form control with"),r=e)}),r||i||n||(Nt(t,"No valid value accessor for form control with"),null)}(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(i.vb)(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Et(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return At(this._rawValidators)}get asyncValidator(){return Ot(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){St(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof $t)&&this._parent instanceof Yt?Kt.formGroupNameException():this._parent instanceof $t||this._parent instanceof Bt||Kt.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Kt.missingNameException()}_updateValue(t){Xt.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Xt.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class Zt extends nt{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new i.m}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return St(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Dt(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);It(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);It(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Pt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>kt(e)),e.valueAccessor.registerOnTouched(()=>kt(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&St(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=At(this._validators);this.form.validator=ut.compose([this.form.validator,t]);const e=Ot(this._asyncValidators);this.form.asyncValidator=ut.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||vt.missingFormException()}}class te{}class ee{static withConfig(t){return{ngModule:ee,providers:[{provide:Qt,useValue:t.warnOnDeprecatedNgFormSelector}]}}}n("GS7A");var ne=n("VRyK"),ie=n("xgIS"),re=n("l7GE"),oe=n("ZUHj");function ae(t){return e=>e.lift(new se(t))}class se{constructor(t){this.notifier=t}call(t,e){const n=new le(t),i=Object(oe.a)(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class le extends re.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}class ue{}function ce(t){return Error(`A hint was already declared for 'align="${t}"'.`)}let he=0;const de=.75,pe=5;class fe{constructor(t){this._elementRef=t}}const me=q(fe,"primary"),ge=new i.o("MAT_FORM_FIELD_DEFAULT_OPTIONS");class ve extends me{constructor(t,e,n,i,r,o,a,s){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new y.a,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${he++}`,this._labelId=`mat-form-field-label-${he++}`,this._labelOptions=n||{},this.floatLabel=this._labelOptions.float||"auto",this._animationsEnabled="NoopAnimations"!==s,this.appearance=r&&r.appearance?r.appearance:"legacy"}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=g(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Object(N.a)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ae(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(ae(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Object(ne.a)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Object(N.a)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Object(N.a)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ae(this._destroyed)).subscribe(()=>this.updateOutlineGap())}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,Object(ie.a)(this._label.nativeElement,"transitionend").pipe(Object(V.a)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw ce("start");t=n}else if("end"===n.align){if(e)throw ce("end");e=n}})}}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!document.documentElement.contains(this._elementRef.nativeElement))return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),o=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(r),a=this._getStartEnd(t.children[0].getBoundingClientRect());let s=0;for(const e of t.children)s+=e.offsetWidth;e=a-o-pe,n=s>0?s*de+2*pe:0}for(let a=0;a<r.length;a++)r.item(a).style.width=`${e}px`;for(let a=0;a<o.length;a++)o.item(a).style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}}class ye{}const _e=function(){class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t},token:t,providedIn:"root"}),t}(),be=function(){class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=v(t);return new _.a(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new y.a,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t(Object(i.V)(_e))},token:t,providedIn:"root"}),t}();class we{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new i.m,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=g(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(D(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class Ce{}var Ee=n("omvX"),Se=i.ob({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Te(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function Ie(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),i.yb(null,0)],null,null)}function ke(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),i.yb(null,2),(t()(),i.Gb(2,null,["",""]))],null,function(t,e){t(e,2,0,e.component._control.placeholder)})}function Ne(t){return i.Ib(0,[i.yb(null,3),(t()(),i.fb(0,null,null,0))],null,null)}function Ae(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),i.Gb(-1,null,[" *"]))],null,null)}function Oe(t){return i.Ib(0,[(t()(),i.qb(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],function(t,e,n){var i=!0;return"cdkObserveContent"===e&&(i=!1!==t.component.updateOutlineGap()&&i),i},null,null)),i.pb(1,16384,null,0,u.m,[],{ngSwitch:[0,"ngSwitch"]},null),i.pb(2,1196032,null,0,we,[be,i.k,i.x],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(t()(),i.fb(16777216,null,null,1,null,ke)),i.pb(4,278528,null,0,u.n,[i.N,i.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,Ne)),i.pb(6,278528,null,0,u.n,[i.N,i.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,Ae)),i.pb(8,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,2,0,"outline"!=n.appearance),t(e,4,0,!1),t(e,6,0,!0),t(e,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(t,e){var n=e.component;t(e,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function xe(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),i.yb(null,4)],null,null)}function Pe(t){return i.Ib(0,[(t()(),i.qb(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,1,0,"accent"==n.color,"warn"==n.color)})}function De(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),i.yb(null,5)],null,function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function Re(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),i.Gb(1,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)})}function Le(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,Re)),i.pb(2,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),i.yb(null,6),(t()(),i.qb(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),i.yb(null,7)],function(t,e){t(e,2,0,e.component.hintLabel)},function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function Fe(t){return i.Ib(2,[i.Eb(671088640,1,{underlineRef:0}),i.Eb(402653184,2,{_connectionContainerRef:0}),i.Eb(402653184,3,{_inputContainerRef:0}),i.Eb(671088640,4,{_label:0}),(t()(),i.qb(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),i.qb(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==(r._control.onContainerClick&&r._control.onContainerClick(n))&&i),i},null,null)),(t()(),i.fb(16777216,null,null,1,null,Te)),i.pb(7,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,1,null,Ie)),i.pb(9,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),i.yb(null,1),(t()(),i.qb(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,Oe)),i.pb(14,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,1,null,xe)),i.pb(16,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,1,null,Pe)),i.pb(18,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),i.pb(20,16384,null,0,u.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.fb(16777216,null,null,1,null,De)),i.pb(22,278528,null,0,u.n,[i.N,i.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,Le)),i.pb(24,278528,null,0,u.n,[i.N,i.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var n=e.component;t(e,7,0,"outline"==n.appearance),t(e,9,0,n._prefixChildren.length),t(e,14,0,n._hasFloatingLabel()),t(e,16,0,n._suffixChildren.length),t(e,18,0,"outline"!=n.appearance),t(e,20,0,n._getDisplayedMessages()),t(e,22,0,"error"),t(e,24,0,"hint")},null)}var Me=n("EY2u");n("PqYM");const Ve=k({passive:!0}),je=function(){class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Me.a;const e=v(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const i=new y.a,r="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(r)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!1}))):(e.classList.add(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,Ve),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:i,unlisten:()=>{e.removeEventListener("animationstart",o,Ve)}}),i.asObservable()}stopMonitoring(t){const e=v(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.ngInjectableDef=Object(i.R)({factory:function(){return new t(Object(i.V)(w),Object(i.V)(i.x))},token:t,providedIn:"root"}),t}();class ze{}const qe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Ue=0;class We{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}}const Ge=U(We);class He extends Ge{constructor(t,e,n,i,r,o,a,s,l){super(o,i,r,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=s,this._uid=`mat-input-${Ue++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new y.a,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>T().has(t));const u=this._elementRef.nativeElement;this._inputValueAccessor=a||u,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===u.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=u.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=g(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=g(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&T().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=g(t)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(){this._elementRef.nativeElement.focus()}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(qe.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}class Be{}var Ke=n("Wcq6"),Qe=n.n(Ke);function Ye(t){return t.pipe(Object(M.a)(t=>t.map(t=>Object.assign({key:t.key},t.payload.val()))),Object(M.a)(t=>t))}class $e{constructor(t,e){this.db=t,this.router=e}ngOnChanges(){console.log("new values for folder");const t=Ke.storage();this.fileList=this.db.list(`/${this.folder}/images`),this.imageList=this.fileList.snapshotChanges().pipe(Ye,Object(M.a)(e=>e.map(e=>{const n=t.ref(e.path),i={$key:e.key,path:e.path,downloadURL:null,filename:e.filename};return i.downloadURL=Promise.resolve(n.getDownloadURL()),i})))}upload(){const t=Ke.storage().ref();if(document.getElementById("file").files.length<=0)console.log("No files found to upload.");else for(const e of[document.getElementById("file").files[0]]){console.log(e);const n=this.folder,i=`/${this.folder}/${e.name}`,r=t.child(i),o=this.db;r.put(e,{cacheControl:"max-age=604800"}).then(t=>{console.log("Uploaded a blob or file! Now storing the reference at",`/${this.folder}/images/`),o.list(`/${n}/images/`).push({path:i,filename:e.name})})}}delete(t){const e=t.path,n=`${this.folder}/images/`+t.key;Ke.storage().ref().child(e).delete().then(()=>{},t=>console.error("Error deleting stored file",e)),this.db.object(n).remove()}}function Xe(t){return null==t}function Je(t){return"function"==typeof t.set}function Ze(t,e){return Je(e)?e:t.ref(e)}function tn(t,e){if("string"==typeof t)return e.stringCase();if(Je(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}n("mrSG");var en=n("3E0/"),nn=n("w1tV");function rn(t,e,n="on"){return new _.a(i=>{const r=t[n](e,(t,e)=>{i.next({snapshot:t,prevKey:e}),"once"==n&&i.complete()},i.error.bind(i));return"on"==n?{unsubscribe(){t.off(e,r)}}:{unsubscribe(){}}}).pipe(Object(M.a)(t=>{const{snapshot:n,prevKey:i}=t;let r=null;return n.exists()&&(r=n.key),{type:e,payload:n,prevKey:i,key:r}}),Object(en.a)(0),Object(nn.a)())}var on=n("eIep"),an=n("Kqap");class sn{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ln(t,this.compare,this.keySelector))}}class ln extends x.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function un(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function cn(t,e){const{payload:n,prevKey:i,key:r}=e,o=un(t,r),a=function(t,e){if(Xe(e))return 0;{const n=un(t,e);return-1===n?t.length:n+1}}(t,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const i={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,i],!1})}return t;case"child_added":if(o>-1){const r=t[o-1];(r&&r.key||null)!=i&&(t=t.filter(t=>t.payload.key!==n.key)).splice(a,0,e)}else{if(null==i)return[e,...t];(t=t.slice()).splice(a,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===r?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(a,0,e),t}return t;default:return t}}function hn(t){return(Xe(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function dn(t,e){return function(t,e){return rn(t,"value","once").pipe(Object(on.a)(n=>{const i=[Object(A.a)(n)];return e.forEach(e=>i.push(rn(t,e))),Object(ne.a)(...i).pipe(Object(an.a)(cn,[]))}),t=>t.lift(new sn(void 0,void 0)))}(t,e=hn(e))}function pn(t,e){const n=(e=hn(e)).map(e=>rn(t,e));return Object(ne.a)(...n)}class fn{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new mn(t,this.observables,this.project))}}class mn extends re.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++){let t=e[r];this.add(Object(oe.a)(this,t,t,r))}}notifyNext(t,e,n,i,r){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class gn{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new vn(t,this.predicate))}}class vn extends x.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const n=this.predicate(t,this.index++);this.skipping=Boolean(n)}catch(e){this.destination.error(e)}}}function yn(t,e){return function(n,i){return tn(n,{stringCase:()=>t.child(n)[e](i),firebaseCase:()=>n[e](i),snapshotCase:()=>n.ref[e](i)})}}function _n(t){return function(){return rn(t,"value")}}var bn=n("qgXg");const wn=new i.o("angularfire2.realtimeDatabaseURL");class Cn{constructor(t,e){this.zone=t,this.platformId=e}schedule(...t){return this.zone.runGuarded(function(){return bn.a.schedule.apply(bn.a,t)})}keepUnstableUntilFirst(t){return Object(u.s)(this.platformId)?new _.a(e=>{const n=()=>{},i=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(t=>{"scheduled"===i.state&&i.invoke(),e.next(t)},t=>{"scheduled"===i.state&&i.invoke(),e.error(t)},()=>{"scheduled"===i.state&&i.invoke(),e.complete()})}):t}runOutsideAngular(t){return new _.a(e=>this.zone.runOutsideAngular(()=>t.subscribe(t=>this.zone.run(()=>e.next(t)),t=>this.zone.run(()=>e.error(t)),()=>this.zone.run(()=>e.complete()))))}}var En;const Sn=new i.o("angularfire2.app.options"),Tn=new i.o("angularfire2.app.nameOrConfig");class In{}function kn(t,e){const n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",Qe.a.apps.filter(t=>t&&t.name===n.name)[0]||Qe.a.initializeApp(t,n)}new i.y;let Nn=En=class{static initializeApp(t,e){return{ngModule:En,providers:[{provide:Sn,useValue:t},{provide:Tn,useValue:e}]}}},An=class{constructor(t,e,n,i,r){this.scheduler=new Cn(r,i),this.database=r.runOutsideAngular(()=>kn(t,e).database(n||void 0))}list(t,e){const n=Ze(this.database,t);let i=n;return e&&(i=e(n)),function(t,e){return{query:t,update:yn(t.ref,"update"),set:yn(t.ref,"set"),push:e=>t.ref.push(e),remove:(n=t.ref,function(t){return t?tn(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}),snapshotChanges(n){const i=dn(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(i))},stateChanges(n){const i=pn(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(i))},auditTrail(n){const i=function(t,e){return function(t,e){return function(t){return rn(t,"value").pipe(Object(M.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new fn(t,n))}}(e),Object(M.a)(([t,e])=>{let n=t.lastKeyToLoad;const i=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:i}}),(n=(t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad)),t=>t.lift(new gn(n))),Object(M.a)(t=>t.actions));var n}(t,pn(t,e).pipe(Object(an.a)((t,e)=>[...t,e],[])))}(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(i))},valueChanges(n){const i=dn(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(i)).pipe(Object(M.a)(t=>t.map(t=>t.payload.val())))}};var n}(i,this)}object(t){const e=Ze(this.database,t);return i=this,{query:n=e,snapshotChanges(){const t=_n(n)();return i.scheduler.keepUnstableUntilFirst(i.scheduler.runOutsideAngular(t))},update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges(){const t=_n(n)();return i.scheduler.keepUnstableUntilFirst(i.scheduler.runOutsideAngular(t)).pipe(Object(M.a)(t=>t.payload.exists()?t.payload.val():null))}};var n,i}createPushId(){return this.database.ref().push().key}};n("NSPt");let On=class{};var xn=i.ob({encapsulation:2,styles:[],data:{}});function Pn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"img",[["style","max-width:100px;max-height:100px;"]],[[8,"src",4]],null,null,null,null)),i.Bb(131072,u.b,[i.h])],null,function(t,e){t(e,0,0,i.Hb(e,0,0,i.zb(e,1).transform(e.parent.context.$implicit.downloadURL)))})}function Dn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,5,"div",[["style","position:relative;width:100px;height:100px;float:left;display:flex;justify-content:center;align-items:center;"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,2,null,Pn)),i.pb(2,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),i.Bb(131072,u.b,[i.h]),(t()(),i.qb(4,0,null,null,1,"button",[["style","position:absolute;top:2px;right:2px;"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.delete(t.context.$implicit)&&i),i},null,null)),(t()(),i.Gb(-1,null,["[x]"]))],function(t,e){t(e,2,0,i.Hb(e,2,0,i.zb(e,3).transform(e.context.$implicit&&e.context.$implicit.downloadURL&&e.context.$implicit.downloadURL)))},null)}function Rn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["Upload a File"])),(t()(),i.qb(2,0,null,null,3,"form",[["ngNoForm",""]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"input",[["id","file"],["name","file"],["type","file"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.upload()&&i),i},null,null)),(t()(),i.Gb(-1,null,["Upload"])),(t()(),i.qb(6,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["File Gallery"])),(t()(),i.qb(8,0,null,null,3,"div",[["style","overflow:hidden;"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,2,null,Dn)),i.pb(10,278528,null,0,u.i,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null),i.Bb(131072,u.b,[i.h])],function(t,e){var n=e.component;t(e,10,0,i.Hb(e,10,0,i.zb(e,11).transform(n.imageList)))},null)}class Ln{constructor(t,e){this.auth=t,this.db=e,this.posts=this.db.list("/posts").snapshotChanges().pipe(Ye,Object(M.a)(t=>t.sort((t,e)=>t.date>=e.date?-1:1))),this.talkList=this.db.list("/talks/").snapshotChanges().pipe(Ye)}}class Fn{constructor(t,e){this.auth=t,this.admin=e;const n=t.authState;console.log("State is",n),this.isAdmin=n.pipe(Object(M.a)(t=>!!t&&"uFgljRJxq9Th4bkTIaDsQFwJuhJ2"===t.uid)),this.name=n.pipe(Object(M.a)(t=>t?t.displayName:null)),this.uid=n.pipe(Object(M.a)(t=>t?t.uid:null)),this.isAdmin.subscribe(t=>{this.admin.isAdmin=t})}login(){this.auth.auth.signInWithPopup(new Ke.auth.GoogleAuthProvider)}logout(){this.auth.auth.signOut()}}var Mn=i.ob({encapsulation:2,styles:[],data:{}});function Vn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,0,"img",[["style","height:40px;margin:0px auto;display:block;"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.$implicit.image)})}function jn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,10,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.zb(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i.pb(1,671744,null,0,l.o,[l.m,l.a,u.h],{routerLink:[0,"routerLink"]},null),(t()(),i.qb(2,0,null,null,8,"mat-card",[["class","mat-card"],["style","margin:0 16px 16px 0;width:300px;height:125px;float:left;"]],null,null,null,K,B)),i.pb(3,49152,null,0,c,[],null,null),(t()(),i.fb(16777216,null,0,1,null,Vn)),i.pb(5,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(6,0,null,0,2,"div",[],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Gb(8,null,["",""])),(t()(),i.qb(9,0,null,0,1,"div",[],null,null,null,null,null)),(t()(),i.Gb(10,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit.key),t(e,5,0,e.context.$implicit.image)},function(t,e){t(e,0,0,i.zb(e,1).target,i.zb(e,1).href),t(e,8,0,e.context.$implicit.title),t(e,10,0,e.context.$implicit.date)})}function zn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),i.pb(1,147456,null,0,bt,[i.k,i.C,[2,_t]],{ngValue:[0,"ngValue"]},null),i.pb(2,147456,null,0,Ct,[i.k,i.C,[8,null]],{ngValue:[0,"ngValue"]},null),(t()(),i.Gb(3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.context.$implicit.title)})}function qn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,21,"div",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["Talk Image Upload"])),(t()(),i.qb(3,0,null,null,16,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Fe,Se)),i.pb(4,7520256,null,7,ve,[i.k,i.h,[2,H],[2,p],[2,ge],w,i.x,[2,Ee.a]],null,null),i.Eb(335544320,1,{_control:0}),i.Eb(335544320,2,{_placeholderChild:0}),i.Eb(335544320,3,{_labelChild:0}),i.Eb(603979776,4,{_errorChildren:1}),i.Eb(603979776,5,{_hintChildren:1}),i.Eb(603979776,6,{_prefixChildren:1}),i.Eb(603979776,7,{_suffixChildren:1}),(t()(),i.qb(12,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var r=!0,o=t.component;return"input"===e&&(r=!1!==i.zb(t,13)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,13).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,13)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,13)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,18)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i.zb(t,18)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i.zb(t,18)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(o.talkName=n)&&r),r},null,null)),i.pb(13,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(15,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(17,16384,null,0,at,[[4,rt]],null,null),i.pb(18,999424,null,0,He,[i.k,w,[6,rt],[2,Bt],[2,Zt],G,[8,null],je,i.x],null,null),i.Db(2048,[[1,4]],ue,null,[He]),(t()(),i.qb(20,0,null,null,1,"image-upload",[],null,null,null,Rn,xn)),i.pb(21,573440,null,0,$e,[An,l.m],{folder:[0,"folder"]},null)],function(t,e){var n=e.component;t(e,15,0,n.talkName),t(e,18,0),t(e,21,0,"talks/"+n.selectedTalk.key)},function(t,e){t(e,3,1,["standard"==i.zb(e,4).appearance,"fill"==i.zb(e,4).appearance,"outline"==i.zb(e,4).appearance,"legacy"==i.zb(e,4).appearance,i.zb(e,4)._control.errorState,i.zb(e,4)._canLabelFloat,i.zb(e,4)._shouldLabelFloat(),i.zb(e,4)._hasFloatingLabel(),i.zb(e,4)._hideControlPlaceholder(),i.zb(e,4)._control.disabled,i.zb(e,4)._control.autofilled,i.zb(e,4)._control.focused,"accent"==i.zb(e,4).color,"warn"==i.zb(e,4).color,i.zb(e,4)._shouldForward("untouched"),i.zb(e,4)._shouldForward("touched"),i.zb(e,4)._shouldForward("pristine"),i.zb(e,4)._shouldForward("dirty"),i.zb(e,4)._shouldForward("valid"),i.zb(e,4)._shouldForward("invalid"),i.zb(e,4)._shouldForward("pending"),!i.zb(e,4)._animationsEnabled]),t(e,12,1,[i.zb(e,17).ngClassUntouched,i.zb(e,17).ngClassTouched,i.zb(e,17).ngClassPristine,i.zb(e,17).ngClassDirty,i.zb(e,17).ngClassValid,i.zb(e,17).ngClassInvalid,i.zb(e,17).ngClassPending,i.zb(e,18)._isServer,i.zb(e,18).id,i.zb(e,18).placeholder,i.zb(e,18).disabled,i.zb(e,18).required,i.zb(e,18).readonly&&!i.zb(e,18)._isNativeSelect||null,i.zb(e,18)._ariaDescribedby||null,i.zb(e,18).errorState,i.zb(e,18).required.toString()])})}function Un(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,38,"div",[["class","padded"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,8,"h2",[],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,3,"span",[],[[8,"title",0]],null,null,null,null)),i.Bb(131072,u.b,[i.h]),(t()(),i.Gb(4,null,["",""])),i.Bb(131072,u.b,[i.h]),(t()(),i.Gb(-1,null,[" Supervision ("])),(t()(),i.qb(7,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.auth.logout()&&i),i},null,null)),(t()(),i.Gb(-1,null,["logout"])),(t()(),i.Gb(-1,null,[")"])),(t()(),i.qb(10,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),i.qb(11,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),i.qb(12,0,null,null,2,"a",[["routerLink","upload"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.zb(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i.pb(13,671744,null,0,l.o,[l.m,l.a,u.h],{routerLink:[0,"routerLink"]},null),(t()(),i.Gb(-1,null,["tUpload a file"])),(t()(),i.qb(15,0,null,null,3,"div",[["style","overflow:hidden;"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,2,null,jn)),i.pb(17,278528,null,0,u.i,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null),i.Bb(131072,u.b,[i.h]),(t()(),i.qb(19,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),i.qb(20,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["New Post"])),(t()(),i.qb(22,0,null,null,2,"button",[["routerLink","new"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.zb(t,23).onClick()&&r),r},null,null)),i.pb(23,16384,null,0,l.n,[l.m,l.a,[8,null],i.C,i.k],{routerLink:[0,"routerLink"]},null),(t()(),i.Gb(-1,null,["Create"])),(t()(),i.qb(25,0,null,null,13,"div",[],null,null,null,null,null)),(t()(),i.qb(26,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["Manage Talks"])),(t()(),i.qb(28,0,null,null,8,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var r=!0,o=t.component;return"change"===e&&(r=!1!==i.zb(t,29).onChange(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,29).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(o.selectedTalk=n)&&r),r},null,null)),i.pb(29,16384,null,0,_t,[i.C,i.k],null,null),i.Db(1024,null,J,function(t){return[t]},[_t]),i.pb(31,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(33,16384,null,0,at,[[4,rt]],null,null),(t()(),i.fb(16777216,null,null,2,null,zn)),i.pb(35,278528,null,0,u.i,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null),i.Bb(131072,u.b,[i.h]),(t()(),i.fb(16777216,null,null,1,null,qn)),i.pb(38,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,13,0,"upload"),t(e,17,0,i.Hb(e,17,0,i.zb(e,18).transform(n.posts))),t(e,23,0,"new"),t(e,31,0,n.selectedTalk),t(e,35,0,i.Hb(e,35,0,i.zb(e,36).transform(n.talkList))),t(e,38,0,n.selectedTalk)},function(t,e){var n=e.component;t(e,2,0,i.Hb(e,2,0,i.zb(e,3).transform(n.auth.uid))),t(e,4,0,i.Hb(e,4,0,i.zb(e,5).transform(n.auth.name))),t(e,12,0,i.zb(e,13).target,i.zb(e,13).href),t(e,28,0,i.zb(e,33).ngClassUntouched,i.zb(e,33).ngClassTouched,i.zb(e,33).ngClassPristine,i.zb(e,33).ngClassDirty,i.zb(e,33).ngClassValid,i.zb(e,33).ngClassInvalid,i.zb(e,33).ngClassPending)})}function Wn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,4,"div",[["class","padded"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["You need more access."])),(t()(),i.qb(3,0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.auth.login()&&i),i},null,null)),(t()(),i.Gb(-1,null,["Login"]))],null,null)}function Gn(t){return i.Ib(0,[(t()(),i.fb(16777216,null,null,2,null,Un)),i.pb(1,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),i.Bb(131072,u.b,[i.h]),(t()(),i.fb(16777216,null,null,2,null,Wn)),i.pb(4,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),i.Bb(131072,u.b,[i.h])],function(t,e){var n=e.component;t(e,1,0,i.Hb(e,1,0,i.zb(e,2).transform(n.auth.isAdmin))),t(e,4,0,0==i.Hb(e,4,0,i.zb(e,5).transform(n.auth.isAdmin)))},null)}function Hn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,Gn,Mn)),i.pb(1,49152,null,0,Ln,[Fn,An],null,null)],null,null)}var Bn=i.mb("ng-component",Ln,Hn,{},{},[]),Kn=n("EthR"),Qn=n("M55E");n("197f");class Yn{constructor(t,e,n,i,r,o){this.posts=e,this.ep=n,this.router=r,this.sanitized=o,this.postChanges=new y.a,this.converter=new Qn.Converter({extensions:["youtube"]}),this.postPreview=this.postChanges.pipe(D(300),Object(M.a)(t=>this.sanitized.bypassSecurityTrustHtml(this.converter.makeHtml(t&&t.body||"")))),this.postData=t.params.pipe(Object(on.a)(t=>{if(t.id)return"new"===t.id?Object(A.a)(new Kn.a):e.postMap.pipe(Object(M.a)(e=>{console.log("Looking for post from",t,e),console.log(e);const n=e[t.id];return n&&(i.setTitle("Edit "+n.title+" | fluin.io blog"),this.contentChange(n)),n}),Object(O.a)(t=>this.contentChange(t)));console.error("No post specified")}))}contentChange(t){this.postChanges.next(t)}save(t){this.ep.save(t),this.router.navigateByUrl("/admin")}onKey(t,e){t.ctrlKey&&"s"===t.key&&(this.ep.save(e),t.preventDefault())}delete(t){this.ep.delete(t),this.router.navigateByUrl("/admin")}}class $n{constructor(t,e){this.db=t,this.ps=e}getObject(t){return this.db.object(`posts/${t}/`)}getPostList(){return this.db.list("posts")}save(t){void 0===t.key&&null===t.key||delete t.key,t.id?this.getObject(t.id).update(t).then(console.log,console.error):this.getPostList().push(t),this.ps.refreshData()}delete(t){if(t.id&&confirm("Are you sure you want to delete this post?"))return this.getObject(t.id).remove();console.error("Couldn't find post to delete")}}var Xn=i.ob({encapsulation:0,styles:["mat-form-field[_ngcontent-%COMP%] {\n        display: block;\n    }\n\n    mat-input[_ngcontent-%COMP%] {\n        display: block;\n        margin: 0 0 32px 0;\n    }"],data:{}});function Jn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,0,"img",[["src","/assets/images/imgpostholder.png"]],[[8,"alt",0]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.ngIf.title)})}function Zn(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.ngIf.image,e.parent.context.ngIf.title)})}function ti(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"image-upload",[],null,null,null,Rn,xn)),i.pb(1,573440,null,0,$e,[An,l.m],{folder:[0,"folder"]},null)],function(t,e){t(e,1,0,"posts/"+e.parent.context.ngIf.id)},null)}function ei(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,105,"div",[["class","padded"],["style","flex-grow:1;"]],null,[[null,"keydown"]],function(t,e,n){var i=!0;return"keydown"===e&&(i=!1!==t.component.onKey(n,t.context.ngIf)&&i),i},null,null)),(t()(),i.qb(1,0,null,null,96,"div",[["class","columns"],["style","display:flex;"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,76,"form",[["ngNoForm",""],["style","width:50%;padding:16px;"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,16,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Fe,Se)),i.pb(4,7520256,null,7,ve,[i.k,i.h,[2,H],[2,p],[2,ge],w,i.x,[2,Ee.a]],null,null),i.Eb(335544320,1,{_control:0}),i.Eb(335544320,2,{_placeholderChild:0}),i.Eb(335544320,3,{_labelChild:0}),i.Eb(603979776,4,{_errorChildren:1}),i.Eb(603979776,5,{_hintChildren:1}),i.Eb(603979776,6,{_prefixChildren:1}),i.Eb(603979776,7,{_suffixChildren:1}),(t()(),i.qb(12,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","title"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var r=!0;return"input"===e&&(r=!1!==i.zb(t,13)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,13).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,13)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,13)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,18)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i.zb(t,18)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i.zb(t,18)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(t.context.ngIf.title=n)&&r),r},null,null)),i.pb(13,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(15,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(17,16384,null,0,at,[[4,rt]],null,null),i.pb(18,999424,null,0,He,[i.k,w,[6,rt],[2,Bt],[2,Zt],G,[8,null],je,i.x],{placeholder:[0,"placeholder"]},null),i.Db(2048,[[1,4]],ue,null,[He]),(t()(),i.qb(20,0,null,null,16,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Fe,Se)),i.pb(21,7520256,null,7,ve,[i.k,i.h,[2,H],[2,p],[2,ge],w,i.x,[2,Ee.a]],null,null),i.Eb(335544320,8,{_control:0}),i.Eb(335544320,9,{_placeholderChild:0}),i.Eb(335544320,10,{_labelChild:0}),i.Eb(603979776,11,{_errorChildren:1}),i.Eb(603979776,12,{_hintChildren:1}),i.Eb(603979776,13,{_prefixChildren:1}),i.Eb(603979776,14,{_suffixChildren:1}),(t()(),i.qb(29,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","image url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var r=!0;return"input"===e&&(r=!1!==i.zb(t,30)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,30).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,30)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,30)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,35)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i.zb(t,35)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i.zb(t,35)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(t.context.ngIf.image=n)&&r),r},null,null)),i.pb(30,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(32,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(34,16384,null,0,at,[[4,rt]],null,null),i.pb(35,999424,null,0,He,[i.k,w,[6,rt],[2,Bt],[2,Zt],G,[8,null],je,i.x],{placeholder:[0,"placeholder"]},null),i.Db(2048,[[8,4]],ue,null,[He]),(t()(),i.qb(37,0,null,null,16,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Fe,Se)),i.pb(38,7520256,null,7,ve,[i.k,i.h,[2,H],[2,p],[2,ge],w,i.x,[2,Ee.a]],null,null),i.Eb(335544320,15,{_control:0}),i.Eb(335544320,16,{_placeholderChild:0}),i.Eb(335544320,17,{_labelChild:0}),i.Eb(603979776,18,{_errorChildren:1}),i.Eb(603979776,19,{_hintChildren:1}),i.Eb(603979776,20,{_prefixChildren:1}),i.Eb(603979776,21,{_suffixChildren:1}),(t()(),i.qb(46,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","id"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var r=!0;return"input"===e&&(r=!1!==i.zb(t,47)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,47).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,47)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,47)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,52)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i.zb(t,52)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i.zb(t,52)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(t.context.ngIf.id=n)&&r),r},null,null)),i.pb(47,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(49,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(51,16384,null,0,at,[[4,rt]],null,null),i.pb(52,999424,null,0,He,[i.k,w,[6,rt],[2,Bt],[2,Zt],G,[8,null],je,i.x],{placeholder:[0,"placeholder"]},null),i.Db(2048,[[15,4]],ue,null,[He]),(t()(),i.qb(54,0,null,null,16,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Fe,Se)),i.pb(55,7520256,null,7,ve,[i.k,i.h,[2,H],[2,p],[2,ge],w,i.x,[2,Ee.a]],null,null),i.Eb(335544320,22,{_control:0}),i.Eb(335544320,23,{_placeholderChild:0}),i.Eb(335544320,24,{_labelChild:0}),i.Eb(603979776,25,{_errorChildren:1}),i.Eb(603979776,26,{_hintChildren:1}),i.Eb(603979776,27,{_prefixChildren:1}),i.Eb(603979776,28,{_suffixChildren:1}),(t()(),i.qb(63,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","date"],["type","date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var r=!0;return"input"===e&&(r=!1!==i.zb(t,64)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,64).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,64)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,64)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,69)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i.zb(t,69)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i.zb(t,69)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(t.context.ngIf.date=n)&&r),r},null,null)),i.pb(64,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(66,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(68,16384,null,0,at,[[4,rt]],null,null),i.pb(69,999424,null,0,He,[i.k,w,[6,rt],[2,Bt],[2,Zt],G,[8,null],je,i.x],{placeholder:[0,"placeholder"],type:[1,"type"]},null),i.Db(2048,[[22,4]],ue,null,[He]),(t()(),i.qb(71,0,null,null,5,"textarea",[["placeholder","body"],["style","width:100%;"]],[[4,"height","px"],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var r=!0,o=t.component;return"input"===e&&(r=!1!==i.zb(t,72)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i.zb(t,72).onTouched()&&r),"compositionstart"===e&&(r=!1!==i.zb(t,72)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i.zb(t,72)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==o.contentChange(t.context.ngIf)&&r),"ngModelChange"===e&&(r=!1!==(t.context.ngIf.body=n)&&r),r},null,null)),i.pb(72,16384,null,0,tt,[i.C,i.k,[2,Z]],null,null),i.Db(1024,null,J,function(t){return[t]},[tt]),i.pb(74,671744,null,0,Jt,[[8,null],[8,null],[8,null],[6,J]],{model:[0,"model"]},{update:"ngModelChange"}),i.Db(2048,null,rt,null,[Jt]),i.pb(76,16384,null,0,at,[[4,rt]],null,null),(t()(),i.qb(77,0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.save(t.context.ngIf)&&i),i},null,null)),(t()(),i.Gb(-1,null,["Save"])),(t()(),i.qb(79,0,null,null,18,"div",[["class","post"],["style","width:50%;padding:16px;"]],null,null,null,null,null)),(t()(),i.qb(80,0,null,null,4,"div",[["class","highlight-image"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,Jn)),i.pb(82,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,1,null,Zn)),i.pb(84,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(85,0,null,null,4,"h1",[],null,null,null,null,null)),(t()(),i.qb(86,0,null,null,3,"a",[["target","preview"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.zb(t,87).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i.pb(87,671744,null,0,l.o,[l.m,l.a,u.h],{target:[0,"target"],routerLink:[1,"routerLink"]},null),i.Ab(88,2),(t()(),i.Gb(89,null,["",""])),(t()(),i.qb(90,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),i.qb(91,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["by Stephen Fluin"])),(t()(),i.qb(93,0,null,null,2,"div",[["class","date"]],null,null,null,null,null)),(t()(),i.qb(94,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),i.Gb(95,null,["",""])),(t()(),i.qb(96,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),i.Bb(131072,u.b,[i.h]),(t()(),i.qb(98,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,ti)),i.pb(100,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(101,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i.qb(102,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),i.Gb(-1,null,["Delete Post"])),(t()(),i.qb(104,0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.delete(t.context.ngIf)&&i),i},null,null)),(t()(),i.Gb(-1,null,["Delete This Post"]))],function(t,e){t(e,15,0,e.context.ngIf.title),t(e,18,0,"title"),t(e,32,0,e.context.ngIf.image),t(e,35,0,"image url"),t(e,49,0,e.context.ngIf.id),t(e,52,0,"id"),t(e,66,0,e.context.ngIf.date),t(e,69,0,"date","date"),t(e,74,0,e.context.ngIf.body),t(e,82,0,!e.context.ngIf.image),t(e,84,0,e.context.ngIf.image);var n=t(e,88,0,"/blog",e.context.ngIf.id);t(e,87,0,"preview",n),t(e,100,0,e.context.ngIf.id)},function(t,e){var n=e.component;t(e,3,1,["standard"==i.zb(e,4).appearance,"fill"==i.zb(e,4).appearance,"outline"==i.zb(e,4).appearance,"legacy"==i.zb(e,4).appearance,i.zb(e,4)._control.errorState,i.zb(e,4)._canLabelFloat,i.zb(e,4)._shouldLabelFloat(),i.zb(e,4)._hasFloatingLabel(),i.zb(e,4)._hideControlPlaceholder(),i.zb(e,4)._control.disabled,i.zb(e,4)._control.autofilled,i.zb(e,4)._control.focused,"accent"==i.zb(e,4).color,"warn"==i.zb(e,4).color,i.zb(e,4)._shouldForward("untouched"),i.zb(e,4)._shouldForward("touched"),i.zb(e,4)._shouldForward("pristine"),i.zb(e,4)._shouldForward("dirty"),i.zb(e,4)._shouldForward("valid"),i.zb(e,4)._shouldForward("invalid"),i.zb(e,4)._shouldForward("pending"),!i.zb(e,4)._animationsEnabled]),t(e,12,1,[i.zb(e,17).ngClassUntouched,i.zb(e,17).ngClassTouched,i.zb(e,17).ngClassPristine,i.zb(e,17).ngClassDirty,i.zb(e,17).ngClassValid,i.zb(e,17).ngClassInvalid,i.zb(e,17).ngClassPending,i.zb(e,18)._isServer,i.zb(e,18).id,i.zb(e,18).placeholder,i.zb(e,18).disabled,i.zb(e,18).required,i.zb(e,18).readonly&&!i.zb(e,18)._isNativeSelect||null,i.zb(e,18)._ariaDescribedby||null,i.zb(e,18).errorState,i.zb(e,18).required.toString()]),t(e,20,1,["standard"==i.zb(e,21).appearance,"fill"==i.zb(e,21).appearance,"outline"==i.zb(e,21).appearance,"legacy"==i.zb(e,21).appearance,i.zb(e,21)._control.errorState,i.zb(e,21)._canLabelFloat,i.zb(e,21)._shouldLabelFloat(),i.zb(e,21)._hasFloatingLabel(),i.zb(e,21)._hideControlPlaceholder(),i.zb(e,21)._control.disabled,i.zb(e,21)._control.autofilled,i.zb(e,21)._control.focused,"accent"==i.zb(e,21).color,"warn"==i.zb(e,21).color,i.zb(e,21)._shouldForward("untouched"),i.zb(e,21)._shouldForward("touched"),i.zb(e,21)._shouldForward("pristine"),i.zb(e,21)._shouldForward("dirty"),i.zb(e,21)._shouldForward("valid"),i.zb(e,21)._shouldForward("invalid"),i.zb(e,21)._shouldForward("pending"),!i.zb(e,21)._animationsEnabled]),t(e,29,1,[i.zb(e,34).ngClassUntouched,i.zb(e,34).ngClassTouched,i.zb(e,34).ngClassPristine,i.zb(e,34).ngClassDirty,i.zb(e,34).ngClassValid,i.zb(e,34).ngClassInvalid,i.zb(e,34).ngClassPending,i.zb(e,35)._isServer,i.zb(e,35).id,i.zb(e,35).placeholder,i.zb(e,35).disabled,i.zb(e,35).required,i.zb(e,35).readonly&&!i.zb(e,35)._isNativeSelect||null,i.zb(e,35)._ariaDescribedby||null,i.zb(e,35).errorState,i.zb(e,35).required.toString()]),t(e,37,1,["standard"==i.zb(e,38).appearance,"fill"==i.zb(e,38).appearance,"outline"==i.zb(e,38).appearance,"legacy"==i.zb(e,38).appearance,i.zb(e,38)._control.errorState,i.zb(e,38)._canLabelFloat,i.zb(e,38)._shouldLabelFloat(),i.zb(e,38)._hasFloatingLabel(),i.zb(e,38)._hideControlPlaceholder(),i.zb(e,38)._control.disabled,i.zb(e,38)._control.autofilled,i.zb(e,38)._control.focused,"accent"==i.zb(e,38).color,"warn"==i.zb(e,38).color,i.zb(e,38)._shouldForward("untouched"),i.zb(e,38)._shouldForward("touched"),i.zb(e,38)._shouldForward("pristine"),i.zb(e,38)._shouldForward("dirty"),i.zb(e,38)._shouldForward("valid"),i.zb(e,38)._shouldForward("invalid"),i.zb(e,38)._shouldForward("pending"),!i.zb(e,38)._animationsEnabled]),t(e,46,1,[i.zb(e,51).ngClassUntouched,i.zb(e,51).ngClassTouched,i.zb(e,51).ngClassPristine,i.zb(e,51).ngClassDirty,i.zb(e,51).ngClassValid,i.zb(e,51).ngClassInvalid,i.zb(e,51).ngClassPending,i.zb(e,52)._isServer,i.zb(e,52).id,i.zb(e,52).placeholder,i.zb(e,52).disabled,i.zb(e,52).required,i.zb(e,52).readonly&&!i.zb(e,52)._isNativeSelect||null,i.zb(e,52)._ariaDescribedby||null,i.zb(e,52).errorState,i.zb(e,52).required.toString()]),t(e,54,1,["standard"==i.zb(e,55).appearance,"fill"==i.zb(e,55).appearance,"outline"==i.zb(e,55).appearance,"legacy"==i.zb(e,55).appearance,i.zb(e,55)._control.errorState,i.zb(e,55)._canLabelFloat,i.zb(e,55)._shouldLabelFloat(),i.zb(e,55)._hasFloatingLabel(),i.zb(e,55)._hideControlPlaceholder(),i.zb(e,55)._control.disabled,i.zb(e,55)._control.autofilled,i.zb(e,55)._control.focused,"accent"==i.zb(e,55).color,"warn"==i.zb(e,55).color,i.zb(e,55)._shouldForward("untouched"),i.zb(e,55)._shouldForward("touched"),i.zb(e,55)._shouldForward("pristine"),i.zb(e,55)._shouldForward("dirty"),i.zb(e,55)._shouldForward("valid"),i.zb(e,55)._shouldForward("invalid"),i.zb(e,55)._shouldForward("pending"),!i.zb(e,55)._animationsEnabled]),t(e,63,1,[i.zb(e,68).ngClassUntouched,i.zb(e,68).ngClassTouched,i.zb(e,68).ngClassPristine,i.zb(e,68).ngClassDirty,i.zb(e,68).ngClassValid,i.zb(e,68).ngClassInvalid,i.zb(e,68).ngClassPending,i.zb(e,69)._isServer,i.zb(e,69).id,i.zb(e,69).placeholder,i.zb(e,69).disabled,i.zb(e,69).required,i.zb(e,69).readonly&&!i.zb(e,69)._isNativeSelect||null,i.zb(e,69)._ariaDescribedby||null,i.zb(e,69).errorState,i.zb(e,69).required.toString()]),t(e,71,0,e.context.ngIf&&e.context.ngIf.body&&e.context.ngIf.body.length>200&&e.context.ngIf.body.length/2||400,i.zb(e,76).ngClassUntouched,i.zb(e,76).ngClassTouched,i.zb(e,76).ngClassPristine,i.zb(e,76).ngClassDirty,i.zb(e,76).ngClassValid,i.zb(e,76).ngClassInvalid,i.zb(e,76).ngClassPending),t(e,86,0,i.zb(e,87).target,i.zb(e,87).href),t(e,89,0,e.context.ngIf.title),t(e,95,0,e.context.ngIf.date),t(e,96,0,i.Hb(e,96,0,i.zb(e,97).transform(n.postPreview)))})}function ni(t){return i.Ib(0,[(t()(),i.Gb(-1,null,["Loading posts..."]))],null,null)}function ii(t){return i.Ib(0,[(t()(),i.fb(16777216,null,null,2,null,ei)),i.pb(1,16384,null,0,u.j,[i.N,i.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),i.Bb(131072,u.b,[i.h]),(t()(),i.fb(0,[["loading",2]],null,0,null,ni))],function(t,e){var n=e.component;t(e,1,0,i.Hb(e,1,0,i.zb(e,2).transform(n.postData)),i.zb(e,3))},null)}function ri(t){return i.Ib(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,ii,Xn)),i.pb(1,49152,null,0,Yn,[l.a,Kn.b,$n,m.i,l.m,m.b],null,null)],null,null)}var oi=i.mb("ng-component",Yn,ri,{},{},[]);let ai=class{constructor(t,e,n,i){this.zone=i;const r=new Cn(i,n);this.auth=i.runOutsideAngular(()=>kn(t,e).auth()),this.authState=r.keepUnstableUntilFirst(r.runOutsideAngular(new _.a(t=>({unsubscribe:this.auth.onAuthStateChanged(t)})))),this.user=r.keepUnstableUntilFirst(r.runOutsideAngular(new _.a(t=>({unsubscribe:this.auth.onIdTokenChanged(t)})))),this.idToken=this.user.pipe(Object(on.a)(t=>t?Object($.a)(t.getIdToken()):Object(A.a)(null))),this.idTokenResult=this.user.pipe(Object(on.a)(t=>t?Object($.a)(t.getIdTokenResult()):Object(A.a)(null)))}};var si=n("wj3C"),li=n.n(si);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function r(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,i){if(i){var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(i=i(o=r[t=t[t.length-1]]))!=o&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function i(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var a=n.setTimeout;i.prototype.c=function(t){a(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(i){this.f(i)}}}this.a=null},i.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.o),reject:t(this.g)}},e.prototype.o=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.l(t):this.h(t)}},e.prototype.l=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new i;return e.prototype.u=function(t){var e=this.f();t.Ja(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(i){n.reject(i)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(n){o(n)}}:e}var r,o,a=new e(function(t,e){r=t,o=e});return this.Ja(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ja=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=r(t),a=i.next();!a.done;a=i.next())o(a.value).Ja(e,n)})},e.all=function(t){var n=r(t),i=n.next();return i.done?o([]):new e(function(t,e){function r(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(i.value).Ja(r(a.length-1),e),i=n.next()}while(!i.done)})},e});var o=o||{},a=this;function s(t){return"string"==typeof t}function l(t){return"boolean"==typeof t}var u=/^[\w+\/_-]+[=]{0,2}$/,c=null;function h(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function f(t){return"array"==d(t)}function m(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==d(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.cd=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function I(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");k.call(this,n+t[i])}function A(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}T(k,Error),k.prototype.name="CustomError",T(N,k),N.prototype.name="AssertionError",O.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new O(function(){return new L},function(t){t.reset()});function R(){var t=vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function L(){this.next=this.b=this.a=null}P.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=s(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=s(t)?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},j=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=s(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function z(t,e){return 0<=F(t,e)}function q(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function U(t,e){!function(t,e){for(var n=s(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,function(n,i){e.call(void 0,n,i,t)&&Array.prototype.splice.call(t,i,1)})}function W(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var H,B=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},K=/&/g,Q=/</g,Y=/>/g,$=/"/g,X=/'/g,J=/\x00/g,Z=/[\x00&<>"']/;function tt(t,e){return-1!=t.indexOf(e)}function et(t,e){return t<e?-1:t>e?1:0}t:{var nt=a.navigator;if(nt){var it=nt.userAgent;if(it){H=it;break t}}H=""}function rt(t){return tt(H,t)}function ot(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function at(t){for(var e in t)return!1;return!0}function st(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt,ut,ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ht(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<ct.length;o++)n=ct[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function dt(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function pt(t){return Z.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(K,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Q,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Y,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(X,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(J,"&#0;"))),t}function ft(t){a.setTimeout(function(){throw t},0)}function mt(t,e){ut||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);ut=function(){t.then(yt)}}else ut=function(){var t=yt;!g(a.setImmediate)||a.Window&&a.Window.prototype&&!rt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(lt||(lt=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!rt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=C(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!rt("Trident")&&!rt("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){i.next={yb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),lt(t)):a.setImmediate(t)}}(),gt||(ut(),gt=!0),vt.add(t,e)}var gt=!1,vt=new P;function yt(){for(var t;t=R();){try{t.a.call(t.b)}catch(e){ft(e)}x(D,t)}gt=!1}function _t(t,e){if(this.a=bt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Pt(n,wt,t)},function(t){if(!(t instanceof jt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Pt(n,Ct,t)})}catch(i){Pt(this,Ct,i)}}var bt=0,wt=2,Ct=3;function Et(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Et.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var St=new O(function(){return new Et},function(t){t.reset()});function Tt(t,e,n){var i=St.get();return i.g=t,i.b=e,i.f=n,i}function It(t){if(t instanceof _t)return t;var e=new _t(h);return Pt(e,wt,t),e}function kt(t){return new _t(function(e,n){n(t)})}function Nt(t,e,n){Dt(t,e,n,null)||mt(E(e,t))}function At(t){return new _t(function(e){var n=t.length,i=[];if(n)for(var r=function(t,r,o){n--,i[t]=r?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&e(i)},o=0;o<t.length;o++)Nt(t[o],E(r,o,!0),E(r,o,!1));else e(i)})}function Ot(t,e){t.b||t.a!=wt&&t.a!=Ct||Rt(t),t.f?t.f.next=e:t.b=e,t.f=e}function xt(t,e,n,i){var r=Tt(null,null,null);return r.a=new _t(function(t,o){r.g=e?function(n){try{var r=e.call(i,n);t(r)}catch(a){o(a)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof jt?o(e):t(r)}catch(a){o(a)}}:o}),r.a.c=t,Ot(t,r),r.a}function Pt(t,e,n){t.a==bt&&(t===n&&(e=Ct,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Dt(n,t.Lc,t.Mc,t)||(t.i=n,t.a=e,t.c=null,Rt(t),e!=Ct||n instanceof jt||function(t,e){t.g=!0,mt(function(){t.g&&Vt.call(null,e)})}(t,n)))}function Dt(t,e,n,i){if(t instanceof _t)return Ot(t,Tt(e||h,n||null,i)),!0;if(I(t))return t.then(e,n,i),!0;if(v(t))try{var r=t.then;if(g(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(r,t))},o)}catch(s){o(s)}}(t,r,e,n,i),!0}catch(o){return n.call(i,o),!0}return!1}function Rt(t){t.h||(t.h=!0,mt(t.Xb,t))}function Lt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Ft(t,e,n,i){if(n==Ct&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Mt(e,n,i);else try{e.c?e.g.call(e.f):Mt(e,n,i)}catch(r){Vt.call(null,r)}x(St,e)}function Mt(t,e,n){e==wt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_t.prototype.then=function(t,e,n){return xt(this,g(t)?t:null,g(e)?e:null,n)},_t.prototype.$goog_Thenable=!0,(t=_t.prototype).ia=function(t,e){return(t=Tt(t,t,e)).c=!0,Ot(this,t),this},t.s=function(t,e){return xt(this,null,t,e)},t.cancel=function(t){this.a==bt&&mt(function(){!function t(e,n){if(e.a==bt)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==bt&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):Lt(i),Ft(i,o,Ct,n)))}e.c=null}else Pt(e,Ct,n)}(this,new jt(t))},this)},t.Lc=function(t){this.a=bt,Pt(this,wt,t)},t.Mc=function(t){this.a=bt,Pt(this,Ct,t)},t.Xb=function(){for(var t;t=Lt(this);)Ft(this,t,this.a,this.i);this.h=!1};var Vt=ft;function jt(t){k.call(this,t)}function zt(){0!=qt&&(Ut[this[y]||(this[y]=++_)]=this),this.qa=this.qa,this.ja=this.ja}T(jt,k),jt.prototype.name="cancel";var qt=0,Ut={};function Wt(t){if(!t.qa&&(t.qa=!0,t.va(),0!=qt)){var e=t[y]||(t[y]=++_);if(0!=qt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ut[e]}}function Gt(t){return Gt[" "](t),t}zt.prototype.qa=!1,zt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Gt[" "]=h;var Ht,Bt,Kt=rt("Opera"),Qt=rt("Trident")||rt("MSIE"),Yt=rt("Edge"),$t=Yt||Qt,Xt=rt("Gecko")&&!(tt(H.toLowerCase(),"webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),Jt=tt(H.toLowerCase(),"webkit")&&!rt("Edge");function Zt(){var t=a.document;return t?t.documentMode:void 0}t:{var te="",ee=(Bt=H,Xt?/rv:([^\);]+)(\)|;)/.exec(Bt):Yt?/Edge\/([\d\.]+)/.exec(Bt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bt):Jt?/WebKit\/(\S+)/.exec(Bt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Bt):void 0);if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Ht=String(ne);break t}}Ht=te}var ie,re={};function oe(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=B(String(Ht)).split("."),i=B(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=et(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||et(0==a[2].length,0==s[2].length)||et(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ae=a.document;ie=ae&&Qt?Zt()||("CSS1Compat"==ae.compatMode?parseInt(Ht,10):5):void 0;var se=Object.freeze||function(t){return t},le=!Qt||9<=Number(ie),ue=Qt&&!oe("9"),ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function he(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function de(t,e){if(he.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Gt(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:pe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}he.prototype.preventDefault=function(){this.Kb=!1},T(de,he);var pe=se({2:"touch",3:"pen",4:"mouse"});de.prototype.preventDefault=function(){de.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ue)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},de.prototype.f=function(){return this.a};var fe="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Na=r,this.key=++me,this.oa=this.Ia=!1}function ve(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.Na=null}function ye(t){this.src=t,this.a={},this.b=0}function _e(t,e){var n=e.type;n in t.a&&q(t.a[n],e)&&(ve(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function be(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.Na==i)return r}return-1}ye.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=be(t,e,i,r);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new ge(e,this.src,o,!!i,r)).Ia=n,t.push(e)),e};var we="closure_lm_"+(1e6*Math.random()|0),Ce={};function Ee(t,e,n,i,r){if(i&&i.once)Te(t,e,n,i,r);else if(f(e))for(var o=0;o<e.length;o++)Ee(t,e[o],n,i,r);else n=Re(n),t&&t[fe]?Fe(t,e,n,v(i)?!!i.capture:!!i,r):Se(t,e,n,!1,i,r)}function Se(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=v(r)?!!r.capture:!!r,s=Pe(t);if(s||(t[we]=s=new ye(t)),!(n=s.add(e,n,i,a,o)).proxy)if(i=function(){var t=xe,e=le?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ce||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ne(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function Te(t,e,n,i,r){if(f(e))for(var o=0;o<e.length;o++)Te(t,e[o],n,i,r);else n=Re(n),t&&t[fe]?Me(t,e,n,v(i)?!!i.capture:!!i,r):Se(t,e,n,!0,i,r)}function Ie(t,e,n,i,r){if(f(e))for(var o=0;o<e.length;o++)Ie(t,e[o],n,i,r);else i=v(i)?!!i.capture:!!i,n=Re(n),t&&t[fe]?(t=t.m,(e=String(e).toString())in t.a&&-1<(n=be(o=t.a[e],n,i,r))&&(ve(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Pe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=be(e,n,i,r)),(n=-1<t?e[t]:null)&&ke(n))}function ke(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[fe])_e(e.m,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ne(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Pe(e))?(_e(n,t),0==n.b&&(n.src=null,e[we]=null)):ve(t)}}}function Ne(t){return t in Ce?Ce[t]:Ce[t]="on"+t}function Ae(t,e,n,i){var r=!0;if((t=Pe(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Oe(o,i),r=r&&!1!==o)}return r}function Oe(t,e){var n=t.listener,i=t.Na||t.src;return t.Ia&&ke(t),n.call(i,e)}function xe(t,e){if(t.oa)return!0;if(!le){if(!e)t:{e=["window","event"];for(var n=a,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new de(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=Ae(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=Ae(i[r],t,!1,e),n=n&&o}return n}return Oe(t,new de(e,this))}function Pe(t){return(t=t[we])instanceof ye?t:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(t){return g(t)?t:(t[De]||(t[De]=function(e){return t.handleEvent(e)}),t[De])}function Le(){zt.call(this),this.m=new ye(this),this.Qb=this,this.Va=null}function Fe(t,e,n,i,r){t.m.add(String(e),n,!1,i,r)}function Me(t,e,n,i,r){t.m.add(String(e),n,!0,i,r)}function Ve(t,e,n,i){if(!(e=t.m.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,l=a.Na||a.src;a.Ia&&_e(t.m,a),r=!1!==s.call(l,i)&&r}}return r&&0!=i.Kb}function je(t,e,n){if(g(t))n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function ze(t){var e=null;return new _t(function(n,i){-1==(e=je(function(){n(void 0)},t))&&i(Error("Failed to schedule timer."))}).s(function(t){throw a.clearTimeout(e),t})}function qe(t){if(t.S&&"function"==typeof t.S)return t.S();if(s(t))return t.split("");if(m(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Ue(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(m(t)||s(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function We(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof We)for(n=t.U(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Ge(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];He(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)He(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function He(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(Le,zt),Le.prototype[fe]=!0,Le.prototype.addEventListener=function(t,e,n,i){Ee(this,t,e,n,i)},Le.prototype.removeEventListener=function(t,e,n,i){Ie(this,t,e,n,i)},Le.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Qb;var i=t.type||t;if(s(t))t=new he(t,n);else if(t instanceof he)t.target=t.target||n;else{var r=t;ht(t=new he(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=Ve(a,i,!0,t)&&r}if(r=Ve(a=t.b=n,i,!0,t)&&r,r=Ve(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Ve(a=t.b=e[o],i,!1,t)&&r;return r},Le.prototype.va=function(){if(Le.qb.va.call(this),this.m){var t,e=this.m;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)ve(n[i]);delete e.a[t],e.b--}}this.Va=null},(t=We.prototype).S=function(){Ge(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return Ge(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return He(this.b,t)?this.b[t]:e},t.set=function(t,e){He(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Be=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ke(t,e){var n;this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1,t instanceof Ke?(this.h=void 0!==e?e:t.h,Qe(this,t.f),this.i=t.i,this.b=t.b,Ye(this,t.m),this.c=t.c,$e(this,gn(t.a)),this.g=t.g):t&&(n=String(t).match(Be))?(this.h=!!e,Qe(this,n[1]||"",!0),this.i=en(n[2]||""),this.b=en(n[3]||"",!0),Ye(this,n[4]),this.c=en(n[5]||"",!0),$e(this,n[6]||"",!0),this.g=en(n[7]||"")):(this.h=!!e,this.a=new cn(null,this.h))}function Qe(t,e,n){t.f=n?en(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ye(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $e(t,e,n){e instanceof cn?(t.a=e,function(t,e){e&&!t.f&&(hn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(pn(this,e),mn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=nn(e,ln)),t.a=new cn(e,t.h))}function Xe(t,e,n){t.a.set(e,n)}function Je(t,e){return t.a.get(e)}function Ze(t){return t instanceof Ke?new Ke(t):new Ke(t,void 0)}function tn(t,e){var n=new Ke(null,void 0);return Qe(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function en(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nn(t,e,n){return s(t)?(t=encodeURI(t).replace(e,rn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(nn(e,on,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(nn(e,on,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(nn(n,"/"==n.charAt(0)?sn:an,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",nn(n,un)),t.join("")},Ke.prototype.resolve=function(t){var e=new Ke(this),n=!!t.f;n?Qe(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.m;var i=t.c;if(n)Ye(e,t.m);else if(n=!!t.c){if("/"!=i.charAt(0))if(this.b&&!this.c)i="/"+i;else{var r=e.c.lastIndexOf("/");-1!=r&&(i=e.c.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(tt(r,"./")||tt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?$e(e,gn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var on=/[#\/\?@]/g,an=/[#\?:]/g,sn=/[#\?]/g,ln=/[#\?@]/g,un=/#/g;function cn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function hn(t){t.a||(t.a=new We,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function dn(t){var e=Ue(t);if(void 0===e)throw Error("Keys are undefined");var n=new cn(null,void 0);t=qe(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];f(o)?mn(n,r,o):n.add(r,o)}return n}function pn(t,e){hn(t),e=vn(t,e),He(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,He((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ge(t)))}function fn(t,e){return hn(t),e=vn(t,e),He(t.a.b,e)}function mn(t,e,n){pn(t,e),0<n.length&&(t.c=null,t.a.set(vn(t,e),G(n)),t.b+=n.length)}function gn(t){var e=new cn;return e.c=t.c,t.a&&(e.a=new We(t.a),e.b=t.b),e}function vn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=cn.prototype).add=function(t,e){hn(this),this.c=null,t=vn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){hn(this),this.a.forEach(function(n,i){M(n,function(n){t.call(e,n,i,this)},this)},this)},t.U=function(){hn(this);for(var t=this.a.S(),e=this.a.U(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.S=function(t){hn(this);var e=[];if(s(t))fn(this,t)&&(e=W(e,this.a.get(vn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return hn(this),this.c=null,fn(this,t=vn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.S(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.S(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")};var yn=!Qt||9<=Number(ie);function _n(t,e){this.a=t===Cn&&e||"",this.b=wn}function bn(t){return t instanceof _n&&t.constructor===_n&&t.b===wn?t.a:(A("expected object of type Const, got '"+t+"'"),"type_error:Const")}_n.prototype.na=!0,_n.prototype.ma=function(){return this.a},_n.prototype.toString=function(){return"Const{"+this.a+"}"};var wn={},Cn={};function En(){this.a="",this.b=Nn}function Sn(t){return t instanceof En&&t.constructor===En&&t.b===Nn?t.a:(A("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Tn(t,e){var n=bn(t);if(!kn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new En;return e.a=t,e}(t=n.replace(In,function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof _n?bn(t):encodeURIComponent(String(t))}))}En.prototype.na=!0,En.prototype.ma=function(){return this.a.toString()},En.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var In=/%{(\w+)}/g,kn=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,Nn={};function An(){this.a="",this.b=Dn}function On(t){return t instanceof An&&t.constructor===An&&t.b===Dn?t.a:(A("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}An.prototype.na=!0,An.prototype.ma=function(){return this.a.toString()},An.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xn=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function Pn(t){return t instanceof An?t:(t="object"==typeof t&&t.na?t.ma():String(t),xn.test(t)||(t="about:invalid#zClosurez"),Rn(t))}var Dn={};function Rn(t){var e=new An;return e.a=t,e}function Ln(){this.a="",this.b=Fn}Rn("about:blank"),Ln.prototype.na=!0,Ln.prototype.ma=function(){return this.a.toString()},Ln.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Fn={};function Mn(t){var e=new Ln;return e.a=t,e}function Vn(t){var e=document;return s(t)?e.getElementById(t):t}function jn(t,e){ot(e,function(e,n){e&&"object"==typeof e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:zn.hasOwnProperty(n)?t.setAttribute(zn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Mn("<!DOCTYPE html>"),Mn(""),Mn("<br>");var zn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function qn(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(g(t))return"function"==typeof t.item}return!1}function Un(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(f(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&"function"!=typeof(a=n[r])&&(i.push(o),Bn(r,i),i.push(":"),t(e,a,i),o=",");return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":Bn(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Wn,t,e),e.join("")}function Wn(){}var Gn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Hn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Bn(t,e){e.push('"',t.replace(Hn,function(t){var e=Gn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Gn[t]=e),e}),'"')}function Kn(){var t=pi();return Qt&&!!ie&&11==ie||/Edge\/\d+/.test(t)}function Qn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function Yn(t,e){e=e||a.window;var n="about:blank";t&&(n=On(Pn(t)).toString()),e.location.href=n}function $n(t){return!!((t=(t||pi()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Xn(t){t=t||a.window;try{t.close()}catch(e){}}function Jn(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=pi().toLowerCase(),i&&(e.target=i,tt(n,"crios/")&&(e.target="_blank")),ci(pi())==si&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof An?n:Pn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0))}var a=r.join(",");if((rt("iPhone")&&!rt("iPod")&&!rt("iPad")||rt("iPad")||rt("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(a=i.document.createElement("A"),e instanceof An||e instanceof An||(e="object"==typeof e&&e.na?e.ma():String(e),xn.test(e)||(e="about:invalid#zClosurez"),e=Rn(e)),a.href=On(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open("",n,a),t=On(e).toString(),a&&($t&&tt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Mn('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+pt(t)+'">'),a.document.write(function(t){return t instanceof Ln&&t.constructor===Ln&&t.b===Fn?t.a:(A("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=i.open(On(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ti=/^[^@]+@[^@]+$/;function ei(){var t=null;return new _t(function(e){"complete"==a.document.readyState?e():(t=function(){e()},Te(window,"load",t))}).s(function(e){throw Ie(window,"load",t),e})}function ni(t){return t=t||pi(),!("file:"!==yi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ii(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function ri(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function oi(){return li.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":li.a.INTERNAL.hasOwnProperty("node")?"Node":ri()?"Worker":"Browser"}function ai(){var t=oi();return"ReactNative"===t||"Node"===t}var si="Firefox",ui="Chrome";function ci(t){var e=t.toLowerCase();return tt(e,"opera/")||tt(e,"opr/")||tt(e,"opios/")?"Opera":tt(e,"iemobile")?"IEMobile":tt(e,"msie")||tt(e,"trident/")?"IE":tt(e,"edge/")?"Edge":tt(e,"firefox/")?si:tt(e,"silk/")?"Silk":tt(e,"blackberry")?"Blackberry":tt(e,"webos")?"Webos":!tt(e,"safari/")||tt(e,"chrome/")||tt(e,"crios/")||tt(e,"android")?!tt(e,"chrome/")&&!tt(e,"crios/")||tt(e,"edge/")?tt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":ui:"Safari"}var hi={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};function di(t,e){e=e||[];var n,i=[],r={};for(n in hi)r[hi[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=oi())?i=ci(r=pi()):"Worker"===i&&(i=ci(r=pi())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function pi(){return a.navigator&&a.navigator.userAgent||""}function fi(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function mi(){try{var t=a.localStorage,e=Ei();if(t)return t.setItem(e,"1"),t.removeItem(e),!Kn()||!!a.indexedDB}catch(n){return ri()&&!!a.indexedDB}return!1}function gi(){return(vi()||"chrome-extension:"===yi()||ni())&&!ai()&&mi()&&!ri()}function vi(){return"http:"===yi()||"https:"===yi()}function yi(){return a.location&&a.location.protocol||null}function _i(t){return!$n(t=t||pi())&&ci(t)!=si}function bi(t){return void 0===t?null:Un(t)}function wi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Ci(t){if(null!==t)return JSON.parse(t)}function Ei(t){return t||Math.floor(1e9*Math.random()).toString()}function Si(t){return"Safari"!=ci(t=t||pi())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ti(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ii(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=pi(),e=oi(),this.b=$n(t)||"ReactNative"===e}function ki(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Ni(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Ai(){return!(!fi("fireauth.oauthhelper",a)&&!fi("fireauth.iframe",a))}Ii.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!vi()&&"chrome-extension:"!==yi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Oi,xi={};function Pi(t){xi[t]||(xi[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Di={};Object.defineProperty(Di,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Di,"abcd",{configurable:!0,enumerable:!0,value:2}),Oi=2==Di.abcd}catch(Bt){Oi=!1}function Ri(t,e,n){Oi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Li(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ri(t,n,e[n])}function Fi(t){var e={};return Li(e,t),e}function Mi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ri(e,n,Mi(t[n]));return e}function Vi(t){var e={},n=t[zi],i=t[qi];if(!(t=t[Ui])||t!=ji&&!n)throw Error("Invalid provider user info!");e[Gi]=i||null,e[Wi]=n||null,Ri(this,Bi,t),Ri(this,Hi,Mi(e))}var ji="EMAIL_SIGNIN",zi="email",qi="newEmail",Ui="requestType",Wi="email",Gi="fromEmail",Hi="data",Bi="operation";function Ki(t,e){this.code=Yi+t,this.message=e||$i[t]||""}function Qi(t){var e=t&&t.code;return e?new Ki(e.substring(Yi.length),t.message):null}T(Ki,Error),Ki.prototype.w=function(){return{code:this.code,message:this.message}},Ki.prototype.toJSON=function(){return this.w()};var Yi="auth/",$i={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Xi(t){var e=t[nr];if(void 0===e)throw new Ki("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Ki("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ji];if(n&&"object"==typeof n){e=n[or];var i=n[ir];if(n=n[rr],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new Ki("argument-error",ir+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Ki("argument-error",rr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Ki("argument-error",or+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new Ki("missing-android-pkg-name")}}else if(void 0!==n)throw new Ki("argument-error",Ji+" property must be a non null object when specified.");if(this.f=null,(e=t[er])&&"object"==typeof e){if("string"==typeof(e=e[ar])&&e.length)this.f=e;else if(void 0!==e)throw new Ki("argument-error",ar+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Ki("argument-error",er+" property must be a non null object when specified.");if(void 0!==(e=t[tr])&&"boolean"!=typeof e)throw new Ki("argument-error",tr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Zi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Ki("argument-error",Zi+" property must be a non empty string when specified.");this.i=t||null}var Ji="android",Zi="dynamicLinkDomain",tr="handleCodeInApp",er="iOS",nr="url",ir="installApp",rr="minimumVersion",or="packageName",ar="bundleId";function sr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var lr=null,ur=null;function cr(t){this.c=t.sub,S(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function hr(t){return(t=dr(t))&&t.sub&&t.iss&&t.aud&&t.exp?new cr(t):null}function dr(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=ur[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!lr){lr={},ur={};for(var t=0;65>t;t++)lr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),ur[lr[t]]=t,62<=t&&(ur["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(i){}return null}cr.prototype.f=function(){return this.b};var pr,fr={Yc:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function mr(t){for(var e in fr)if(fr[e].id===t)return{firebaseEndpoint:(t=fr[e]).ab,secureTokenEndpoint:t.ib};return null}pr=mr("__EID__")?"__EID__":void 0;var gr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),vr=["client_id","response_type","scope","redirect_uri","state"],yr={Tc:{Oa:"locale",Ba:500,Aa:600,Pa:"facebook.com",hb:vr},Vc:{Oa:null,Ba:500,Aa:620,Pa:"github.com",hb:vr},Wc:{Oa:"hl",Ba:515,Aa:680,Pa:"google.com",hb:vr},bd:{Oa:"lang",Ba:485,Aa:705,Pa:"twitter.com",hb:gr}};function _r(t){for(var e in yr)if(yr[e].Pa==t)return yr[e];return null}function br(t){var e={};e["facebook.com"]=Tr,e["google.com"]=kr,e["github.com"]=Ir,e["twitter.com"]=Nr;var n=t&&t[Cr];try{if(n)return e[n]?new e[n](t):new Sr(t);if(void 0!==t[wr])return new Er(t)}catch(i){}return null}var wr="idToken",Cr="providerId";function Er(t){var e=t[Cr];if(!e&&t[wr]){var n=hr(t[wr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ri(this,"providerId",e),Ri(this,"isNewUser",n)}function Sr(t){Er.call(this,t),Ri(this,"profile",Mi((t=Ci(t.rawUserInfo||"{}"))||{}))}function Tr(t){if(Sr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ir(t){if(Sr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ri(this,"username",this.profile&&this.profile.login||null)}function kr(t){if(Sr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Nr(t){if(Sr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ri(this,"username",t.screenName||null)}function Ar(t){this.a=Ze(t)}function Or(t){var e=Ze(t),n=Je(e,"link"),i=Je(Ze(n),"link");return e=Je(e,"deep_link_id"),Je(Ze(e),"link")||e||i||n||t}function xr(){}function Pr(t,e){return t.then(function(t){if(t[ya]){var n=hr(t[ya]);if(!n||e!=n.c)throw new Ki("user-mismatch");return t}throw new Ki("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Yi+"user-not-found"?new Ki("user-mismatch"):t})}function Dr(t,e){if(!e)throw new Ki("internal-error","failed to construct a credential");this.a=e,Ri(this,"providerId",t),Ri(this,"signInMethod",t)}function Rr(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Lr(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Dr(t.providerId,t.pendingToken)}catch(e){}return null}function Fr(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ri(this,"idToken",e.idToken),e.accessToken&&Ri(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ri(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Ki("internal-error","failed to construct a credential");Ri(this,"accessToken",e.oauthToken),Ri(this,"secret",e.oauthTokenSecret)}Ri(this,"providerId",t),Ri(this,"signInMethod",n)}function Mr(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:dn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Vr(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Fr(t.providerId,e,t.signInMethod)}catch(n){}}return null}function jr(t,e){this.Dc=e||[],Li(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.cb=(_r(t)||{}).Oa||null,this.$a=null}function zr(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Ki("argument-error",'SAML provider IDs must be prefixed with "saml."');jr.call(this,t,[])}function qr(t){jr.call(this,t,vr),this.a=[]}function Ur(){qr.call(this,"facebook.com")}function Wr(t){if(!t)throw new Ki("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Ur).credential({accessToken:e})}function Gr(){qr.call(this,"github.com")}function Hr(t){if(!t)throw new Ki("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Gr).credential({accessToken:e})}function Br(){qr.call(this,"google.com"),this.ua("profile")}function Kr(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Br).credential({idToken:n,accessToken:e})}function Qr(){jr.call(this,"twitter.com",gr)}function Yr(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Ki("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Fr("twitter.com",n,"twitter.com")}function $r(t,e,n){this.a=t,this.c=e,Ri(this,"providerId","password"),Ri(this,"signInMethod",n===Jr.EMAIL_LINK_SIGN_IN_METHOD?Jr.EMAIL_LINK_SIGN_IN_METHOD:Jr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Xr(t){return t&&t.email&&t.password?new $r(t.email,t.password,t.signInMethod):null}function Jr(){Li(this,{providerId:"password",isOAuthProvider:!1})}function Zr(t,e){if(!(e=to(e)))throw new Ki("argument-error","Invalid email link!");return new $r(t,e,Jr.EMAIL_LINK_SIGN_IN_METHOD)}function to(t){var e=Je((t=new Ar(t=Or(t))).a,"oobCode")||null;return"signIn"===(Je(t.a,"mode")||null)&&e?e:null}function eo(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Ki("internal-error");this.a=t,Ri(this,"providerId","phone"),Ri(this,"signInMethod","phone")}function no(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return M(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new eo(e)}return null}function io(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function ro(t){try{this.a=t||li.a.auth()}catch(e){throw new Ki("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Li(this,{providerId:"phone",isOAuthProvider:!1})}function oo(t,e){if(!t)throw new Ki("missing-verification-id");if(!e)throw new Ki("missing-verification-code");return new eo({Ta:t,Sa:e})}function ao(t){if(t.temporaryProof&&t.phoneNumber)return new eo({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Kr(o,n);case"facebook.com":return Wr(n);case"github.com":return Hr(n);case"twitter.com":return Yr(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new Dr(e,a):new Fr(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new qr(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(s){return null}}function so(t){if(!t.isOAuthProvider)throw new Ki("invalid-oauth-provider")}function lo(t,e,n,i,r,o){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.h=o||null,this.a=r||null,!this.g&&!this.a)throw new Ki("invalid-auth-event");if(this.g&&this.a)throw new Ki("invalid-auth-event");if(this.g&&!this.f)throw new Ki("invalid-auth-event")}function uo(t){return(t=t||{}).type?new lo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Qi(t.error),t.postBody):null}function co(){this.b=null,this.a=[]}T(Sr,Er),T(Tr,Sr),T(Ir,Sr),T(kr,Sr),T(Nr,Sr),Dr.prototype.la=function(t){return Fa(t,Rr(this))},Dr.prototype.b=function(t,e){var n=Rr(this);return n.idToken=e,Ma(t,n)},Dr.prototype.f=function(t,e){return Pr(Va(t,Rr(this)),e)},Dr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Fr.prototype.la=function(t){return Fa(t,Mr(this))},Fr.prototype.b=function(t,e){var n=Mr(this);return n.idToken=e,Ma(t,n)},Fr.prototype.f=function(t,e){return Pr(Va(t,Mr(this)),e)},Fr.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},jr.prototype.Da=function(t){return this.zb=st(t),this},T(zr,jr),T(qr,jr),qr.prototype.ua=function(t){return z(this.a,t)||this.a.push(t),this},qr.prototype.Fb=function(){return G(this.a)},qr.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Ki("argument-error","credential failed: must provide the ID token and/or the access token.");return new Fr(this.providerId,n,this.providerId)},T(Ur,qr),Ri(Ur,"PROVIDER_ID","facebook.com"),Ri(Ur,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Gr,qr),Ri(Gr,"PROVIDER_ID","github.com"),Ri(Gr,"GITHUB_SIGN_IN_METHOD","github.com"),T(Br,qr),Ri(Br,"PROVIDER_ID","google.com"),Ri(Br,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Qr,jr),Ri(Qr,"PROVIDER_ID","twitter.com"),Ri(Qr,"TWITTER_SIGN_IN_METHOD","twitter.com"),$r.prototype.la=function(t){return this.signInMethod==Jr.EMAIL_LINK_SIGN_IN_METHOD?ps(t,Ba,{email:this.a,oobCode:this.c}):ps(t,us,{email:this.a,password:this.c})},$r.prototype.b=function(t,e){return this.signInMethod==Jr.EMAIL_LINK_SIGN_IN_METHOD?ps(t,Ka,{idToken:e,email:this.a,oobCode:this.c}):ps(t,is,{idToken:e,email:this.a,password:this.c})},$r.prototype.f=function(t,e){return Pr(this.la(t),e)},$r.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Li(Jr,{PROVIDER_ID:"password"}),Li(Jr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Li(Jr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),eo.prototype.la=function(t){return t.Ua(io(this))},eo.prototype.b=function(t,e){var n=io(this);return n.idToken=e,ps(t,hs,n)},eo.prototype.f=function(t,e){var n=io(this);return n.operation="REAUTH",Pr(t=ps(t,ds,n),e)},eo.prototype.w=function(){var t={providerId:"phone"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},ro.prototype.Ua=function(t,e){var n=this.a.c;return It(e.verify()).then(function(i){if(!s(i))throw new Ki("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return ps(n,es,e)}(0,{phoneNumber:t,recaptchaToken:i}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Ki("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Li(ro,{PROVIDER_ID:"phone"}),Li(ro,{PHONE_SIGN_IN_METHOD:"phone"}),lo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},lo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var ho,po=null;function fo(t){var e="unauthorized-domain",n=void 0,i=Ze(t);t=i.b,"chrome-extension"==(i=i.f)?n=dt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=dt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Ki.call(this,e,n)}function mo(t,e,n){Ki.call(this,t,n),(t=e||{}).Ab&&Ri(this,"email",t.Ab),t.$&&Ri(this,"phoneNumber",t.$),t.credential&&Ri(this,"credential",t.credential)}function go(t){if(t.code){var e=t.code||"";0==e.indexOf(Yi)&&(e=e.substring(Yi.length));var n={credential:ao(t)};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Ki(e,t.message||void 0);return new mo(e,n,t.message)}return null}function vo(){}function yo(){}function _o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function bo(){}function wo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=C(this.dc,this),this.a.onerror=C(this.Gb,this),this.a.onprogress=C(this.ec,this),this.a.ontimeout=C(this.ic,this)}function Co(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Eo(t,e,n){this.reset(t,e,n,void 0,void 0)}function So(t){this.f=t,this.b=this.c=this.a=null}function To(t,e){this.name=t,this.value=e}co.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=fi("universalLinks.subscribe",a))&&t(null,this.b))},co.prototype.unsubscribe=function(t){U(this.a,function(e){return e==t})},T(fo,Ki),T(mo,Ki),mo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.w();return e&&ht(t,e),t},mo.prototype.toJSON=function(){return this.w()},vo.prototype.c=null,T(yo,vo),yo.prototype.a=function(){var t=_o(this);return t?new ActiveXObject(t):new XMLHttpRequest},yo.prototype.b=function(){var t={};return _o(this)&&(t[0]=!0,t[1]=!0),t},ho=new yo,T(bo,vo),bo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new wo;throw Error("Unsupported browser")},bo.prototype.b=function(){return{}},(t=wo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.dc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Co(this,4)},t.Gb=function(){this.status=500,this.response=this.responseText="",Co(this,4)},t.ic=function(){this.Gb()},t.ec=function(){this.status=200,Co(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Eo.prototype.a=null,Eo.prototype.reset=function(t,e,n,i,r){i||S(),delete this.a},To.prototype.toString=function(){return this.name};var Io=new To("SEVERE",1e3),ko=new To("WARNING",900),No=new To("CONFIG",700),Ao=new To("FINE",500);So.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(A("Root logger has no level set."),null)}(this).value)for(g(e)&&(e=e()),t=new Eo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Oo={},xo=null;function Po(t){var e;if(xo||(xo=new So(""),Oo[""]=xo,xo.c=No),!(e=Oo[t])){e=new So(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=Po(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,Oo[t]=e}return e}function Do(t,e){t&&t.log(Ao,e,void 0)}function Ro(t){this.f=t}function Lo(t){Le.call(this),this.u=t,this.readyState=Fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=Po("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Ro,vo),Ro.prototype.a=function(){return new Lo(this.f)},Ro.prototype.b=function(t){return function(){return t}}({}),T(Lo,Le);var Fo=0;function Mo(t){t.c.read().then(t.cc.bind(t)).catch(t.Ma.bind(t))}function Vo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,jo(t)}function jo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function zo(t){Le.call(this),this.headers=new We,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=qo,this.v=this.O=!1}(t=Lo.prototype).open=function(t,e){if(this.readyState!=Fo)throw this.abort(),Error("Error reopening a connection");this.o=t,this.g=e,this.readyState=1,jo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.o,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.hc.bind(this),this.Ma.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Vo(this,!1)),this.readyState=Fo},t.hc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,jo(this)),this.a&&(this.readyState=3,jo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.fc.bind(this),this.Ma.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Mo(this)):t.text().then(this.gc.bind(this),this.Ma.bind(this)))))},t.cc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Vo(this,!0):jo(this),3==this.readyState&&Mo(this)}},t.gc=function(t){this.a&&(this.response=this.responseText=t,Vo(this,!0))},t.fc=function(t){this.a&&(this.response=t,Vo(this,!0))},t.Ma=function(t){var e=this.h;e&&e.log(ko,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Vo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(ko,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(ko,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(zo,Le);var qo="";zo.prototype.b=Po("goog.net.XhrIo");var Uo=/^https?$/i,Wo=["POST","PUT"];function Go(t){return"content-type"==t.toLowerCase()}function Ho(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Bo(t),Qo(t)}function Bo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ko(t){if(t.c&&void 0!==o)if(t.A[1]&&4==$o(t)&&2==Xo(t))Do(t.b,Jo(t,"Local request error detected and ignored"));else if(t.i&&4==$o(t))je(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==$o(t)){Do(t.b,Jo(t,"Request complete")),t.c=!1;try{var e,n=Xo(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var s=String(t.l).match(Be)[1]||null;if(!s&&a.self&&a.self.location){var l=a.self.location.protocol;s=l.substr(0,l.length-1)}r=!Uo.test(s?s.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<$o(t)?t.a.statusText:""}catch(c){Do(t.b,"Can not get status: "+c.message),u=""}t.h=u+" ["+Xo(t)+"]",Bo(t)}}finally{Qo(t)}}}function Qo(t,e){if(t.a){Yo(t);var n=t.a,i=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){(t=t.b)&&t.log(Io,"Problem encountered resetting onreadystatechange: "+r.message,void 0)}}}function Yo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(a.clearTimeout(t.u),t.u=null)}function $o(t){return t.a?t.a.readyState:0}function Xo(t){try{return 2<$o(t)?t.a.status:-1}catch(e){return-1}}function Jo(t,e){return e+" ["+t.N+" "+t.l+" "+Xo(t)+"]"}function Zo(t){var e=ca;this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.m=0}function ta(t,e,n){t.a=!0,t.c=n,t.f=!e,ra(t)}function ea(t){if(t.a){if(!t.l)throw new oa(t);t.l=!1}}function na(t,e,n,i){t.g.push([e,n,i]),t.a&&ra(t)}function ia(t){return j(t.g,function(t){return g(t[1])})}function ra(t){if(t.h&&t.a&&ia(t)){var e=t.h,n=la[e];n&&(a.clearTimeout(n.a),delete la[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],s=r[1];if(r=r[2],o=t.f?s:o)try{var l=o.call(r||t.u,e);void 0!==l&&(t.f=t.f&&(l==e||l instanceof Error),t.c=e=l),(I(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(i=!0,t.i=!0)}catch(u){e=u,t.f=!0,ia(t)||(n=!0)}}t.c=e,i&&(l=C(t.o,t,!0),i=C(t.o,t,!1),e instanceof Zo?(na(e,l,i),e.A=!0):e.then(l,i)),n&&(e=new sa(e),la[e.a]=e,t.h=e.a)}function oa(){k.call(this)}function aa(){k.call(this)}function sa(t){this.a=a.setTimeout(C(this.c,this),0),this.b=t}(t=zo.prototype).Ga=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Do(this.b,Jo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Do(this.b,Jo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qo(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Qo(this,!0)),zo.qb.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Ko(this):this.wc())},t.wc=function(){Ko(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case qo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Io,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return Do(this.b,"Can not get response: "+e.message),null}},Zo.prototype.cancel=function(t){if(this.a)this.c instanceof Zo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new aa(this),ea(this),ta(this,!1,t))}},Zo.prototype.o=function(t,e){this.i=!1,ta(this,t,e)},Zo.prototype.then=function(t,e,n){var i,r,o=new _t(function(t,e){i=t,r=e});return na(this,i,function(t){t instanceof aa?o.cancel():r(t)}),o.then(t,e,n)},Zo.prototype.$goog_Thenable=!0,T(oa,k),oa.prototype.message="Deferred has already fired",oa.prototype.name="AlreadyCalledError",T(aa,k),aa.prototype.message="Deferred was canceled",aa.prototype.name="CanceledError",sa.prototype.c=function(){throw delete la[this.a],this.b};var la={};function ua(t){var e={},n=e.document||document,i=Sn(t).toString(),r=document.createElement("SCRIPT"),o={Lb:r,Ga:void 0},s=new Zo(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){ha(r,!0);var t=new fa(pa,"Timeout reached for loading script "+i);ea(s),ta(s,!1,t)},h),o.Ga=l),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(ha(r,e.dd||!1,l),ea(s),ta(s,!0,null))},r.onerror=function(){ha(r,!0,l);var t=new fa(da,"Error while loading script "+i);ea(s),ta(s,!1,t)},ht(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),jn(r,o),function(t,e){t.src=Sn(e),null===c&&(c=(e=(e=a.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""),(e=c)&&t.setAttribute("nonce",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),s}function ca(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&ha(t,!0,this.Ga)}}function ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var da=0,pa=1;function fa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function ma(t){this.f=t}function ga(t,e,n){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||_a,this.f=st(t.secureTokenHeaders||ba),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||wa,this.a=st(t.firebaseHeaders||Ca),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==oi(),!(n=a.XMLHttpRequest||n&&li.a.INTERNAL.node&&li.a.INTERNAL.node.XMLHttpRequest)&&!ri())throw new Ki("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=ri()?new Ro(self):ai()?new ma(n):new bo}T(fa,k),T(ma,vo),ma.prototype.a=function(){return new this.f},ma.prototype.b=function(){return{}};var va,ya="idToken",_a=new Ii(3e4,6e4),ba={"Content-Type":"application/x-www-form-urlencoded"},wa=new Ii(3e4,6e4),Ca={"Content-Type":"application/json"};function Ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Sa(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function Ta(t,e,n,i,r,o,s){(function(){var t=pi();return!((t=ci(t)!=ui?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&ie&&!(9<ie))})()||ri()?t=C(t.o,t):(va||(va=new _t(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[ka]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Tn(Ia,{onload:ka});!function(t,e){na(ua(n),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=C(t.l,t)),t(e,n,i,r,o,s)}ga.prototype.o=function(t,e,n,i,r,o){if(ri()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Ki("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var l=new zo(this.c);if(o){l.g=Math.max(0,o);var u=setTimeout(function(){l.dispatchEvent("timeout")},o)}Fe(l,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Do(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Me(l,"ready",function(){u&&clearTimeout(u),Wt(this)}),Me(l,"timeout",function(){u&&clearTimeout(u),Wt(this),e&&e(null)}),function(t,e,n,i,r){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():ho.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.D?t.D:ho),t.a.onreadystatechange=C(t.Jb,t);try{Do(t.b,Jo(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(l){return Do(t.b,Jo(t,"Error opening Xhr: "+l.message)),void Ho(t,l)}e=i||"";var o=new We(t.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(m(t)||s(t))M(t,e,void 0);else for(var n=Ue(t),i=qe(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Go,n=t.length,i=s(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(o.U()),i=a.FormData&&e instanceof a.FormData,!z(Wo,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Yo(t),0<t.g&&(t.v=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Do(t.b,Jo(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=C(t.Ga,t)):t.u=je(t.Ga,t.g,t)),Do(t.b,Jo(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(l){Do(t.b,Jo(t,"Send error: "+l.message)),Ho(t,l)}}(l,t,n,i,r)};var Ia=new _n(Cn,"https://apis.google.com/js/client.js?onload=%{onload}"),ka="__fcb"+Math.floor(1e6*Math.random()).toString();function Na(t){if(!s(t=t.email)||!ti.test(t))throw new Ki("invalid-email")}function Aa(t){"email"in t&&Na(t)}function Oa(t){if(!t[ya])throw new Ki("internal-error")}function xa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Ki("internal-error")}else{if(!t.sessionInfo)throw new Ki("missing-verification-id");if(!t.code)throw new Ki("missing-verification-code")}}ga.prototype.l=function(t,e,n,i,r){var o=this;va.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},ga.prototype.ob=function(){return ps(this,rs,{})},ga.prototype.rb=function(t,e){return ps(this,ns,{idToken:t,email:e})},ga.prototype.sb=function(t,e){return ps(this,is,{idToken:t,password:e})};var Pa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Da(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Ki("internal-error")}function Ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&fn(t=new cn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function La(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=go(t)):t.errorMessage&&(e=fs(t.errorMessage)),e)throw e;if(!t[ya])throw new Ki("internal-error")}function Fa(t,e){return e.returnIdpCredential=!0,ps(t,os,e)}function Ma(t,e){return e.returnIdpCredential=!0,ps(t,ss,e)}function Va(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ps(t,as,e)}function ja(t){if(!t.oobCode)throw new Ki("invalid-action-code")}(t=ga.prototype).tb=function(t,e){var n={idToken:t},i=[];return ot(Pa,function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)}),i.length&&(n.deleteAttribute=i),ps(this,ns,n)},t.kb=function(t,e){return ht(t={requestType:"PASSWORD_RESET",email:t},e),ps(this,Xa,t)},t.lb=function(t,e){return ht(t={requestType:"EMAIL_SIGNIN",email:t},e),ps(this,Ya,t)},t.jb=function(t,e){return ht(t={requestType:"VERIFY_EMAIL",idToken:t},e),ps(this,$a,t)},t.Ua=function(t){return ps(this,cs,t)},t.Za=function(t,e){return ps(this,ts,{oobCode:t,newPassword:e})},t.Ka=function(t){return ps(this,qa,{oobCode:t})},t.Wa=function(t){return ps(this,za,{oobCode:t})};var za={endpoint:"setAccountInfo",C:ja,da:"email"},qa={endpoint:"resetPassword",C:ja,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Ki("internal-error")}},Ua={endpoint:"signupNewUser",C:function(t){if(Na(t),!t.password)throw new Ki("weak-password")},J:Oa,R:!0},Wa={endpoint:"createAuthUri"},Ga={endpoint:"deleteAccount",T:["idToken"]},Ha={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(t){if(!f(t.deleteProvider))throw new Ki("internal-error")}},Ba={endpoint:"emailLinkSignin",T:["email","oobCode"],C:Na,J:Oa,R:!0},Ka={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:Na,J:Oa,R:!0},Qa={endpoint:"getAccountInfo"},Ya={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Ki("internal-error");Na(t)},da:"email"},$a={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Ki("internal-error")},da:"email"},Xa={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Ki("internal-error");Na(t)},da:"email"},Ja={wb:!0,endpoint:"getProjectConfig",Ib:"GET"},Za={wb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Ki("internal-error")}},ts={endpoint:"resetPassword",C:ja,da:"email"},es={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},ns={endpoint:"setAccountInfo",T:["idToken"],C:Aa,R:!0},is={endpoint:"setAccountInfo",T:["idToken"],C:function(t){if(Aa(t),!t.password)throw new Ki("weak-password")},J:Oa,R:!0},rs={endpoint:"signupNewUser",J:Oa,R:!0},os={endpoint:"verifyAssertion",C:Da,Qa:Ra,J:La,R:!0},as={endpoint:"verifyAssertion",C:Da,Qa:Ra,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Ki("user-not-found");if(t.errorMessage)throw fs(t.errorMessage);if(!t[ya])throw new Ki("internal-error")},R:!0},ss={endpoint:"verifyAssertion",C:function(t){if(Da(t),!t.idToken)throw new Ki("internal-error")},Qa:Ra,J:La,R:!0},ls={endpoint:"verifyCustomToken",C:function(t){if(!t.token)throw new Ki("invalid-custom-token")},J:Oa,R:!0},us={endpoint:"verifyPassword",C:function(t){if(Na(t),!t.password)throw new Ki("wrong-password")},J:Oa,R:!0},cs={endpoint:"verifyPhoneNumber",C:xa,J:Oa},hs={endpoint:"verifyPhoneNumber",C:function(t){if(!t.idToken)throw new Ki("internal-error");xa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",go(t);Oa(t)}},ds={Wb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:xa,J:Oa};function ps(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.T))return kt(new Ki("internal-error"));var i,r=e.Ib||"POST";return It(n).then(e.C).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,i,r,o){var a=Ze(t.g+e);Xe(a,"key",t.b),o&&Xe(a,"cb",S().toString());var s="GET"==n;if(s)for(var l in i)i.hasOwnProperty(l)&&Xe(a,l,i[l]);return new _t(function(e,o){Ta(t,a.toString(),function(t){t?t.error?o(ms(t,r||{})):e(t):o(new Ki("network-request-failed"))},n,s?void 0:Un(wi(i)),t.a,t.h.get())})}(t,e.endpoint,r,n,e.Wb,e.wb||!1)}).then(function(t){return i=t,e.Qa?e.Qa(n,i):i}).then(e.J).then(function(){if(!e.da)return i;if(!(e.da in i))throw new Ki("internal-error");return i[e.da]})}function fs(t){return ms({error:{errors:[{message:t}],code:400,message:t}})}function ms(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new Ki(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",ht(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new Ki(i[r],e);return!e&&t&&(e=bi(t)),new Ki("internal-error",e)}function gs(t){this.b=t,this.a=null,this.fb=function(t){return(bs||(bs=new _t(function(t,e){function n(){Ti(),fi("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ti(),e(Error("Network Error"))},timeout:ys.get()})}if(fi("gapi.iframes.Iframe"))t();else if(fi("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[i]=function(){fi("gapi.load")?n():e(Error("Network Error"))},It(ua(i=Tn(vs,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw bs=null,t}))).then(function(){return new _t(function(e,n){fi("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:fi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},_s.get());i.ping(r).then(r,function(){n(Error("Network Error"))})})})})}(this)}var vs=new _n(Cn,"https://apis.google.com/js/api.js?onload=%{onload}"),ys=new Ii(3e4,6e4),_s=new Ii(5e3,15e3),bs=null;function ws(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=tn(this.i,"/__/auth/iframe"),Xe(this.a,"apiKey",this.g),Xe(this.a,"appName",this.h),this.b=null,this.c=[]}function Cs(t,e,n,i,r){this.o=t,this.l=e,this.c=n,this.m=i,this.h=this.g=this.i=null,this.a=r,this.f=null}function Es(t){try{return li.a.app(t).auth().ya()}catch(e){return[]}}function Ss(t,e,n,i,r){this.l=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function Ts(t){var e=Qn();return function(t){return ps(t,Ja,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ze(e),i=n.f;n=n.b;for(var r=0;r<t.length;r++){var o=t[r],a=n,s=i;if(0==o.indexOf("chrome-extension://")?a=Ze(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Zn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new fo(Qn())})}function Is(t){return t.m?t.m:(t.m=ei().then(function(){if(!t.u){var e=t.c,n=t.h,i=Es(t.b),r=new ws(t.l,t.f,t.b);r.f=e,r.b=n,r.c=G(i||[]),t.u=r.toString()}t.i=new gs(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,fi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=uo(e.authEvent),n=0;n<t.g.length;n++)i=t.g[n](e)||i;return(n={}).status=i?"ACK":"ERROR",It(n)}return n.status="ERROR",It(n)})}(t)}),t.m)}function ks(t){return t.o||(t.v=t.c?di(t.c,Es(t.b)):null,t.o=new ga(t.f,mr(t.h),t.v)),t.o}function Ns(t,e,n,i,r,o,a,s,l,u){return(t=new Cs(t,e,n,i,r)).i=o,t.g=a,t.h=s,t.b=st(l||null),t.f=u,t.toString()}function As(t){if(this.a=t||li.a.INTERNAL.reactNative&&li.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Ki("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Os(t){this.b=t,this.a={},this.c=C(this.f,this)}ws.prototype.toString=function(){return this.f?Xe(this.a,"v",this.f):pn(this.a.a,"v"),this.b?Xe(this.a,"eid",this.b):pn(this.a.a,"eid"),this.c.length?Xe(this.a,"fw",this.c.join(",")):pn(this.a.a,"fw"),this.a.toString()},Cs.prototype.toString=function(){var t=tn(this.o,"/__/auth/handler");if(Xe(t,"apiKey",this.l),Xe(t,"appName",this.c),Xe(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=li.a.app(this.c).auth().ea()}catch(s){n=null}for(var i in e.$a=n,Xe(t,"providerId",this.a.providerId),n=wi((e=this.a).zb))n[i]=n[i].toString();i=e.Dc,n=st(n);for(var r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),at(n)||Xe(t,"customParameters",bi(n))}if("function"==typeof this.a.Fb&&(e=this.a.Fb()).length&&Xe(t,"scopes",e.join(",")),this.i?Xe(t,"redirectUrl",this.i):pn(t.a,"redirectUrl"),this.g?Xe(t,"eventId",this.g):pn(t.a,"eventId"),this.h?Xe(t,"v",this.h):pn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Je(t,a)&&Xe(t,a,this.b[a]);return this.f?Xe(t,"eid",this.f):pn(t.a,"eid"),(a=Es(this.c)).length&&Xe(t,"fw",a.join(",")),t.toString()},(t=Ss.prototype).Ea=function(t,e,n){var i=new Ki("popup-closed-by-user"),r=new Ki("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return Is(t).then(function(){return function(t,e){return t.fb.then(function(){return new _t(function(n){t.a.send(e.type,e,n,fi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Xn(t),e(r),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new _t(function(e){return function n(){ze(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return ze(n).then(function(){e(i)})})},t.Mb=function(){var t=pi();return!_i(t)&&!Si(t)},t.Hb=function(){return!1},t.Db=function(t,e,n,i,r,o,a){if(!t)return kt(new Ki("popup-blocked"));if(a&&!_i())return this.ga().s(function(e){Xn(t),r(e)}),i(),It();this.a||(this.a=Ts(ks(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw Xn(t),r(e),e});return i(),e}).then(function(){so(n),a||Yn(Ns(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=Ts(ks(this)));var i=this;return this.a.then(function(){so(e),Yn(Ns(i.l,i.f,i.b,t,e,Qn(),n,i.c,void 0,i.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ga=function(){var t=this;return Is(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Ki("network-request-failed")})},t.Pb=function(){return!0},t.wa=function(t){this.g.push(t)},t.La=function(t){U(this.g,function(e){return e==t})},(t=As.prototype).get=function(t){return It(this.a.getItem(t)).then(function(t){return t&&Ci(t)})},t.set=function(t,e){return It(this.a.setItem(t,bi(e)))},t.P=function(t){return It(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var xs,Ps=[];function Ds(t){this.a=t}function Rs(t){this.c=t,this.b=!1,this.a=[]}function Ls(t,e,n,i){var r,o,a,s,l=n||{},u=null;if(t.b)return kt(Error("connection_unavailable"));var c=i?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _t(function(n,i){h?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){i(Error("unsupported_event"))},c),t.a.push(u={messageChannel:h,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){i(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):i(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),i(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:r,data:l},[h.port2])):i(Error("connection_unavailable"))}).then(function(e){return Fs(t,u),e}).s(function(e){throw Fs(t,u),e})}function Fs(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),U(t.a,function(t){return t==e})}}function Ms(){if(!js())throw new Ki("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var t=this;ri()&&self?(this.m=function(){var t=ri()?self:null;if(M(Ps,function(n){n.b==t&&(e=n)}),!e){var e=new Os(t);Ps.push(e)}return e}(),this.m.subscribe("keyChanged",function(e,n){return Gs(t).then(function(e){return 0<e.length&&M(t.a,function(t){t(e)}),{keyProcessed:z(e,n.key)}})}),this.m.subscribe("ping",function(){return It(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?It().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):It(null)}().then(function(e){(t.h=e)&&(t.g=new Rs(new Ds(e)),Ls(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&z(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function Vs(t){return t.o||(t.o=function t(e){return new _t(function(n,i){var r=e.l.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}i(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){i(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(r):function(t){return new _t(function(e,n){var i=t.l.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){i(t)})}})}(t)),t.o}function js(){try{return!!a.indexedDB}catch(Bt){return!1}}function zs(t){return t.objectStore("firebaseLocalStorage")}function qs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Us(t){return new _t(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ws(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ls(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):It()}function Gs(t){return Vs(t).then(function(t){var e=zs(qs(t,!1));return e.getAll?Us(e.getAll()):new _t(function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(t.c,n),t.c=n}return i})}function Hs(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bs(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=It().then(function(){if(js()){var t=Ei(),i="__sak"+t;return xs||(xs=new Ms),(n=xs).set(i,t).then(function(){return n.get(i)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(i)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){M(e.a,function(e){e(t)})}),t})}function Ks(){this.a={},this.type="inMemory"}function Qs(){if(!function(){var t="Node"==oi();if(!(t=Ys()||t&&li.a.INTERNAL.node&&li.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==oi())throw new Ki("internal-error","The LocalStorage compatibility library was not found.");throw new Ki("web-storage-unsupported")}this.a=Ys()||li.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ys(){try{var t=a.localStorage,e=Ei();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $s(){this.type="nullStorage"}function Xs(){if(!function(){var t="Node"==oi();if(!(t=Js()||t&&li.a.INTERNAL.node&&li.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==oi())throw new Ki("internal-error","The SessionStorage compatibility library was not found.");throw new Ki("web-storage-unsupported")}this.a=Js()||li.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Js(){try{var t=a.sessionStorage,e=Ei();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Zs(){var t={};t.Browser=nl,t.Node=il,t.ReactNative=rl,t.Worker=ol,this.a=t[oi()]}Os.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,i=this.a[e];if(i&&0<i.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var r=[];M(i,function(e){r.push(It().then(function(){return e(t.origin,t.data.data)}))}),At(r).then(function(i){var r=[];M(i,function(t){r.push({fulfilled:t.Eb,value:t.value,reason:t.reason?t.reason.message:void 0})}),M(r,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:r})})}},Os.prototype.subscribe=function(t,e){at(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},Os.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(U(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],at(this.a)&&this.b.removeEventListener("message",this.c)},Ds.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Rs.prototype.close=function(){for(;0<this.a.length;)Fs(this,this.a[0]);this.b=!0},(t=Ms.prototype).set=function(t,e){var n,i=!1,r=this;return Vs(this).then(function(e){return Us((e=zs(qs(n=e,!0))).get(t))}).then(function(o){var a=zs(qs(n,!0));return o?(o.value=e,Us(a.put(o))):(r.b++,i=!0,(o={}).fbase_key=t,o.value=e,Us(a.add(o)))}).then(function(){return r.c[t]=e,Ws(r,t)}).ia(function(){i&&r.b--})},t.get=function(t){return Vs(this).then(function(e){return Us(zs(qs(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return Vs(this).then(function(i){return e=!0,n.b++,Us(zs(qs(i,!0)).delete(t))}).then(function(){return delete n.c[t],Ws(n,t)}).ia(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){Hs(t),function e(){t.f=setTimeout(function(){t.i=Gs(t).then(function(e){0<e.length&&M(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){U(this.a,function(e){return e==t}),0==this.a.length&&Hs(this)},(t=Bs.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){U(this.a,function(e){return e==t})},(t=Ks.prototype).get=function(t){return It(this.a[t])},t.set=function(t,e){return this.a[t]=e,It()},t.P=function(t){return delete this.a[t],It()},t.Y=function(){},t.ca=function(){},(t=Qs.prototype).get=function(t){var e=this;return It().then(function(){return Ci(e.a.getItem(t))})},t.set=function(t,e){var n=this;return It().then(function(){var i=bi(e);null===i?n.P(t):n.a.setItem(t,i)})},t.P=function(t){var e=this;return It().then(function(){e.a.removeItem(t)})},t.Y=function(t){a.window&&Ee(a.window,"storage",t)},t.ca=function(t){a.window&&Ie(a.window,"storage",t)},(t=$s.prototype).get=function(){return It(null)},t.set=function(){return It()},t.P=function(){return It()},t.Y=function(){},t.ca=function(){},(t=Xs.prototype).get=function(t){var e=this;return It().then(function(){return Ci(e.a.getItem(t))})},t.set=function(t,e){var n=this;return It().then(function(){var i=bi(e);null===i?n.P(t):n.a.setItem(t,i)})},t.P=function(t){var e=this;return It().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var tl,el,nl={B:Qs,Ra:Xs},il={B:Qs,Ra:Xs},rl={B:As,Ra:$s},ol={B:Qs,Ra:$s},al={Xc:"local",NONE:"none",Zc:"session"};function sl(){var t=!(Si(pi())||!ii()),e=_i(),n=mi();this.o=t,this.h=e,this.m=n,this.a={},tl||(tl=new Zs),t=tl;try{this.g=!Kn()&&Ai()||!a.indexedDB?new t.a.B:new Bs(ri()?new Ks:new t.a.B)}catch(i){this.g=new Ks,this.h=!0}try{this.i=new t.a.Ra}catch(i){this.i=new Ks}this.l=new Ks,this.f=C(this.Ob,this),this.b={}}function ll(){return el||(el=new sl),el}function ul(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function cl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hl(t,e,n){return n=cl(e,n),"local"==e.B&&(t.b[n]=null),ul(t,e.B).P(n)}function dl(t){t.c&&(clearInterval(t.c),t.c=null)}function pl(t){this.a=t,this.b=ll()}(t=sl.prototype).get=function(t,e){return ul(this,t.B).get(cl(t,e))},t.set=function(t,e,n){var i=cl(t,n),r=this,o=ul(this,t.B);return o.set(i,e).then(function(){return o.get(i)}).then(function(e){"local"==t.B&&(r.b[i]=e)})},t.addListener=function(t,e,n){t=cl(t,e),this.m&&(this.b[t]=a.localStorage.getItem(t)),at(this.a)&&(ul(this,"local").Y(this.f),this.h||(Kn()||!Ai())&&a.indexedDB||!this.m||function(t){dl(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new de({type:"storage",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Ob(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cl(t,e),this.a[t]&&(U(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),at(this.a)&&(ul(this,"local").ca(this.f),dl(this))},t.Ob=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=a.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.Xa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ul(this,"local").ca(this.f):dl(this),this.o)if(n=a.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?a.localStorage.setItem(e,i):a.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.Xa(e))},Qt&&ie&&10==ie&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else M(t,C(this.Xa,this))},t.Xa=function(t){this.a[t]&&M(this.a[t],function(t){t()})};var fl,ml={name:"authEvent",B:"local"};function gl(){this.a=ll()}function vl(t,e){this.b=yl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=a.Int32Array?new Int32Array(64):Array(64),void 0!==fl||(fl=a.Int32Array?new Int32Array(Tl):Tl),this.reset()}T(vl,function(){this.b=-1});for(var yl=64,_l=yl-1,bl=[],wl=0;wl<_l;wl++)bl[wl]=0;var Cl=W(128,bl);function El(t){for(var e=t.f,n=t.m,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){var o=(0|n[e-16])+(((r=0|n[e-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+(((i=0|n[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],l=0|t.a[3],u=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((a=(a=u&c^~u&h)+(0|fl[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=u,u=l+a|0,l=s,s=r,r=i,i=a+d|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+l|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Sl(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if(s(e))for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(El(t),r=0);else{if(!m(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(El(t),r=0)}}t.c=r,t.g+=n}vl.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):G(this.h)};var Tl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Il(){vl.call(this,8,kl)}T(Il,vl);var kl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nl(t,e,n,i,r){this.l=t,this.i=e,this.m=n,this.o=i||null,this.u=r||null,this.h=e+":"+n,this.v=new gl,this.g=new pl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Al(t){return new Ki("invalid-cordova-configuration",t)}function Ol(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(i){}}function xl(t){return t.f||(t.f=t.ga().then(function(){return new _t(function(e){t.wa(function n(i){return e(i),t.La(n),!1}),function(t){function e(e){i=!0,r&&r.cancel(),Pl(t).then(function(i){var r=n;if(i&&e&&e.url){var o=null;-1!=(r=Or(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ci(Je(o=Ze(r),"firebaseError")||null))?Qi(o):null)?new lo(i.c,i.b,null,null,o):new lo(i.c,i.b,r,i.f)),r=o||n}Ol(t,r)})}var n=new lo("unknown",null,null,null,new Ki("no-auth-event")),i=!1,r=ze(500).then(function(){return Pl(t).then(function(){i||Ol(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(fi("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},po||(po=new co),po.subscribe(e)}(t)})})),t.f}function Pl(t){var e=null;return function(t){return t.b.get(ml,t.a).then(function(t){return uo(t)})}(t.g).then(function(n){return e=n,hl((n=t.g).b,ml,n.a)}).then(function(){return e})}function Dl(t){this.a=t,this.b=ll()}(t=Nl.prototype).ga=function(){return this.za?this.za:this.za=(ni(void 0)?ei().then(function(){return new _t(function(t,e){var n=a.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):kt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof fi("universalLinks.subscribe",a))throw Al("cordova-universal-links-plugin-fix is not installed");if(void 0===fi("BuildInfo.packageName",a))throw Al("cordova-plugin-buildinfo is not installed");if("function"!=typeof fi("cordova.plugins.browsertab.openUrl",a))throw Al("cordova-plugin-browsertab is not installed");if("function"!=typeof fi("cordova.InAppBrowser.open",a))throw Al("cordova-plugin-inappbrowser is not installed")},function(){throw new Ki("cordova-not-ready")})},t.Ea=function(t,e){return e(new Ki("operation-not-supported-in-this-environment")),It()},t.Db=function(){return kt(new Ki("operation-not-supported-in-this-environment"))},t.Pb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,n){if(this.c)return kt(new Ki("redirect-operation-pending"));var i=this,r=a.document,o=null,s=null,l=null,u=null;return this.c=It().then(function(){return so(e),xl(i)}).then(function(){return function(t,e,n,i){var r=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new lo(e,i,null,r,new Ki("no-auth-event")),s=fi("BuildInfo.packageName",a);if("string"!=typeof s)throw new Ki("invalid-cordova-configuration");var l=fi("BuildInfo.displayName",a),u={};if(pi().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=s;else{if(!pi().toLowerCase().match(/android/))return kt(new Ki("operation-not-supported-in-this-environment"));u.apn=s}l&&(u.appDisplayName=l),r=function(t){var e=new Il;Sl(e,t),t=[];var n=8*e.g;Sl(e,Cl,56>e.c?56-e.c:e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(El(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(r),u.sessionId=r;var c=Ns(t.l,t.i,t.m,e,n,null,i,t.o,u,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(ml,o.w(),e)}).then(function(){var e=fi("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new Ki("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=fi("cordova.plugins.browsertab.openUrl",a)))throw new Ki("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=fi("cordova.InAppBrowser.open",a)))throw new Ki("invalid-cordova-configuration");e=pi(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n)}).then(function(){return new _t(function(t,e){s=function(){var e=fi("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),u=function(){ki()&&l()},r.addEventListener("resume",l=function(){o||(o=ze(2e3).then(function(){e(new Ki("redirect-cancelled-by-user"))}))},!1),pi().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",u,!1)}).s(function(t){return Pl(i).then(function(){throw t})})}).ia(function(){l&&r.removeEventListener("resume",l,!1),u&&r.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),s&&i.La(s),i.c=null})},t.wa=function(t){this.b.push(t),xl(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new lo("unknown",null,null,null,new Ki("no-auth-event")),t(e))})},t.La=function(t){U(this.b,function(e){return e==t})};var Rl={name:"pendingRedirect",B:"session"};function Ll(t){return hl(t.b,Rl,t.a)}function Fl(t,e,n){this.i={},this.u=0,this.A=t,this.l=e,this.o=n,this.h=[],this.f=!1,this.m=C(this.bb,this),this.b=new Bl,this.v=new $l,this.g=new Dl(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=Ml(this.A,this.l,this.o,pr)}function Ml(t,e,n,i){var r=li.a.SDK_VERSION||null;return ni()?new Nl(t,e,n,r,i):new Ss(t,e,n,r,i)}function Vl(t){t.f||(t.f=!0,t.a.wa(t.m));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function jl(t){t.a.Mb()&&Vl(t).s(function(e){var n=new lo("unknown",null,null,null,new Ki("operation-not-supported-in-this-environment"));Wl(e)&&t.bb(n)}),t.a.Hb()||Kl(t.b)}(t=Fl.prototype).reset=function(){this.f=!1,this.a.La(this.m),this.a=Ml(this.A,this.l,this.o),this.i={}},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(z(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Rl,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?Ll(e.g).then(function(){Vl(e).s(function(t){var n=new lo("unknown",null,null,null,new Ki("operation-not-supported-in-this-environment"));Wl(t)&&e.bb(n)})}):jl(e)}).s(function(){jl(e)})}},t.unsubscribe=function(t){U(this.h,function(e){return e==t})},t.bb=function(t){if(!t)throw new Ki("invalid-auth-event");if(6e5<=S()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=S())),e=!0;break}}return Kl(this.b),e};var zl=new Ii(2e3,1e4),ql=new Ii(3e4,6e4);function Ul(t,e,n,i,r,o){return t.a.Db(e,n,i,function(){t.f||(t.f=!0,t.a.wa(t.m))},function(){t.reset()},r,o)}function Wl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Fl.prototype.fa=function(){return this.b.fa()},Fl.prototype.Ca=function(t,e,n){var i,r=this;return function(t){return t.b.set(Rl,"pending",t.a)}(this.g).then(function(){return r.a.Ca(t,e,n).s(function(t){if(Wl(t))throw new Ki("operation-not-supported-in-this-environment");return i=t,Ll(r.g).then(function(){throw i})}).then(function(){return r.a.Pb()?new _t(function(){}):Ll(r.g).then(function(){return r.fa()}).then(function(){}).s(function(){})})})},Fl.prototype.Ea=function(t,e,n,i){return this.a.Ea(n,function(n){t.ha(e,null,n,i)},zl.get())};var Gl={};function Hl(t,e,n){var i=e+":"+n;return Gl[i]||(Gl[i]=new Fl(t,e,n)),Gl[i]}function Bl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Kl(t){t.g||(t.g=!0,Yl(t,!1,null,null))}function Ql(t,e){if(t.b=function(){return It(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yl(t,e,n,i){e?i?function(t,e){if(t.b=function(){return kt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Ql(t,n):Ql(t,{user:null}),t.f=[],t.c=[]}function $l(){}function Xl(){this.ub=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ub},set:function(t){this.ub=t},enumerable:!1})}function Jl(t,e){this.a=e,Ri(this,"verificationId",t)}function Zl(t,e,n,i){return new ro(t).Ua(e,n).then(function(t){return new Jl(t,i)})}function tu(t){var e=dr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Ki("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Li(this,{token:t,expirationTime:Ni(1e3*e.exp),authTime:Ni(1e3*e.auth_time),issuedAtTime:Ni(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function eu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function nu(t){this.f=t,this.b=this.a=null,this.c=0}function iu(t,e){var n=e[ya],i=e.refreshToken;e=ru(e.expiresIn),t.b=n,t.c=e,t.a=i}function ru(t){return S()+1e3*parseInt(t,10)}function ou(t,e){this.a=t||null,this.b=e||null,Li(this,{lastSignInTime:Ni(e||null),creationTime:Ni(t||null)})}function au(t,e,n,i,r,o){Li(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function su(t,e){for(var n in he.call(this,t),e)this[n]=e[n]}function lu(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=li.a.SDK_VERSION?di(li.a.SDK_VERSION):null,this.c=new ga(this.l,mr(pr),t),this.h=new nu(this.c),mu(this,e[ya]),iu(this.h,e),Ri(this,"refreshToken",this.h.a),yu(this,n||{}),Le.call(this),this.I=!1,this.u&&gi()&&(this.a=Hl(this.u,this.l,this.o)),this.N=[],this.i=null,this.A=function(t){return new eu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-S()-3e5;return 0<e?e:0})}(this),this.V=C(this.Ha,this);var i=this;this.ka=null,this.ta=function(t){i.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){cu(i,t.c)},this.W=null}function uu(t,e){t.X&&Ie(t.X,"languageCodeChanged",t.ta),(t.X=e)&&Ee(e,"languageCodeChanged",t.ta)}function cu(t,e){t.O=e,Sa(t.c,li.a.SDK_VERSION?di(li.a.SDK_VERSION,t.O):null)}function hu(t,e){t.W&&Ie(t.W,"frameworkChanged",t.sa),(t.W=e)&&Ee(e,"frameworkChanged",t.sa)}function du(t){try{return li.a.app(t.o).auth()}catch(e){throw new Ki("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function pu(t){t.D||t.A.b||(t.A.start(),Ie(t,"tokenChanged",t.V),Ee(t,"tokenChanged",t.V))}function fu(t){Ie(t,"tokenChanged",t.V),t.A.stop()}function mu(t,e){t.ra=e,Ri(t,"_lat",e)}function gu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return At(e).then(function(){return t})}function vu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function yu(t,e){Li(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new ou(e.createdAt,e.lastLoginAt),providerData:[]})}function _u(){}function bu(t){return It().then(function(){if(t.D)throw new Ki("app-deleted")})}function wu(t){return V(t.providerData,function(t){return t.providerId})}function Cu(t,e){e&&(Eu(t,e.providerId),t.providerData.push(e))}function Eu(t,e){U(t.providerData,function(t){return t.providerId==e})}function Su(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ri(t,e,n)}function Tu(t,e){t!=e&&(Li(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Ri(t,"metadata",e.metadata?function(t){return new ou(t.a,t.b)}(e.metadata):new ou),M(e.providerData,function(e){Cu(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Ri(t,"refreshToken",t.h.a))}function Iu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return ps(t.c,Qa,{idToken:e}).then(C(t.xc,t))}(t,e).then(function(){return n||Su(t,"isAnonymous",!1),e})})}function ku(t,e){e[ya]&&t.ra!=e[ya]&&(iu(t.h,e),t.dispatchEvent(new su("tokenChanged")),mu(t,e[ya]),Su(t,"refreshToken",t.h.a))}function Nu(t,e){return Iu(t).then(function(){if(z(wu(t),e))return gu(t).then(function(){throw new Ki("provider-already-linked")})})}function Au(t,e,n){return Fi({user:t,credential:ao(e),additionalUserInfo:e=br(e),operationType:n})}function Ou(t,e){return ku(t,e),t.reload().then(function(){return t})}function xu(t,e,n,i,r){if(!gi())return kt(new Ki("operation-not-supported-in-this-environment"));if(t.i&&!r)return kt(t.i);var o=_r(n.providerId),a=Ei(t.uid+":::"),s=null;(!_i()||ii())&&t.u&&n.isOAuthProvider&&(s=Ns(t.u,t.l,t.o,e,n,null,a,li.a.SDK_VERSION||null));var l=Jn(s,o&&o.Ba,o&&o.Aa);return i=i().then(function(){if(Du(t),!r)return t.F().then(function(){})}).then(function(){return Ul(t.a,l,e,n,a,!!s)}).then(function(){return new _t(function(n,i){t.ha(e,null,new Ki("cancelled-popup-request"),t.g||null),t.f=n,t.v=i,t.g=a,t.b=t.a.Ea(t,e,l,a)})}).then(function(t){return l&&Xn(l),t?Fi(t):null}).s(function(t){throw l&&Xn(l),t}),Ru(t,i,r)}function Pu(t,e,n,i,r){if(!gi())return kt(new Ki("operation-not-supported-in-this-environment"));if(t.i&&!r)return kt(t.i);var o=null,a=Ei(t.uid+":::");return i=i().then(function(){if(Du(t),!r)return t.F().then(function(){})}).then(function(){return t.aa=a,gu(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Mu,t.w(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Vu(t.ba);throw o}).then(function(){if(o)throw o}),Ru(t,i,r)}function Du(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Ki("internal-error");throw new Ki("auth-domain-config-required")}}function Ru(t,e,n){var i=function(t,e,n){return t.i&&!n?(e.cancel(),kt(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new su("userInvalidated")),t.i=e),e})}(t,e,n);return t.G.push(i),i.ia(function(){q(t.G,i)}),i}function Lu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ya]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-S())/1e3;var i=new lu(e,n,t);return t.providerData&&M(t.providerData,function(t){t&&Cu(i,Fi(t))}),t.redirectEventId&&(i.aa=t.redirectEventId),i}function Fu(t){this.a=t,this.b=ll()}Bl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bl.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(Yl(this,!0,null,t.a),It()):e.xa(n,i)?function(t,e,n){n=n.xa(e.c,e.b);var i=e.g,r=e.f,o=e.h,a=!!e.c.match(/Redirect$/);n(i,r,o).then(function(e){Yl(t,a,e,null)}).s(function(e){Yl(t,a,null,e)})}(this,t,e):kt(new Ki("invalid-auth-event")):(Yl(this,!1,null,null),It())}else kt(new Ki("invalid-auth-event"))},Bl.prototype.Ya=function(){this.g&&!this.i&&Yl(this,!1,null,null)},Bl.prototype.fa=function(){var t=this;return new _t(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Ki("timeout");t.a&&t.a.cancel(),t.a=ze(ql.get()).then(function(){t.b||(t.g=!0,Yl(t,!0,null,e))})}(t))})},$l.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.ha(t.c,null,t.a,t.b),It()):e.xa(n,i)?function(t,e){var n=t.b,i=t.c;e.xa(i,n)(t.g,t.f,t.h).then(function(t){e.ha(i,t,null,n)}).s(function(t){e.ha(i,null,t,n)})}(t,e):kt(new Ki("invalid-auth-event"))}else kt(new Ki("invalid-auth-event"))},Jl.prototype.confirm=function(t){return t=oo(this.verificationId,t),this.a(t)},eu.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=ze(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=a.document,e=null,ki()||!t?It():new _t(function(n){e=function(){ki()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},eu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nu.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},nu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?kt(new Ki("user-token-expired")):t||!this.b||S()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _t(function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ta(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?i(ms(t)):t.access_token&&t.refresh_token?n(t):i(new Ki("internal-error")):i(new Ki("network-request-failed"))},"POST",dn(e).toString(),t.f,t.m.get()):i(new Ki("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=ru(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):It(null):It({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},ou.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(su,he),T(lu,Le),lu.prototype.pa=function(t){this.ka=t,Ea(this.c,t)},lu.prototype.ea=function(){return this.ka},lu.prototype.ya=function(){return G(this.O)},lu.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},Ri(lu.prototype,"providerId","firebase"),(t=lu.prototype).reload=function(){var t=this;return Ru(this,bu(this).then(function(){return Iu(t).then(function(){return gu(t)}).then(_u)}))},t.bc=function(t){return this.F(t).then(function(t){return new tu(t)})},t.F=function(t){var e=this;return Ru(this,bu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Ki("internal-error");return t.accessToken!=e.ra&&(mu(e,t.accessToken),e.dispatchEvent(new su("tokenChanged"))),Su(e,"refreshToken",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Ki("internal-error");yu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?V(t,function(t){return new au(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Cu(this,e[n]);Su(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.yc=function(t){return Pi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(t)},t.gb=function(t){var e=this,n=null;return Ru(this,t.f(this.c,this.uid).then(function(t){return ku(e,t),n=Au(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.pc=function(t){return Pi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(t)},t.eb=function(t){var e=this,n=null;return Ru(this,Nu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.c,n)}).then(function(t){return n=Au(e,t,"link"),Ou(e,t)}).then(function(){return n}))},t.qc=function(t,e){var n=this;return Ru(this,Nu(this,"phone").then(function(){return Zl(du(n),t,e,C(n.eb,n))}))},t.zc=function(t,e){var n=this;return Ru(this,It().then(function(){return Zl(du(n),t,e,C(n.gb,n))}),!0)},t.rb=function(t){var e=this;return Ru(this,this.F().then(function(n){return e.c.rb(n,t)}).then(function(t){return ku(e,t),e.reload()}))},t.Pc=function(t){var e=this;return Ru(this,this.F().then(function(n){return t.b(e.c,n)}).then(function(t){return ku(e,t),e.reload()}))},t.sb=function(t){var e=this;return Ru(this,this.F().then(function(n){return e.c.sb(n,t)}).then(function(t){return ku(e,t),e.reload()}))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return bu(this);var e=this;return Ru(this,this.F().then(function(n){return e.c.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return ku(e,t),Su(e,"displayName",t.displayName||null),Su(e,"photoURL",t.photoUrl||null),M(e.providerData,function(t){"password"===t.providerId&&(Ri(t,"displayName",e.displayName),Ri(t,"photoURL",e.photoURL))}),gu(e)}).then(_u))},t.Nc=function(t){var e=this;return Ru(this,Iu(this).then(function(n){return z(wu(e),t)?function(t,e,n){return ps(t,Ha,{idToken:e,deleteProvider:n})}(e.c,n,[t]).then(function(t){var n={};return M(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),M(wu(e),function(t){n[t]||Eu(e,t)}),n[ro.PROVIDER_ID]||Ri(e,"phoneNumber",null),gu(e)}):gu(e).then(function(){throw new Ki("no-such-provider")})}))},t.delete=function(){var t=this;return Ru(this,this.F().then(function(e){return ps(t.c,Ga,{idToken:e})}).then(function(){t.dispatchEvent(new su("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");uu(t,null),hu(t,null),t.G=[],t.D=!0,fu(t),Ri(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?C(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?C(this.Cb,this):"linkViaRedirect"==t&&(this.aa||null)==e?C(this.Bb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?C(this.Cb,this):null},t.rc=function(t){var e=this;return xu(this,"linkViaPopup",t,function(){return Nu(e,t.providerId).then(function(){return gu(e)})},!1)},t.Ac=function(t){return xu(this,"reauthViaPopup",t,function(){return It()},!0)},t.sc=function(t){var e=this;return Pu(this,"linkViaRedirect",t,function(){return Nu(e,t.providerId)},!1)},t.Bc=function(t){return Pu(this,"reauthViaRedirect",t,function(){return It()},!0)},t.Bb=function(t,e,n){var i=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Ru(this,this.F().then(function(r){return Ma(i.c,{requestUri:t,postBody:n,sessionId:e,idToken:r})}).then(function(t){return r=Au(i,t,"link"),Ou(i,t)}).then(function(){return r}))},t.Cb=function(t,e,n){var i=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Ru(this,It().then(function(){return Pr(Va(i.c,{requestUri:t,sessionId:e,postBody:n}),i.uid)}).then(function(t){return r=Au(i,t,"reauthenticate"),ku(i,t),i.i=null,i.reload()}).then(function(){return r}),!0)},t.jb=function(t){var e=this,n=null;return Ru(this,this.F().then(function(e){return n=e,void 0===t||at(t)?{}:sr(new Xi(t))}).then(function(t){return e.c.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&ht(t,this.metadata.w()),M(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Mu={name:"redirectUser",B:"session"};function Vu(t){return hl(t.b,Mu,t.a)}function ju(t){this.a=t,this.b=ll(),this.c=null,this.f=function(t){var e=Uu("local"),n=Uu("session"),i=Uu("none");return function(t,e,n){var i=cl(e,n),r=ul(t,e.B);return t.get(e,n).then(function(o){var s=null;try{s=Ci(a.localStorage.getItem(i))}catch(l){}if(s&&!o)return a.localStorage.removeItem(i),t.set(e,s,n);s&&o&&"localStorage"!=r.type&&a.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(r){return r?n:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(qu,t.a).then(function(t){return t?Uu(t):e})})})}).then(function(e){return t.c=e,zu(t,e.B)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Uu("local"),this.a,C(this.g,this))}function zu(t,e){var n,i=[];for(n in al)al[n]!==e&&i.push(hl(t.b,Uu(al[n]),t.a));return i.push(hl(t.b,qu,t.a)),function(t){return new _t(function(e,n){var i=t.length,r=[];if(i)for(var o=function(t,n){i--,r[t]=n,0==i&&e(r)},a=function(t){n(t)},s=0;s<t.length;s++)Nt(t[s],E(o,s),a);else e(r)})}(i)}ju.prototype.g=function(){var t=this,e=Uu("local");Bu(this,function(){return It().then(function(){return t.c&&"local"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return zu(t,"local").then(function(){t.c=e})})})};var qu={name:"persistence",B:"session"};function Uu(t){return{name:"authUser",B:t}}function Wu(t,e){return Bu(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Gu(t){return Bu(t,function(){return hl(t.b,t.c,t.a)})}function Hu(t,e){return Bu(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lu(t||{})})})}function Bu(t,e){return t.f=t.f.then(e,e),t.f}function Ku(t){if(this.l=!1,Ri(this,"settings",new Xl),Ri(this,"app",t),!tc(this).options||!tc(this).options.apiKey)throw new Ki("invalid-api-key");t=li.a.SDK_VERSION?di(li.a.SDK_VERSION):null,this.c=new ga(tc(this).options&&tc(this).options.apiKey,mr(pr),t),this.N=[],this.o=[],this.I=[],this.Sb=li.a.INTERNAL.createSubscribe(C(this.mc,this)),this.O=void 0,this.Tb=li.a.INTERNAL.createSubscribe(C(this.nc,this)),Ju(this,null),this.h=new ju(tc(this).options.apiKey+":"+tc(this).name),this.A=new Fu(tc(this).options.apiKey+":"+tc(this).name),this.V=rc(this,function(t){var e=tc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Mu,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lu(t||{})})}(t.A,tc(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.A),Vu(t.A)});return rc(t,e)}(t).then(function(){return Hu(t.h,e)}).then(function(e){return e?(e.ba=t.A,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Wu(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Gu(t.h)})):null}).then(function(e){Ju(t,e||null)});return rc(t,n)}(this)),this.i=rc(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Uu("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=C(this.Kc,this),this.Ha=C(this.Z,this),this.ra=C(this.$b,this),this.sa=C(this.jc,this),this.ta=C(this.kc,this),function(t){var e=tc(t).options.authDomain,n=tc(t).options.apiKey;e&&gi()&&(t.Rb=t.V.then(function(){if(!t.l){if(t.a=Hl(e,n,tc(t).name),t.a.subscribe(t),ec(t)&&vu(ec(t)),t.D){vu(t.D);var i=t.D;i.pa(t.ea()),uu(i,t),cu(i=t.D,t.G),hu(i,t),t.D=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=C(this.delete,this),this.INTERNAL.logFramework=C(this.tc,this),this.u=0,Le.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function Qu(t){he.call(this,"languageCodeChanged"),this.g=t}function Yu(t){he.call(this,"frameworkChanged"),this.c=t}function $u(t){return t.Rb||kt(new Ki("auth-domain-config-required"))}function Xu(t,e){var n={};return n.apiKey=tc(t).options.apiKey,n.authDomain=tc(t).options.authDomain,n.appName=tc(t).name,t.V.then(function(){return function(t,e,n,i){var r=new lu(t,e);return n&&(r.ba=n),i&&cu(r,i),r.reload().then(function(){return r})}(n,e,t.A,t.ya())}).then(function(e){return ec(t)&&e.uid==ec(t).uid?(Tu(ec(t),e),t.Z(e)):(Ju(t,e),vu(e),t.Z(e))}).then(function(){ic(t)})}function Ju(t,e){ec(t)&&(function(t,e){U(t.N,function(t){return t==e})}(ec(t),t.Ha),Ie(ec(t),"tokenChanged",t.ra),Ie(ec(t),"userDeleted",t.sa),Ie(ec(t),"userInvalidated",t.ta),fu(ec(t))),e&&(e.N.push(t.Ha),Ee(e,"tokenChanged",t.ra),Ee(e,"userDeleted",t.sa),Ee(e,"userInvalidated",t.ta),0<t.u&&pu(e)),Ri(t,"currentUser",e),e&&(e.pa(t.ea()),uu(e,t),cu(e,t.G),hu(e,t))}function Zu(t,e){var n=null,i=null;return rc(t,e.then(function(e){return n=ao(e),i=br(e),Xu(t,e)}).then(function(){return Fi({user:ec(t),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function tc(t){return t.app}function ec(t){return t.currentUser}function nc(t){return ec(t)&&ec(t)._lat||null}function ic(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](nc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](nc(t))}}function rc(t,e){return t.N.push(e),e.ia(function(){q(t.N,e)}),e}function oc(){}function ac(){this.a={},this.b=1e12}ju.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Ki("invalid-persistence-type"),n=new Ki("unsupported-persistence-type");t:{for(i in al)if(al[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(oi()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!mi()&&"none"!==t)throw n}}(t),Bu(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(i){return e=i,zu(n,t)}).then(function(){if(n.c=Uu(t),e)return n.b.set(n.c,e,n.a)}):It()})},T(Ku,Le),T(Qu,he),T(Yu,he),(t=Ku.prototype).mb=function(t){return rc(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.l||(this.W=t,Ea(this.c,this.W),this.dispatchEvent(new Qu(this.ea())))},t.ea=function(){return this.W},t.Qc=function(){var t=a.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),Sa(this.c,li.a.SDK_VERSION?di(li.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Yu(this.G))},t.ya=function(){return G(this.G)},t.toJSON=function(){return{apiKey:tc(this).options.apiKey,authDomain:tc(this).options.authDomain,appName:tc(this).name,currentUser:ec(this)&&ec(this).w()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?C(this.Zb,this):null},t.Zb=function(t,e,n){var i=this;t={requestUri:t,postBody:n,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var r=null,o=null,a=Fa(i.c,t).then(function(t){return r=ao(t),o=br(t),t});return rc(this,t=i.V.then(function(){return a}).then(function(t){return Xu(i,t)}).then(function(){return Fi({user:ec(i),credential:r,additionalUserInfo:o,operationType:"signIn"})}))},t.Ic=function(t){if(!gi())return kt(new Ki("operation-not-supported-in-this-environment"));var e=this,n=_r(t.providerId),i=Ei(),r=null;(!_i()||ii())&&tc(this).options.authDomain&&t.isOAuthProvider&&(r=Ns(tc(this).options.authDomain,tc(this).options.apiKey,tc(this).name,"signInViaPopup",t,null,i,li.a.SDK_VERSION||null));var o=Jn(r,n&&n.Ba,n&&n.Aa);return rc(this,n=$u(this).then(function(e){return Ul(e,o,"signInViaPopup",t,i,!!r)}).then(function(){return new _t(function(t,n){e.ha("signInViaPopup",null,new Ki("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=i,e.b=e.a.Ea(e,"signInViaPopup",o,i)})}).then(function(t){return o&&Xn(o),t?Fi(t):null}).s(function(t){throw o&&Xn(o),t}))},t.Jc=function(t){if(!gi())return kt(new Ki("operation-not-supported-in-this-environment"));var e=this;return rc(this,$u(this).then(function(){return Bu(t=e.h,function(){return t.b.set(qu,t.c.B,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!gi())return kt(new Ki("operation-not-supported-in-this-environment"));var t=this;return rc(this,$u(this).then(function(){return t.a.fa()}).then(function(t){return t?Fi(t):null}))},t.Oc=function(t){if(!t)return kt(new Ki("null-user"));var e=this,n={};n.apiKey=tc(this).options.apiKey,n.authDomain=tc(this).options.authDomain,n.appName=tc(this).name;var i=function(t,e,n,i){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var r=t.h,o={};return o[ya]=r.b,o.refreshToken=r.a,o.expiresIn=(r.c-S())/1e3,e=new lu(e,o),n&&(e.ba=n),i&&cu(e,i),Tu(e,t),e}(t,n,e.A,e.ya());return rc(this,this.i.then(function(){if(tc(e).options.apiKey!=t.l)return i.reload()}).then(function(){return ec(e)&&t.uid==ec(e).uid?(Tu(ec(e),t),e.Z(t)):(Ju(e,i),vu(i),e.Z(i))}).then(function(){ic(e)}))},t.pb=function(){var t=this;return rc(this,this.i.then(function(){return ec(t)?(Ju(t,null),Gu(t.h).then(function(){ic(t)})):It()}))},t.Kc=function(){var t=this;return Hu(this.h,tc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=ec(t)&&e){n=ec(t).uid;var i=e.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return Tu(ec(t),e),ec(t).F();(ec(t)||e)&&(Ju(t,e),e&&(vu(e),e.ba=t.A),t.a&&t.a.subscribe(t),ic(t))}})},t.Z=function(t){return Wu(this.h,t)},t.$b=function(){ic(this),this.Z(ec(this))},t.jc=function(){this.pb()},t.kc=function(){this.pb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ec(e))})},t.nc=function(t){var e=this;!function(t,e){t.I.push(e),rc(t,t.i.then(function(){!t.l&&z(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(nc(t)))}))}(this,function(){t.next(ec(e))})},t.vc=function(t,e,n){var i=this;return this.X&&Promise.resolve().then(function(){g(t)?t(ec(i)):g(t.next)&&t.next(ec(i))}),this.Sb(t,e,n)},t.uc=function(t,e,n){var i=this;return this.X&&Promise.resolve().then(function(){i.O=i.getUid(),g(t)?t(ec(i)):g(t.next)&&t.next(ec(i))}),this.Tb(t,e,n)},t.ac=function(t){var e=this;return rc(this,this.i.then(function(){return ec(e)?ec(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Ec=function(t){var e=this;return this.i.then(function(){return Zu(e,ps(e.c,ls,{token:t}))}).then(function(t){var n=t.user;return Su(n,"isAnonymous",!1),e.Z(n),t})},t.Fc=function(t,e){var n=this;return this.i.then(function(){return Zu(n,ps(n.c,us,{email:t,password:e}))})},t.Vb=function(t,e){var n=this;return this.i.then(function(){return Zu(n,ps(n.c,Ua,{email:t,password:e}))})},t.Nb=function(t){var e=this;return this.i.then(function(){return Zu(e,t.la(e.c))})},t.nb=function(t){return Pi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Nb(t)},t.ob=function(){var t=this;return this.i.then(function(){var e=ec(t);if(e&&e.isAnonymous){var n=Fi({providerId:null,isNewUser:!1});return Fi({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Zu(t,t.c.ob()).then(function(e){var n=e.user;return Su(n,"isAnonymous",!0),t.Z(n),e})})},t.getUid=function(){return ec(this)&&ec(this).uid||null},t.Ub=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ec(this)&&pu(ec(this))},t.Cc=function(t){var e=this;M(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&ec(this)&&fu(ec(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),rc(this,this.i.then(function(){e.l||z(e.o,t)&&t(nc(e))}))},t.removeAuthTokenListener=function(t){U(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Uu("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Promise.resolve()},t.Yb=function(t){return rc(this,function(t,e){return ps(t,Wa,{identifier:e,continueUri:vi()?Qn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.c,t))},t.oc=function(t){return!!to(t)},t.lb=function(t,e){var n=this;return rc(this,It().then(function(){var t=new Xi(e);if(!t.c)throw new Ki("argument-error",tr+" must be true when sending sign in link to email");return sr(t)}).then(function(e){return n.c.lb(t,e)}).then(function(){}))},t.Rc=function(t){return this.Ka(t).then(function(t){return t.data.email})},t.Za=function(t,e){return rc(this,this.c.Za(t,e).then(function(){}))},t.Ka=function(t){return rc(this,this.c.Ka(t).then(function(t){return new Vi(t)}))},t.Wa=function(t){return rc(this,this.c.Wa(t).then(function(){}))},t.kb=function(t,e){var n=this;return rc(this,It().then(function(){return void 0===e||at(e)?{}:sr(new Xi(e))}).then(function(e){return n.c.kb(t,e)}).then(function(){}))},t.Hc=function(t,e){return rc(this,Zl(this,t,e,C(this.nb,this)))},t.Gc=function(t,e){var n=this;return rc(this,It().then(function(){var i=Zr(t,e||Qn());return n.nb(i)}))},oc.prototype.render=function(){},oc.prototype.reset=function(){},oc.prototype.getResponse=function(){},oc.prototype.execute=function(){};var sc=null;function lc(t,e){return(e=uc(e))&&t.a[e]||null}function uc(t){return(t=void 0===t?1e12:t)?t.toString():null}function cc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Vn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ee(this.f,"click",this.i)}function hc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dc(){}ac.prototype.render=function(t,e){return this.a[this.b.toString()]=new cc(t,e),this.b++},ac.prototype.reset=function(t){var e=lc(this,t);t=uc(t),e&&t&&(e.delete(),delete this.a[t])},ac.prototype.getResponse=function(t){return(t=lc(this,t))?t.getResponse():null},ac.prototype.execute=function(t){(t=lc(this,t))&&t.execute()},cc.prototype.getResponse=function(){return hc(this),this.b},cc.prototype.execute=function(){hc(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(i){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(i){}t.h&&t.execute()},6e4)},500))},cc.prototype.delete=function(){hc(this),this.g=!0,clearTimeout(this.a),this.a=null,Ie(this.f,"click",this.i)},dc.prototype.g=function(){return sc||(sc=new ac),It(sc)},dc.prototype.c=function(){};var pc=null;function fc(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var mc=new _n(Cn,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),gc=new Ii(3e4,6e4);fc.prototype.g=function(t){var e=this;return new _t(function(n,i){var r=setTimeout(function(){i(new Ki("network-request-failed"))},gc.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(r),n(a.grecaptcha)}else clearTimeout(r),i(new Ki("internal-error"));delete a[e.a]},It(ua(Tn(mc,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(r),i(new Ki("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),n(a.grecaptcha))})},fc.prototype.c=function(){this.b--};var vc=null;function yc(t,e,n,i,r,o,s){if(Ri(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=e,this.g=null,s?(pc||(pc=new dc),s=pc):(vc||(vc=new fc),s=vc),this.o=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[wc])throw new Ki("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Cc],!a.document)throw new Ki("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Vn(e)||!this.i&&Vn(e).hasChildNodes())throw new Ki("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ga(t,o||null,r||null),this.v=i||function(){return null};var l=this;this.m=[];var u=this.a[_c];this.a[_c]=function(t){if(Ec(l,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=fi(u,a);"function"==typeof e&&e(t)}};var c=this.a[bc];this.a[bc]=function(){if(Ec(l,null),"function"==typeof c)c();else if("string"==typeof c){var t=fi(c,a);"function"==typeof t&&t()}}}var _c="callback",bc="expired-callback",wc="sitekey",Cc="size";function Ec(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(i){}}function Sc(t,e){return t.h.push(e),e.ia(function(){q(t.h,e)}),e}function Tc(t){if(t.D)throw new Ki("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ic(t,e,n){var i=!1;try{this.b=n||li.a.app()}catch(a){throw new Ki("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Ki("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().ya()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=li.a.SDK_VERSION?di(li.a.SDK_VERSION,o):null,yc.call(this,n,t,e,function(){try{var t=r.b.auth().ea()}catch(e){t=null}return t},o,mr(pr),i)}function kc(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Ki("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].M(n[r])&&!o){if(e=e[r],0>r||r>=Nc.length)throw new Ki("internal-error","Argument validator received an unsupported number of arguments.");n=Nc[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}i=null}}if(i)throw new Ki("argument-error",t+" failed: "+i)}(t=yc.prototype).za=function(){var t=this;return this.f?this.f:this.f=Sc(this,It().then(function(){if(vi()&&!ri())return ei();throw new Ki("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,ps(t.u,Za,{})}).then(function(e){t.a[wc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Tc(this);var t=this;return Sc(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=Vn(e);e=function(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!yn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',pt(a.name),'"'),a.type){o.push(' type="',pt(a.type),'"');var l={};ht(l,a),delete l.type,a=l}o.push(">"),o=o.join("")}return o=r.createElement(o),a&&(s(a)?o.className=a:f(a)?o.className=a.join(" "):jn(o,a)),2<i.length&&function(t,e,n){function i(n){n&&e.appendChild(s(n)?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];!m(o)||v(o)&&0<o.nodeType?i(o):M(qn(o)?G(o):o,i)}}(r,o,i),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Tc(this);var t=this;return Sc(this,this.render().then(function(e){return new _t(function(n){var i=t.g.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){U(t.m,function(t){return t==e})}(t,r),n(e))};t.m.push(r),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Tc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Tc(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Vn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Ic,yc);var Nc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ac(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:s}}function Oc(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:l}}function xc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Pc(t,e){return{name:t||"",K:"a function",optional:!!e,M:g}}function Dc(t,e){return{name:t||"",K:"null",optional:!!e,M:p}}function Rc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.la||t&&e.providerId!==t)}}}function Lc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&s(t.type)&&g(t.verify))}}}function Fc(t,e,n,i){return{name:n||"",K:t.K+" or "+e.K,optional:!!i,M:function(n){return t.M(n)||e.M(n)}}}function Mc(t,e){for(var n in e){var i=e[n].name;t[i]=zc(i,t[n],e[n].j)}}function Vc(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:E(function(t){return this[t]},n),set:E(function(t,e,n,i){kc(t,[n],[i],!0),this[e]=i},i,n,e[n].vb),enumerable:!0})}}function jc(t,e,n,i){t[e]=zc(e,n,i)}function zc(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return kc(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Mc(Ku.prototype,{Wa:{name:"applyActionCode",j:[Ac("code")]},Ka:{name:"checkActionCode",j:[Ac("code")]},Za:{name:"confirmPasswordReset",j:[Ac("code"),Ac("newPassword")]},Vb:{name:"createUserWithEmailAndPassword",j:[Ac("email"),Ac("password")]},Yb:{name:"fetchSignInMethodsForEmail",j:[Ac("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[Ac("emailLink")]},uc:{name:"onAuthStateChanged",j:[Fc(xc(),Pc(),"nextOrObserver"),Pc("opt_error",!0),Pc("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[Fc(xc(),Pc(),"nextOrObserver"),Pc("opt_error",!0),Pc("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Ac("email"),Fc(xc("opt_actionCodeSettings",!0),Dc(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Ac("email"),xc("actionCodeSettings")]},mb:{name:"setPersistence",j:[Ac("persistence")]},nb:{name:"signInAndRetrieveDataWithCredential",j:[Rc()]},ob:{name:"signInAnonymously",j:[]},Nb:{name:"signInWithCredential",j:[Rc()]},Ec:{name:"signInWithCustomToken",j:[Ac("token")]},Fc:{name:"signInWithEmailAndPassword",j:[Ac("email"),Ac("password")]},Gc:{name:"signInWithEmailLink",j:[Ac("email"),Ac("emailLink",!0)]},Hc:{name:"signInWithPhoneNumber",j:[Ac("phoneNumber"),Lc()]},Ic:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"updateCurrentUser",j:[Fc({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof lu)}},Dc(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[Ac("code")]}}),Vc(Ku.prototype,{lc:{name:"languageCode",vb:Fc(Ac(),Dc(),"languageCode")}}),(Ku.Persistence=al).LOCAL="local",Ku.Persistence.SESSION="session",Ku.Persistence.NONE="none",Mc(lu.prototype,{delete:{name:"delete",j:[]},bc:{name:"getIdTokenResult",j:[Oc("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Oc("opt_forceRefresh",!0)]},pc:{name:"linkAndRetrieveDataWithCredential",j:[Rc()]},eb:{name:"linkWithCredential",j:[Rc()]},qc:{name:"linkWithPhoneNumber",j:[Ac("phoneNumber"),Lc()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Rc()]},gb:{name:"reauthenticateWithCredential",j:[Rc()]},zc:{name:"reauthenticateWithPhoneNumber",j:[Ac("phoneNumber"),Lc()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[Fc(xc("opt_actionCodeSettings",!0),Dc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},Nc:{name:"unlink",j:[Ac("provider")]},rb:{name:"updateEmail",j:[Ac("email")]},sb:{name:"updatePassword",j:[Ac("password")]},Pc:{name:"updatePhoneNumber",j:[Rc("phone")]},tb:{name:"updateProfile",j:[xc("profile")]}}),Mc(ac.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Mc(oc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Mc(_t.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Vc(Xl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",vb:Oc("appVerificationDisabledForTesting")}}),Mc(Jl.prototype,{confirm:{name:"confirm",j:[Ac("verificationCode")]}}),jc(xr,"fromJSON",function(t){t=s(t)?JSON.parse(t):t;for(var e,n=[Vr,Xr,no,Lr],i=0;i<n.length;i++)if(e=n[i](t))return e;return null},[Fc(Ac(),xc(),"json")]),jc(Jr,"credential",function(t,e){return new $r(t,e)},[Ac("email"),Ac("password")]),Mc($r.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(Ur.prototype,{ua:{name:"addScope",j:[Ac("scope")]},Da:{name:"setCustomParameters",j:[xc("customOAuthParameters")]}}),jc(Ur,"credential",Wr,[Fc(Ac(),xc(),"token")]),jc(Jr,"credentialWithLink",Zr,[Ac("email"),Ac("emailLink")]),Mc(Gr.prototype,{ua:{name:"addScope",j:[Ac("scope")]},Da:{name:"setCustomParameters",j:[xc("customOAuthParameters")]}}),jc(Gr,"credential",Hr,[Fc(Ac(),xc(),"token")]),Mc(Br.prototype,{ua:{name:"addScope",j:[Ac("scope")]},Da:{name:"setCustomParameters",j:[xc("customOAuthParameters")]}}),jc(Br,"credential",Kr,[Fc(Ac(),Fc(xc(),Dc()),"idToken"),Fc(Ac(),Dc(),"accessToken",!0)]),Mc(Qr.prototype,{Da:{name:"setCustomParameters",j:[xc("customOAuthParameters")]}}),jc(Qr,"credential",Yr,[Fc(Ac(),xc(),"token"),Ac("secret",!0)]),Mc(qr.prototype,{ua:{name:"addScope",j:[Ac("scope")]},credential:{name:"credential",j:[Fc(Ac(),Fc(xc(),Dc()),"optionsOrIdToken"),Fc(Ac(),Dc(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[xc("customOAuthParameters")]}}),Mc(Fr.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(Dr.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),jc(ro,"credential",oo,[Ac("verificationId"),Ac("verificationCode")]),Mc(ro.prototype,{Ua:{name:"verifyPhoneNumber",j:[Ac("phoneNumber"),Lc()]}}),Mc(eo.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(Ki.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(mo.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(fo.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Mc(Ic.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===li.a||!li.a.INTERNAL||!li.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Ku,AuthCredential:xr,Error:Ki};jc(t,"EmailAuthProvider",Jr,[]),jc(t,"FacebookAuthProvider",Ur,[]),jc(t,"GithubAuthProvider",Gr,[]),jc(t,"GoogleAuthProvider",Br,[]),jc(t,"TwitterAuthProvider",Qr,[]),jc(t,"OAuthProvider",qr,[Ac("providerId")]),jc(t,"SAMLAuthProvider",zr,[Ac("providerId")]),jc(t,"PhoneAuthProvider",ro,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Ku)}}]),jc(t,"RecaptchaVerifier",Ic,[Fc(Ac(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),xc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof li.a.app.App)}}]),li.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:C((t=new Ku(t)).getUid,t),getToken:C(t.ac,t),addAuthTokenListener:C(t.Ub,t),removeAuthTokenListener:C(t.Cc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),li.a.INTERNAL.extendNamespace({User:lu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let ui=class{};var ci=n("2esG"),hi=n("FeJB");n.d(e,"AdminModuleNgFactory",function(){return di});var di=i.nb(a,[],function(t){return i.wb([i.xb(512,i.j,i.ab,[[8,[s.a,Bn,oi]],[3,i.j],i.v]),i.xb(4608,u.l,u.k,[i.s,[2,u.u]]),i.xb(4608,mt,mt,[]),i.xb(5120,In,kn,[Sn,[2,Tn]]),i.xb(4608,ai,ai,[Sn,[2,Tn],i.z,i.x]),i.xb(4608,An,An,[Sn,[2,Tn],[2,wn],i.z,i.x]),i.xb(4608,_e,_e,[]),i.xb(4608,G,G,[]),i.xb(4608,Fn,Fn,[ai,ci.a]),i.xb(4608,$n,$n,[An,Kn.b]),i.xb(1073742336,u.c,u.c,[]),i.xb(1073742336,te,te,[]),i.xb(1073742336,ee,ee,[]),i.xb(1073742336,l.p,l.p,[[2,l.u],[2,l.m]]),i.xb(1073742336,Nn,Nn,[]),i.xb(1073742336,ui,ui,[]),i.xb(1073742336,On,On,[]),i.xb(1073742336,f,f,[]),i.xb(1073742336,z,z,[[2,j],[2,m.f]]),i.xb(1073742336,h,h,[]),i.xb(1073742336,C,C,[]),i.xb(1073742336,ze,ze,[]),i.xb(1073742336,Ce,Ce,[]),i.xb(1073742336,ye,ye,[]),i.xb(1073742336,Be,Be,[]),i.xb(1073742336,hi.a,hi.a,[]),i.xb(1073742336,a,a,[]),i.xb(256,Sn,{apiKey:"AIzaSyAJawulOMYRp0eXjMHLqiffzuS9tToCfAI",authDomain:"fluindotio-website-93127.firebaseapp.com",databaseURL:"https://fluindotio-website-93127.firebaseio.com",storageBucket:"fluindotio-website-93127.appspot.com"},[]),i.xb(256,Tn,void 0,[]),i.xb(1024,l.k,function(){return[[{path:"",component:Ln,data:r},{path:":id",component:Yn,data:o}]]},[])])})},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o,a,s,l,u,c,h,d,p,f,m=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i,g=n("mrSG"),v=n("zVF4"),y=n("q/0M"),_=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),v.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:v.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),b=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return v.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),w=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _(e)}}catch(n){}return new b},C=w("localStorage"),E=w("sessionStorage"),S=new y.Logger("@firebase/database"),T=(r=1,function(){return r++}),I=function(t){var e=v.stringToByteArray(t),n=new v.Sha1;n.update(e);var i=n.digest();return v.base64.encodeByteArray(i)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++)Array.isArray(t[i])||t[i]&&"object"==typeof t[i]&&"number"==typeof t[i].length?n+=k.apply(null,t[i]):n+="object"==typeof t[i]?v.stringify(t[i]):t[i],n+=" ";return n},N=null,A=!0,O=function(t,e){v.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(S.logLevel=y.LogLevel.VERBOSE,N=S.log.bind(S),e&&E.set("logging_enabled",!0)):"function"==typeof t?N=t:(N=null,E.remove("logging_enabled"))},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===A&&(A=!1,null===N&&!0===E.get("logging_enabled")&&O(!0)),N){var n=k.apply(null,t);N(n)}},P=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];x.apply(void 0,[t].concat(e))}},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+k.apply(void 0,t);S.error(n)},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+k.apply(void 0,t);throw S.error(n),new Error(n)},L=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+k.apply(void 0,t);S.warn(n)},F=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},M="[MIN_NAME]",V="[MAX_NAME]",j=function(t,e){if(t===e)return 0;if(t===M||e===V)return-1;if(e===M||t===V)return 1;var n=K(t),i=K(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},z=function(t,e){return t===e?0:t<e?-1:1},q=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+v.stringify(e))},U=function(t){if("object"!=typeof t||null===t)return v.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",r=0;r<e.length;r++)0!==r&&(i+=","),i+=v.stringify(e[r]),i+=":",i+=U(t[e[r]]);return i+"}"},W=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i},G=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else v.forEach(t,function(t,n){return e(n,t)})},H=function(t){var e,n,i,r,o,a,s;for(v.assert(!F(t),"Invalid JSON number"),0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var l="";for(o=0;o<64;o+=8){var u=parseInt(s.substr(o,8),2).toString(16);1===u.length&&(u="0"+u),l+=u}return l.toLowerCase()},B=new RegExp("^-?\\d{1,10}$"),K=function(t){if(B.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Q=function(t){try{t()}catch(e){setTimeout(function(){throw L("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Y=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=j(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),J=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=v.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=v.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=v.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z="long_polling",tt=function(){function t(t,e,n,i,r){void 0===r&&(r=""),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.persistenceKey=r,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=C.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&C.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(v.assert("string"==typeof t,"typeof type must == string"),v.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return v.forEach(e,function(t,e){i.push(t+"="+e)}),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t){var e=nt(t),n=e.subdomain;return"firebase"===e.domain&&R(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||R("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&L("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme),path:new X(e.pathString)}},nt=function(t){var e="",n="",i="",r="",o=!0,a="https",s=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));var u=t.indexOf("/");-1===u&&(u=t.length);var c=t.indexOf("?");-1===c&&(c=t.length),e=t.substring(0,Math.min(u,c)),u<c&&(r=function(e){for(var n="",i=t.substring(u,c).split("/"),r=0;r<i.length;r++)if(i[r].length>0){var o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(a){}n+="/"+o}return n}());var h=function(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,i=t.split("&");n<i.length;n++){var r=i[n];if(0!==r.length){var o=r.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):L("Invalid query segment '"+r+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,c)));(l=e.indexOf(":"))>=0?(o="https"===a||"wss"===a,s=parseInt(e.substring(l+1),10)):l=t.length;var d=e.split(".");3===d.length?(n=d[1],i=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,l).toLowerCase()&&(n="localhost"),""===i&&"ns"in h&&(i=h.ns)}return{host:e,port:s,domain:n,subdomain:i,secure:o,scheme:a,pathString:r}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,ot=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},st=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!F(t)||t&&"object"==typeof t&&v.contains(t,".sv")},lt=function(t,e,n,i,r){r&&void 0===n||ut(v.errorPrefix(t,e,r),n,i)},ut=function(t,e,n){var i=n instanceof X?new J(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(F(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>10485760/3&&v.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var r=!1,o=!1;if(v.forEach(e,function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),ut(t,n,i),i.pop()}),r&&o)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ct=function(t,e,n,i,r){if(!r||void 0!==n){var o=v.errorPrefix(t,e,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];v.forEach(n,function(t,e){var n=new X(t);if(ut(o,e,i.child(n)),".priority"===n.getBack()&&!st(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!ot(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var a=null;for(n=0;n<e.length;n++){if(i=e[n],null!==a&&a.contains(i))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}}(o,a)}},ht=function(t,e,n,i){if(!i||void 0!==n){if(F(n))throw new Error(v.errorPrefix(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!st(n))throw new Error(v.errorPrefix(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(v.errorPrefix(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,i){if(!(i&&void 0===n||ot(n)))throw new Error(v.errorPrefix(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ft=function(t,e,n,i){if(!(i&&void 0===n||at(n)))throw new Error(v.errorPrefix(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},gt=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(i))throw new Error(v.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},vt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){v.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),v.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new v.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){v.validateArgCount("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),v.validateCallback("OnDisconnect.remove",1,t,!0);var e=new v.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){v.validateArgCount("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),v.validateCallback("OnDisconnect.set",2,e,!0);var n=new v.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){v.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),v.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new v.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(v.validateArgCount("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,L("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("OnDisconnect.update",1,t,this.path_,!1),v.validateCallback("OnDisconnect.update",2,e,!0);var r=new v.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),yt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return v.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),_t=(o="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",a=0,s=[],function(t){var e,n=t===a;a=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=o.charAt(t%64),t=Math.floor(t/64);v.assert(0===t,"Cannot push at time == 0");var r=i.join("");if(n){for(e=11;e>=0&&63===s[e];e--)s[e]=0;s[e]++}else for(e=0;e<12;e++)s[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=o.charAt(s[e]);return v.assert(20===r.length,"nextPushId: Length should be 20."),r}),bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),wt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new bt(M,t),i=new bt(M,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return bt.MIN},t}(),Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return j(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw v.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(V,l)},e.prototype.makePost=function(t,e){return v.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,l)},e.prototype.toString=function(){return".key"},e}(wt),Et=new Ct,St=function(t){return"number"==typeof t?"number:"+H(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();v.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&v.contains(e,".sv"),"Priority must be a string or number.")}else v.assert(t===u||t.isEmpty(),"priority of unexpected type.");v.assert(t===u||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,v.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return c},set:function(t){c=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(v.assert(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?H(this.value_):this.value_,this.lazyHash_=I(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(v.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(i);return v.assert(r>=0,"Unknown leaf type: "+n),v.assert(o>=0,"Unknown leaf type: "+i),r===o?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?j(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(V,new It("[PRIORITY-POST]",d))},e.prototype.makePost=function(t,e){var n=h(t);return new bt(e,new It("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(wt)),Nt=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:xt.EMPTY_NODE,this.right=null!=o?o:xt.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i,r;return(r=(i=n(t,(r=this).key))<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return xt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return xt.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ot=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new At(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),xt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ot,t}(),Pt=Math.log(2),Dt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Pt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Rt=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,a,s=i-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new At(a,o.node,At.BLACK,null,null);var l=parseInt(s/2,10)+e,u=r(e,l),c=r(l+1,i);return o=t[l],a=n?n(o):o,new At(a,o.node,At.BLACK,u,c)},o=function(e){for(var i=null,o=null,a=t.length,s=function(e,i){var o=a-e,s=a;a-=e;var u=r(o+1,s),c=t[o],h=n?n(c):c;l(new At(h,c.node,i,null,u))},l=function(t){i?(i.left=t,i=t):(o=t,i=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),h=Math.pow(2,e.count-(u+1));c?s(h,At.BLACK):(s(h,At.BLACK),s(h,At.RED))}return o}(new Dt(t.length));return new xt(i||e,o)},Lt={},Ft=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return v.assert(Lt&&kt,"ChildrenNode.ts has not been loaded"),p=p||new t({".priority":Lt},{".priority":kt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=v.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Lt?null:e},t.prototype.hasIndex=function(t){return v.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){v.assert(e!==Et,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,r=[],o=!1,a=n.getIterator(bt.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),r.push(s),s=a.getNext();i=o?Rt(r,e.getCompare()):Lt;var l=e.toString(),u=v.clone(this.indexSet_);u[l]=e;var c=v.clone(this.indexes_);return c[l]=i,new t(c,u)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(v.map(this.indexes_,function(t,r){var o=v.safeGet(i.indexSet_,r);if(v.assert(o,"Missing index implementation for "+r),t===Lt){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(bt.Wrap),l=s.getNext();l;)l.name!=e.name&&a.push(l),l=s.getNext();return a.push(e),Rt(a,o.getCompare())}return Lt}var u=n.get(e.name),c=t;return u&&(c=c.remove(new bt(e.name,u))),c.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(v.map(this.indexes_,function(t){if(t===Lt)return t;var i=n.get(e.name);return i?t.remove(new bt(e.name,i)):t}),this.indexSet_)},t}();function Mt(t,e){return j(t.name,e.name)}function Vt(t,e){return j(t,e)}var jt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&v.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return f||(f=new t(new xt(Vt),null,Ft.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||f},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?f:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(v.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i,r=new bt(e,n),o=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_)),i=o.isEmpty()?f:this.priorityNode_,new t(o,i,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;v.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(kt,function(a,s){n[a]=s.val(e),i++,o&&t.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!e&&o&&r<2*i){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(kt,function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)}),this.lazyHash_=""===t?"":I(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new bt(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var i=this.children_.getIteratorFrom(t.name,bt.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var i=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zt?-1:0},t.prototype.withIndex=function(e){if(e===Et||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Et||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),i=e.getIterator(kt),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Et?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),zt=new(function(t){function e(){return t.call(this,new xt(Vt),jt.EMPTY_NODE,Ft.Default)||this}return g.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return jt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(jt));Object.defineProperties(bt,{MIN:{value:new bt(M,jt.EMPTY_NODE)},MAX:{value:new bt(V,zt)}}),Ct.__EMPTY_NODE=jt.EMPTY_NODE,It.__childrenNodeConstructor=jt,u=zt,d=zt;var qt=!0;function Ut(t,e){if(void 0===e&&(e=null),null===t)return jt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),v.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new It(t,Ut(e));if(t instanceof Array||!qt){var n=jt.EMPTY_NODE,i=t;return v.forEach(i,function(t,e){if(v.contains(i,t)&&"."!==t.substring(0,1)){var r=Ut(e);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(t,r))}}),n.updatePriority(Ut(e))}var r=[],o=!1,a=t;if(v.forEach(a,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Ut(a[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new bt(t,n)))}}),0==r.length)return jt.EMPTY_NODE;var s=Rt(r,Mt,function(t){return t.name},Vt);if(o){var l=Rt(r,kt.getCompare());return new jt(s,Ut(e),new Ft({".priority":l},{".priority":kt}))}return new jt(s,Ut(e),Ft.Default)}h=Ut;var Wt,Gt,Ht,Bt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?j(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return bt.MAX},e.prototype.makePost=function(t,e){var n=Ut(t);return new bt(e,n)},e.prototype.toString=function(){return".value"},e}(wt)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,v.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return g.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?j(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=Ut(t),i=jt.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,i)},e.prototype.maxPost=function(){var t=jt.EMPTY_NODE.updateChild(this.indexPath_,zt);return new bt(V,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(wt),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return v.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return v.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return v.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return v.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){v.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),ft("DataSnapshot.child",1,e,!1);var n=new X(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,kt)},t.prototype.hasChild=function(t){v.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ft("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return v.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return v.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),v.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(i,r){return e(new t(r,n.ref_.child(i),kt))})},t.prototype.hasChildren=function(){return v.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return v.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return v.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Yt=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+v.stringify(this.snapshot.exportVal())},t}(),$t=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Yt("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){v.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new $t(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return v.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new $t(this,t,e):null},t.prototype.createEvent=function(t,e){v.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new Yt(t.type,this,new Qt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){v.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=v.getCount(e.callbacks_);if(n===v.getCount(this.callbacks_)){if(1===n){var i=v.getAnyKey(e.callbacks_),r=v.getAnyKey(this.callbacks_);return!(r!==i||e.callbacks_[i]&&this.callbacks_[r]&&e.callbacks_[i]!==this.callbacks_[r])}return v.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return v.assert(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Et){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=M)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!=V)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===kt){if(null!=e&&!st(e)||null!=n&&!st(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(v.assert(t.getIndex()instanceof Kt||t.getIndex()===Bt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return v.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){v.validateArgCount("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),v.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",i,r);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){v.validateArgCount("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),v.validateCallback("Query.off",2,e,!0),v.validateContextObject("Query.off",3,n,!0);var i=null,r=null;"value"===t?i=new Xt(e||null,null,n||null):t&&(e&&((r={})[t]=e),i=new Jt(r,null,n||null)),this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,r){var o=this;v.validateArgCount("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),v.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",i,r),s=!0,l=new v.Deferred;l.promise.catch(function(){});var u=function(t){s&&(s=!1,o.off(e,u),n&&n.bind(a.context)(t),l.resolve(t))};return this.on(e,u,function(t){o.off(e,u),a.cancel&&a.cancel.bind(a.context)(t),l.reject(t)}),l.promise},t.prototype.limitToFirst=function(e){if(v.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(v.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(v.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ft("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Kt(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){v.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Et);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){v.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){v.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Bt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),v.validateArgCount("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),v.validateArgCount("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(v.validateArgCount("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return v.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return v.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=U(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(v.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,i=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return n&&i&&r},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,v.validateCallback(t,3,i.cancel,!0),i.context=n,v.validateContextObject(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(v.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),te=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return v.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return v.isEmpty(this.set)},t.prototype.count=function(){return v.getCount(this.set)},t.prototype.each=function(t){v.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return v.forEach(this.set,function(e){t.push(e)}),t},t}(),ee=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new te);var i=e.getFront();this.children_.contains(i)||this.children_.add(i,new t);var r=this.children_.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(kt,function(t,e){n.remember(new X(t),e)}),this.forget(t)}if(null!==this.children_){var i=t.getFront();return t=t.popFront(),this.children_.contains(i)&&this.children_.get(i).forget(t)&&this.children_.remove(i),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,i){var r=new X(t.toString()+"/"+n);i.forEachTree(r,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),ne=function(t,e){return t&&"object"==typeof t?(v.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},ie=function(t,e){var n,i=t.getPriority().val(),r=ne(i,e);if(t.isLeafNode()){var o=t,a=ne(o.getValue(),e);return a!==o.getValue()||r!==o.getPriority().val()?new It(a,Ut(r)):t}var s=t;return n=s,r!==s.getPriority().val()&&(n=n.updatePriority(new It(r))),s.forEachChild(kt,function(t,i){var r=ie(i,e);r!==i&&(n=n.updateImmediateChild(t,r))}),n},re=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),oe=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,v.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ae=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=re.ACK_USER_WRITE,this.source=oe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return v.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return v.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),se=function(){return Gt||(Gt=new xt(z)),Gt},le=function(){function t(t,e){void 0===e&&(e=se()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return v.forEach(e,function(t,e){n=n.set(new X(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new X(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i,r=e.getFront(),o=(this.children.get(r)||t.Empty).setTree(e.popFront(),n);return i=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,i)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(i,r){n[i]=r.fold_(t.child(i),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,i){i.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ue=function(){function t(t,e){this.source=t,this.path=e,this.type=re.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=re.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),he=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=re.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new ce(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return v.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),de=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),pe=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new de(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new de(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new de(jt.EMPTY_NODE,!1,!1),new de(jt.EMPTY_NODE,!1,!1)),t}(),fe=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,o){v.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(fe.childRemovedChange(e,a)):v.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fe.childAddedChange(e,n)):o.trackChildChange(fe.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,function(t,i){e.hasChild(t)||n.trackChildChange(fe.childRemovedChange(t,i))}),e.isLeafNode()||e.forEachChild(kt,function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(fe.childChangedChange(e,i,r))}else n.trackChildChange(fe.childAddedChange(e,i))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?jt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;v.assert(e==fe.CHILD_ADDED||e==fe.CHILD_CHANGED||e==fe.CHILD_REMOVED,"Only child changes supported for tracking"),v.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var i=v.safeGet(this.changeMap_,n);if(i){var r=i.type;if(e==fe.CHILD_ADDED&&r==fe.CHILD_REMOVED)this.changeMap_[n]=fe.childChangedChange(n,t.snapshotNode,i.snapshotNode);else if(e==fe.CHILD_REMOVED&&r==fe.CHILD_ADDED)delete this.changeMap_[n];else if(e==fe.CHILD_REMOVED&&r==fe.CHILD_CHANGED)this.changeMap_[n]=fe.childRemovedChange(n,i.oldSnap);else if(e==fe.CHILD_CHANGED&&r==fe.CHILD_ADDED)this.changeMap_[n]=fe.childAddedChange(n,t.snapshotNode);else{if(e!=fe.CHILD_CHANGED||r!=fe.CHILD_CHANGED)throw v.assertionError("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap_[n]=fe.childChangedChange(n,t.snapshotNode,i.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return v.getValues(this.changeMap_)},t}(),ve=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new de(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),_e=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),be=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){v.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),v.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,r){var o,a,s=new ge;if(n.type===re.OVERWRITE){var l=n;l.source.fromUser?o=this.applyUserOverwrite_(e,l.path,l.snap,i,r,s):(v.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),o=this.applyServerOverwrite_(e,l.path,l.snap,i,r,a,s))}else if(n.type===re.MERGE){var u=n;u.source.fromUser?o=this.applyUserMerge_(e,u.path,u.children,i,r,s):(v.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,u.path,u.children,i,r,a,s))}else if(n.type===re.ACK_USER_WRITE){var c=n;o=c.revert?this.revertUserWrite_(e,c.path,i,r,s):this.ackUserWrite_(e,c.path,c.affectedTree,i,r,s)}else{if(n.type!==re.LISTEN_COMPLETE)throw v.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,i,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new _e(o,h)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(fe.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(v.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var l=t.getCompleteServerSnap(),u=n.calcCompleteEventChildren(l instanceof jt?l:jt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),u,r)}else{var c=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,r)}else{var h=e.getFront();if(".priority"==h){v.assert(1==e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,s);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var f=e.popFront(),m=void 0;if(o.isCompleteForChild(h)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);m=null!=g?o.getNode().getImmediateChild(h).updateChild(f,g):o.getNode().getImmediateChild(h)}else m=n.calcCompleteChild(h,t.getServerCache());a=null!=m?this.filter_.updateChild(o.getNode(),h,m,f,i,r):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,a){var s,l=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){var c=l.getNode().updateChild(e,n);s=u.updateFullNode(l.getNode(),c,null)}else{var h=e.getFront();if(!l.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),p=l.getNode().getImmediateChild(h).updateChild(d,n);s=".priority"==h?u.updatePriority(l.getNode(),p):u.updateChild(l.getNode(),h,p,d,ve,null)}var f=t.updateServerSnap(s,l.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),m=new ye(i,f,r);return this.generateEventCacheAfterServerEvent_(f,e,i,m,a)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var a,s,l=t.getEventCache(),u=new ye(i,t,r);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=e.getFront();if(".priority"===c)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,l.isFullyInitialized(),l.isFiltered());else{var h=e.popFront(),d=l.getNode().getImmediateChild(c),p=void 0;if(h.isEmpty())p=n;else{var f=u.getCompleteChild(c);p=null!=f?".priority"===h.getBack()&&f.getChild(h.parent()).isEmpty()?f:f.updateChild(h,n):jt.EMPTY_NODE}if(d.equals(p))a=t;else{var m=this.filter_.updateChild(l.getNode(),c,p,h,u,o);a=t.updateEventSnap(m,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,a){var s=this,l=e;return i.foreach(function(i,u){var c=n.child(i);t.cacheHasChild_(e,c.getFront())&&(l=s.applyUserOverwrite_(l,c,u,r,o,a))}),i.foreach(function(i,u){var c=n.child(i);t.cacheHasChild_(e,c.getFront())||(l=s.applyUserOverwrite_(l,c,u,r,o,a))}),l},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var l,u=t;l=e.isEmpty()?n:le.Empty.setTree(e,n);var c=t.getServerCache().getNode();return l.children.inorderTraversal(function(e,n){if(c.hasChild(e)){var l=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(l,n);u=s.applyServerOverwrite_(u,new X(e),h,i,r,o,a)}}),l.children.inorderTraversal(function(e,n){var l=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!c.hasChild(e)&&!l){var h=t.getServerCache().getNode().getImmediateChild(e),d=s.applyMerge_(h,n);u=s.applyServerOverwrite_(u,new X(e),d,i,r,o,a)}}),u},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),i,r,a,o);if(e.isEmpty()){var l=le.Empty;return s.getNode().forEachChild(Et,function(t,e){l=l.set(new X(t),e)}),this.applyServerMerge_(t,e,l,i,r,a,o)}return t}var u=le.Empty;return n.foreach(function(t,n){var i=e.child(t);s.isCompleteForPath(i)&&(u=u.set(t,s.getNode().getChild(i)))}),this.applyServerMerge_(t,e,u,i,r,a,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ve,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var o;if(null!=n.shadowingWrite(e))return t;var a=new ye(n,t,i),s=t.getEventCache().getNode(),l=void 0;if(e.isEmpty()||".priority"===e.getFront()){var u=void 0;if(t.getServerCache().isFullyInitialized())u=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var c=t.getServerCache().getNode();v.assert(c instanceof jt,"serverChildren would be complete if leaf node"),u=n.calcCompleteEventChildren(c)}l=this.filter_.updateFullNode(s,u=u,r)}else{var h=e.getFront(),d=n.calcCompleteChild(h,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(h)&&(d=s.getImmediateChild(h)),(l=null!=d?this.filter_.updateChild(s,h,d,e.popFront(),a,r):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,jt.EMPTY_NODE,e.popFront(),a,r):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,o,r))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(l,o,this.filter_.filtersNodes())},t}(),we=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach(function(t){t.type===fe.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(fe.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(r,fe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,fe.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,fe.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,fe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,fe.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,r);i.forEach(function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw v.assertionError("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),i=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),Ce=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new me(n.getIndex()),r=n.getNodeFilter();this.processor_=new be(r);var o=e.getServerCache(),a=e.getEventCache(),s=i.updateFullNode(jt.EMPTY_NODE,o.getNode(),null),l=r.updateFullNode(jt.EMPTY_NODE,a.getNode(),null),u=new de(s,o.isFullyInitialized(),i.filtersNodes()),c=new de(l,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=new pe(c,u),this.eventGenerator_=new we(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){v.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){var r=t.createCancelEvent(e=e,i);r&&n.push(r)})}if(t){for(var r=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(o+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===re.MERGE&&null!==t.source.queryId&&(v.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),v.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),v.assert(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,function(t,e){n.push(fe.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(fe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ee=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return v.assert(Ht,"Reference.ts has not been loaded"),Ht},set:function(t){v.assert(!Ht,"__referenceConstructor has already been defined"),Ht=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return v.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var i=t.source.queryId;if(null!==i){var r=v.safeGet(this.views_,i);return v.assert(null!=r,"SyncTree gave us an op for an invalid query."),r.applyOperation(t,e,n)}var o=[];return v.forEach(this.views_,function(i,r){o=o.concat(r.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),a=v.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(r?i:null),l=!1;s?l=!0:i instanceof jt?(s=n.calcCompleteEventChildren(i),l=!1):(s=jt.EMPTY_NODE,l=!1);var u=new pe(new de(s,l,!1),new de(i,r,!1));a=new Ce(t,u),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var r=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===r){var l=this;v.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,i)),e.isEmpty()&&(delete l.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var u=v.safeGet(this.views_,r);u&&(a=a.concat(u.removeEventRegistration(n,i)),u.isEmpty()&&(delete this.views_[r],u.getQuery().getQueryParams().loadsAllData()||o.push(u.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return v.forEach(this.views_,function(n,i){e=e||i.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return v.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return v.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),Se=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new le(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,a=X.relativePath(r,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(r,o))}var s=new le(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return v.forEach(e,function(e,i){n=n.addWrite(t.child(e),i)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,le.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(kt,function(e,n){t.push(new bt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new bt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new le(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(X.Empty,this.writeTree_,e)},t.Empty=new t(new le(null)),t.applySubtreeWrite_=function(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var r=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(v.assert(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):i=t.applySubtreeWrite_(e.child(n),o,i)}),i.getChild(e).isEmpty()||null===r||(i=i.updateChild(e.child(".priority"),r)),i},t}(),Te=function(){function t(){this.visibleWrites_=Se.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ie(t,this)},t.prototype.addOverwrite=function(t,e,n,i){v.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){v.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});v.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,i.path)?r=!1:i.path.contains(s.path)&&(o=!0)),a--}return!!r&&(o?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):v.forEach(i.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);return!r&&o.isEmpty()?n:r||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||jt.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(X.Empty)?s.apply(n||jt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=jt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(kt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(kt,function(t,e){var i=r.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,i)}),r.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){v.assert(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var o=this.visibleWrites_.childCompoundWrite(r);return o.isEmpty()?i.getChild(e):o.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var a,s=this.visibleWrites_.childCompoundWrite(t),l=s.getCompleteNode(X.Empty);if(null!=l)a=l;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),d=h.getNext();d&&u.length<i;)0!==c(d,n)&&u.push(d),d=h.getNext();return u},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!v.findKey(t.children,function(n,i){return t.path.child(i).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=Se.Empty,r=0;r<t.length;++r){var o=t[r];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=X.relativePath(n,a),i=i.addWrite(s,o.snap)):a.contains(n)&&(s=X.relativePath(a,n),i=i.addWrite(X.Empty,o.snap.getChild(s)));else{if(!o.children)throw v.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=X.relativePath(n,a),i=i.addWrites(s,o.children);else if(a.contains(n))if((s=X.relativePath(a,n)).isEmpty())i=i.addWrites(X.Empty,o.children);else{var l=v.safeGet(o.children,s.getFront());if(l){var u=l.getChild(s.popFront());i=i.addWrite(X.Empty,u)}}}}}return i},t}(),Ie=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ke=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=le.Empty,this.pendingWriteTree_=new Te,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new ce(oe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=le.fromObject(e);return this.applyOperationToSyncPoints_(new he(oe.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=le.Empty;return null!=n.snap?i=i.set(X.Empty,!0):v.forEach(n.children,function(t,e){i=i.set(new X(t),e)}),this.applyOperationToSyncPoints_(new ae(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ce(oe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=le.fromObject(e);return this.applyOperationToSyncPoints_(new he(oe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ue(oe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,l=X.relativePath(a,e),u=new ce(oe.forServerTaggedQuery(s),l,n);return this.applyTaggedOperation_(a,u)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,l=X.relativePath(a,e),u=le.fromObject(n),c=new he(oe.forServerTaggedQuery(s),l,u);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,a=r.queryId,s=X.relativePath(o,e),l=new ue(oe.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,l)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(i,function(t,e){var n=X.relativePath(t,i);r=r||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a,s=this.syncPointTree_.get(i);s?(o=o||s.hasCompleteView(),r=r||s.getCompleteServerCache(X.Empty)):(s=new Ee,this.syncPointTree_=this.syncPointTree_.set(i,s)),null!=r?a=!0:(a=!1,r=jt.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(r=r.updateImmediateChild(t,n))}));var l=s.viewExistsForQuery(e);if(!l&&!e.getQueryParams().loadsAllData()){var u=t.makeQueryKey_(e);v.assert(!(u in this.queryToTagMap_),"View does not exist, but we have a tag");var c=t.getNextQueryTag_();this.queryToTagMap_[u]=c,this.tagToQueryMap_["_"+c]=u}var h=this.pendingWriteTree_.childWrites(i),d=s.addEventRegistration(e,n,h,r,a);if(!l&&!o){var p=s.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var l=a.removeEventRegistration(e,n,i);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=l.removed;s=l.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(c&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var m=p[f],g=m.getQuery(),v=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}!h&&u.length>0&&!i&&(c?this.listenProvider_.stopListening(t.queryForListening_(e),null):u.forEach(function(e){var n=r.queryToTagMap_[t.makeQueryKey_(e)];r.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(u)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,function(e,n){var i=X.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r});return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),v.forEach(n,function(t,e){i=i.concat(e)}),i})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(r)v.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),v.forEach(n,function(t,e){i=i.concat(e)}),i}),u=0;u<l.length;++u){var c=l[u];this.listenProvider_.stopListening(t.queryForListening_(c),this.tagForQuery_(c))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||jt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return v.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return v.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);v.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(X.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(X.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),l=e.children.get(a);if(l&&s){var u=n?n.getImmediateChild(a):null,c=i.child(a);o=o.concat(this.applyOperationHelper_(s,l,u,c))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,l=i.child(e),u=t.operationForChild(e);u&&(a=a.concat(r.applyOperationDescendantsHelper_(u,o,s,l)))}),o&&(a=a.concat(o.applyOperation(t,i,n))),a},t.nextQueryTag_=1,t}(),Ne=function(){function t(){this.rootNode_=jt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ae=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(x("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';L(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Oe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),v.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return v.deepCopy(this.counters_)},t}(),xe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Oe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=v.clone(t);return this.last_&&v.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),De=1e4,Re=3e4,Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=De+(Re-De)*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;v.forEach(e,function(e,r){r>0&&v.contains(t.statsToReport_,e)&&(n[e]=r,i=!0)}),i&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Me(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Me=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();N&&x("event: "+e.toString()),Q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ve=function(){function t(t){this.allowedEvents_=t,this.listeners_={},v.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=this.listeners_[t].slice(),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){v.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),je=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))},!1),i}return g.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return v.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ve),ze=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||v.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return g.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return v.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ve),qe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&Q(function(){n.onMessage_(t[e])})},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},t}(),Ue="pLPCommand",We="pRTLPCB",Ge=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=P(t),this.stats_=xe.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new qe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(v.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new He(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],r=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=r,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);r?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(r,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],r=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,r)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!v.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!v.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=v.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=v.base64Encode(e),i=W(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!v.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=v.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),He=function(){function t(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new te,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,v.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=T(),window[Ue+this.uniqueCallbackIdentifier]=e,window[We+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){x("frame writing exception"),s.stack&&x(s.stack),x(s)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||x("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),v.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var i=this.urlFn(n);t.nodeRestRequest(i)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var i=function(){n.outstandingRequests.remove(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,function(){clearTimeout(r),i()})},t.prototype.addTag=function(t,e){var n=this;v.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){x("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(r){}},Math.floor(1))},t}(),Be=null;"undefined"!=typeof MozWebSocket?Be=MozWebSocket:"undefined"!=typeof WebSocket&&(Be=WebSocket);var Ke=function(){function t(e,n,i,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=P(this.connId),this.stats_=xe.getCollection(n),this.connURL=t.connectionURL_(n,i,r)}return t.connectionURL_=function(t,e,n){var i={v:"5"};return!v.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL("websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,C.set("previous_websocket_failure",!0);try{if(v.isNodeSdk()){var i={headers:{"User-Agent":"Firebase/5/"+m.SDK_VERSION+"/"+process.platform+"/"+(v.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},r=process.env,o=0==this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new Be(this.connURL,[],i)}else this.mySock=new Be(this.connURL)}catch(s){this.log_("Error instantiating WebSocket.");var a=s.message||s.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Be&&!t.forceDisallow_},t.previouslyFailed=function(){return C.isInMemoryStorage||!0===C.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){C.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=v.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(v.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=v.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=W(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Qe=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ge,Ke]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Ke&&Ke.isAvailable(),i=n&&!Ke.previouslyFailed();if(e.webSocketOnly&&(n||L("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ke];else{var r=this.transports_=[];G(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&r.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ye=function(){function t(t,e,n,i,r,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=r,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=P("c:"+this.id+":"),this.transportManager_=new Qe(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,i)},Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=$(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(r)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=q("t",t),n=q("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=q("t",t),n=q("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=q("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?D("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):D("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&L("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),$(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(C.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),$e=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Xe=1e3,Je=3e5,Ze=function(t){function e(n,i,r,o,a,s){var l=t.call(this)||this;if(l.repoInfo_=n,l.onDataUpdate_=i,l.onConnectStatus_=r,l.onServerInfoUpdate_=o,l.authTokenProvider_=a,l.authOverride_=s,l.id=e.nextPersistentConnectionId_++,l.log_=P("p:"+l.id+":"),l.interruptReasons_={},l.listens_={},l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Xe,l.maxReconnectDelay_=Je,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,s&&!v.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),je.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ze.getInstance().on("online",l.onOnline_,l),l}return g.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(v.stringify(r)),v.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+r),this.listens_[o]=this.listens_[o]||{},v.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),v.assert(!this.listens_[o][r],"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens_[o][r]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var a={p:r};t.tag&&(a.q=i.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,l=a.s;e.warnOnListenWarnings_(s,i),(n.listens_[r]&&n.listens_[r][o])===t&&(n.log_("listen response",a),"ok"!==l&&n.removeListen_(r,o),t.onComplete&&t.onComplete(l,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&v.contains(t,"w")){var n=v.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();L("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||v.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=v.isValidFormat(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,function(n){var i=n.s,r=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),v.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+v.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):D("Unrecognized action received from server: "+v.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;v.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xe,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xe),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,l=null,u=function(){l?l.close():(s=!0,i())};this.realtime_={close:u,sendRequest:function(t){v.assert(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then(function(e){s?x("getToken() completed but was canceled"):(x("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,l=new Ye(r,o.repoInfo_,t,n,i,function(t){L(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(v.CONSTANTS.NODE_ADMIN&&L(t),u())})}},e.prototype.interrupt=function(t){x("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){x("Resuming connection for reason: "+t),delete this.interruptReasons_[t],v.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Xe,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return U(t)}).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new X(t).toString();return void 0!==this.listens_[i]?(n=this.listens_[i][e],delete this.listens_[i][e],0===v.getCount(this.listens_[i])&&delete this.listens_[i]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){x("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),v.forEach(this.listens_,function(e,n){v.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";v.CONSTANTS.NODE_ADMIN?e="admin_node":v.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+m.SDK_VERSION.replace(/\./g,"-")]=1,v.isMobileCordova()?t["framework.cordova"]=1:v.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return v.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}($e),tn=function(t){function e(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=P("p:rest:"),r.listens_={},r}return g.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(v.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,i,r){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,i),l={};this.listens_[s]=l;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",u,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,i),v.safeGet(o.listens_,s)===l&&r(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(r){var o=r&&r.accessToken;o&&(e.auth=o);var a=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?ns="+i.repoInfo_.namespace+v.querystring(e);i.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){i.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=v.jsonEval(s.responseText)}catch(e){L("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&L("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},e}($e),en=function(){function t(t,e,n){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ee,this.persistentConnection_=null;var r=new Ae(n);if(this.stats_=xe.getCollection(t),e||Y())this.server_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{v.stringify(o)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}this.persistentConnection_=new Ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){i.server_.refreshAuthToken(t)}),this.statsReporter_=xe.getOrCreateReporter(t,function(){return new Le(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new Ne,this.infoSyncTree_=new ke({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ke({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(i)if(n){var a=v.map(e,function(t){return Ut(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var s=Ut(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(r,s,i)}else if(n){var l=v.map(e,function(t){return Ut(t)});o=this.serverSyncTree_.applyServerMerge(r,l)}else{var u=Ut(e);o=this.serverSyncTree_.applyServerOverwrite(r,u)}var c=r;o.length>0&&(c=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(c,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;G(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),i=Ut(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Ut(e,n),s=ie(a,o),l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(t,s,l,!0);this.eventQueue_.queueEvents(u),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||L("set at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(l,!o);r.eventQueue_.raiseEventsForChangedPath(t,a),r.callOnCompleteCallback(i,e,n)});var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),a={};if(v.forEach(e,function(t,e){r=!1;var n=Ut(e);a[t]=ie(n,o)}),r)x("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(l),this.server_.merge(t.toString(),e,function(e,r){var o="ok"===e;o||L("update at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(s,!o),l=a.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(l,a),i.callOnCompleteCallback(n,e,r)}),v.forEach(e,function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new ee;return t.forEachTree(new X(""),function(t,i){n.remember(t,ie(i,e))}),n}(this.onDisconnect_,e),i=[];n.forEachTree(X.Empty,function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)}),this.onDisconnect_=new ee,this.eventQueue_.raiseEventsForChangedPath(X.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(i,r){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)})},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=Ut(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),function(e,o){"ok"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=Ut(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(v.isEmpty(e))return x("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(r,o){"ok"===r&&v.forEach(e,function(e,n){var r=Ut(n);i.onDisconnect_.remember(t.child(e),r)}),i.callOnCompleteCallback(n,r,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Pe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);v.forEach(e,function(t,e){for(var i=t.length;i<n+2;i++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),x.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Q(function(){if("ok"==e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new dn(this))},enumerable:!0,configurable:!0}),t}(),nn=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new bt(e,n))||(n=jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=jt.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(jt.EMPTY_NODE);var r=this;return e.forEachChild(kt,function(t,e){r.matches(new bt(t,e))||(i=i.updateImmediateChild(t,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new nn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new bt(e,n))||(n=jt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=jt.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var a=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(a.name,a.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(jt.EMPTY_NODE);var s=void 0,l=void 0,u=void 0;if(r=void 0,this.reverse_){r=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();u=function(t,e){return c(e,t)}}else r=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var h=!1;r.hasNext();)a=r.getNext(),!h&&u(s,a)<=0&&(h=!0),h&&o<this.limit_&&u(a,l)<=0?o++:i=i.updateImmediateChild(a.name,jt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;v.assert(s.numChildren()==this.limit_,"");var l=new bt(e,n),u=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),d=i.getChildAfterChild(this.index_,u,this.reverse_);null!=d&&(d.name==e||s.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,l);if(c&&!n.isEmpty()&&p>=0)return null!=r&&r.trackChildChange(fe.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=r&&r.trackChildChange(fe.childRemovedChange(e,h));var f=s.updateImmediateChild(e,jt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=r&&r.trackChildChange(fe.childAddedChange(d.name,d.node)),f.updateImmediateChild(d.name,d.node)):f}return n.isEmpty()?t:c&&o(u,l)>=0?(null!=r&&(r.trackChildChange(fe.childRemovedChange(u.name,u.node)),r.trackChildChange(fe.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(u.name,jt.EMPTY_NODE)):t},t}(),on=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return v.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return v.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:M},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return v.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return v.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:V},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return v.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new me(this.getIndex()):this.hasLimit()?new rn(this):new nn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()?i:(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===Bt?e=n.VALUE_INDEX:this.index_===Et?e=n.KEY_INDEX:(v.assert(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=v.stringify(e),this.startSet_&&(i[n.START_AT]=v.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+v.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=v.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+v.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_),i)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),an=function(t){function e(e,n){if(!(e instanceof en))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,on.DEFAULT,!1)||this}return g.__extends(e,t),e.prototype.getKey=function(){return v.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return v.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ft("Reference.child",1,n,!1)}(0,0,t):ft("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){v.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){v.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){v.validateArgCount("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),v.validateCallback("Reference.set",2,e,!0);var n=new v.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(v.validateArgCount("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,L("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("Reference.update",1,t,this.path,!1),v.validateCallback("Reference.update",2,e,!0);var r=new v.Deferred;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(v.validateArgCount("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),v.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new v.Deferred;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return v.validateArgCount("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),v.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(v.validateArgCount("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),v.validateCallback("Reference.transaction",1,t,!1),v.validateCallback("Reference.transaction",2,e,!0),function(t,e,i,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(v.errorPrefix("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new v.Deferred;return"function"==typeof e&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,r){t?i.reject(t):i.resolve(new yt(n,r)),"function"==typeof e&&e(t,n,r)},n),i.promise},e.prototype.setPriority=function(t,e){v.validateArgCount("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),v.validateCallback("Reference.setPriority",2,e,!0);var n=new v.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){v.validateArgCount("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),v.validateCallback("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),r=_t(i),o=this.child(r),a=this.child(r);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new vt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Zt);Zt.__referenceConstructor=an,Ee.__referenceConstructor=an;var sn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),ln=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new sn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,i=e instanceof X?e:new X(e),r=this;null!==(n=i.getFront());)r=new t(n,r,v.safeGet(r.node_.children,n)||new sn),i=i.popFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){v.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;v.forEach(this.node_.children,function(i,r){e(new t(i,n,r))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=v.contains(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),un=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});en.MAX_TRANSACTION_RETRIES_=25,en.prototype.transactions_init_=function(){this.transactionQueueTree_=new ln},en.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var r=function(){},o=new an(this,t);o.on("value",r);var a={path:t,update:e,onComplete:n,status:null,order:T(),applyLocally:i,retryCount:0,unwatcher:function(){o.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var l=a.update(s.val());if(void 0===l){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var u=new Qt(a.currentInputSnapshot,new an(this,a.path),kt);a.onComplete(null,!1,u)}}else{ut("transaction failed: Data returned ",l,a.path),a.status=un.RUN;var c=this.transactionQueueTree_.subTree(t),h=c.getValue()||[];h.push(a),c.setValue(h);var d=void 0;"object"==typeof l&&null!==l&&v.contains(l,".priority")?(d=v.safeGet(l,".priority"),v.assert(st(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||jt.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),f=Ut(l,d),m=ie(f,p);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},en.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||jt.EMPTY_NODE},en.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);v.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===un.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},en.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map(function(t){return t.currentWriteId}),r=this.getLatestState_(t,i),o=r,a=r.hash(),s=0;s<e.length;s++){var l=e[s];v.assert(l.status===un.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=un.SENT,l.retryCount++;var u=X.relativePath(t,l.path);o=o.updateChild(u,l.currentOutputSnapshotRaw)}var c=o.val(!0),h=t;this.server_.put(h.toString(),c,function(i){n.log_("transaction put response",{path:h.toString(),status:i});var r=[];if("ok"===i){for(var o=[],a=0;a<e.length;a++){if(e[a].status=un.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,l=new an(n,e[a].path),u=new Qt(s,l,kt);o.push(e[a].onComplete.bind(null,null,!0,u))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r),a=0;a<o.length;a++)Q(o[a])}else{if("datastale"===i)for(a=0;a<e.length;a++)e[a].status=e[a].status===un.SENT_NEEDS_ABORT?un.NEEDS_ABORT:un.RUN;else for(L("transaction at "+h.toString()+" failed: "+i),a=0;a<e.length;a++)e[a].status=un.NEEDS_ABORT,e[a].abortReason=i;n.rerunTransactions_(t)}},a)},en.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},en.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],i=[],r=t.filter(function(t){return t.status===un.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var a=t[o],s=X.relativePath(e,a.path),l=!1,u=void 0;if(v.assert(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===un.NEEDS_ABORT)l=!0,u=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===un.RUN)if(a.retryCount>=en.MAX_TRANSACTION_RETRIES_)l=!0,u="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var c=this.getLatestState_(a.path,r);a.currentInputSnapshot=c;var h=t[o].update(c.val());if(void 0!==h){ut("transaction failed: Data returned ",h,a.path);var d=Ut(h);"object"==typeof h&&null!=h&&v.contains(h,".priority")||(d=d.updatePriority(c.getPriority()));var p=a.currentWriteId,f=this.generateServerValues(),m=ie(d,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),r.splice(r.indexOf(p),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else l=!0,u="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[o].status=un.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===u){var g=new an(this,t[o].path),y=new Qt(t[o].currentInputSnapshot,g,kt);n.push(t[o].onComplete.bind(null,null,!1,y))}else n.push(t[o].onComplete.bind(null,new Error(u),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)Q(n[o]);this.sendReadyTransactions_()}},en.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},en.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},en.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},en.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==un.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},en.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},en.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,o=0;o<e.length;o++)e[o].status===un.SENT_NEEDS_ABORT||(e[o].status===un.SENT?(v.assert(r===o-1,"All SENT items should be at beginning of queue."),r=o,e[o].status=un.SENT_NEEDS_ABORT,e[o].abortReason="set"):(v.assert(e[o].status===un.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i),o=0;o<n.length;o++)Q(n[o])}};var cn,hn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return cn||(cn=new t),cn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&R("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=et(n),r=i.repoInfo;return gt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||R("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(r,t).database},t.prototype.deleteRepo=function(t){var e=v.safeGet(this.repos_,t.app.name);e&&v.safeGet(e,t.repoInfo_.toURLString())===t||R("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=v.safeGet(this.repos_,e.name);n||(this.repos_[e.name]=n={});var i=v.safeGet(n,t.toURLString());return i&&R("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new en(t,this.useRestClient_,e),n[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),dn=function(){function t(t){this.repo_=t,t instanceof en||R("Don't call new Database() directly - please use firebase.database()."),this.root_=new an(t,X.Empty),this.INTERNAL=new pn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),v.validateArgCount("database.ref",0,1,arguments.length),t instanceof an?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),v.validateArgCount(e,1,1,arguments.length);var n=et(t);gt(e,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&R(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&R("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){v.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){v.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),pn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(t){return this.database.checkDeleted_("delete"),hn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),fn=Object.freeze({forceLongPolling:function(){Ke.forceDisallow(),Ge.forceAllow()},forceWebSockets:function(){Ge.forceDisallow()},isWebSocketsAvailable:function(){return Ke.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),mn=Ze;Ze.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ze.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gn=Object.freeze({DataConnection:mn,RealTimeConnection:Ye,hijackHash:function(t){var e=Ze.prototype.put;return Ze.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){Ze.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){hn.getInstance().forceRestClient(t)}}),vn=dn.ServerValue;function yn(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return hn.getInstance().databaseFromApp(t,n)},{Reference:an,Query:Zt,Database:dn,DataSnapshot:Qt,enableLogging:O,INTERNAL:fn,ServerValue:vn,TEST_ACCESS:gn},null,!0);v.isNodeSdk()&&(t.exports=n)}yn(m),e.DataSnapshot=Qt,e.Database=dn,e.OnDisconnect=vt,e.Query=Zt,e.Reference=an,e.ServerValue=vn,e.enableLogging=O,e.registerDatabase=yn},Wcq6:function(t,e,n){"use strict";var i,r=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i;t.exports=r},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return r}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return f}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return y}),n.d(e,"__asyncValues",function(){return _}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return C});var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n}function s(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,i){e(n,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{l(i.next(t))}catch(e){o(e)}}function s(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((i=i.apply(t,e||[])).next())})}function h(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise(function(n,i){o.push([t,e,n,i])>1||s(t,e)})})}function s(t,e){try{(n=r[t](e)).value instanceof g?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(i){c(o[0][3],i)}var n}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(t){var e,n;return e={},i("next"),i("throw",function(t){throw t}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:g(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise(function(i,r){!function(t,e,n,i){Promise.resolve(i).then(function(e){t({value:e,done:n})},e)}(i,r,(e=t[n](e)).done,e.value)})}}}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return r}),n.d(e,"Logger",function(){return s}),n.d(e,"setLogLevel",function(){return l});var i=[],r=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=r.INFO,a=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.ERROR].concat(t))},t}();function l(t){i.forEach(function(e){e.logLevel=t})}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("mrSG"),o=n("zVF4"),a=n("q/0M"),s=((i={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$name}",i["duplicate-app"]="Firebase App named '{$name}' already exists",i["app-deleted"]="Firebase App named '{$name}' already deleted",i["duplicate-service"]="Firebase service named '{$name}' already registered",i["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",i),l=new o.ErrorFactory("app","Firebase",s);function u(t,e){throw l.create(t,e)}var c="[DEFAULT]",h=[],d=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){h.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){h=h.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,i=Object.keys(t.services_);n<i.length;n++)for(var r=i[n],o=0,a=Object.keys(t.services_[r]);o<a.length;o++)e.push(t.services_[r][a[o]]);return Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=c),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==c?e:void 0,i=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=i}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(h.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),h=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var f=new a.Logger("@firebase/app");if(o.isBrowser()&&"firebase"in self){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=function t(){var e=function(t){var e={},n={},i={},r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),("object"!=typeof i||null===i)&&(i={name:i});var o=i;void 0===o.name&&(o.name=c);var a=o.name;"string"==typeof a&&a||u("bad-app-name",{name:String(a)}),p(e,a)&&u("duplicate-app",{name:a});var s=new t(n,o,r);return e[a]=s,l(s,"create"),s},app:a,apps:null,SDK_VERSION:"6.0.2",INTERNAL:{registerService:function(e,l,c,h,d){function p(t){return void 0===t&&(t=a()),"function"!=typeof t[e]&&u("invalid-app-argument",{name:e}),t[e]()}return void 0===d&&(d=!1),n[e]&&u("duplicate-service",{name:e}),n[e]=l,h&&(i[e]=h,s().forEach(function(t){h("create",t)})),void 0!==c&&o.deepExtend(p,c),r[e]=p,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,d?t:[])},p},removeApp:function(t){l(e[t],"delete"),delete e[t]},factories:n,useAsService:h}};function a(t){return p(e,t=t||c)||u("no-app",{name:t}),e[t]}function s(){return Object.keys(e).map(function(t){return e[t]})}function l(t,e){for(var r=0,o=Object.keys(n);r<o.length;r++){var a=h(0,o[r]);if(null===a)return;i[a]&&i[a](e,t)}}function h(t,e){return"serverAuth"===e?null:e}return o.patchProperty(r,"default",r),Object.defineProperty(r,"apps",{get:s}),o.patchProperty(a,"App",t),r}(d);return e.INTERNAL=r.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),v=g.initializeApp;g.initializeApp=function(){return o.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\n      to false and "main" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),v.apply(void 0,arguments)};var y=g;e.default=y,e.firebase=y},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mrSG"),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],a=r+1<t.length,s=a?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=(15&s)<<2|u>>6,h=63&u;l||(h=64,a||(c=64)),i.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[h])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var a=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0,s=++r<t.length?n[t.charAt(r)]:64,l=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==a||null==s||null==l)throw Error();i.push(o<<2|a>>4),64!=s&&(i.push(a<<4&240|s>>2),64!=l&&i.push(s<<6&192|l))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,i))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p="FirebaseError",f=function(t){function e(n,i){var r=t.call(this,i)||this;return r.code=n,r.name=p,Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,m.prototype.create),r}return i.__extends(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t,e){void 0===e&&(e={});for(var n=this.service+"/"+t,i=this.errors[t],r=i?function(t,e){return t.replace(g,function(t,n){var i=e[n];return null!=i?i.toString():"<"+n+"?>"})}(i,e):"Error",o=new f(n,this.serviceName+": "+r+" ("+n+")."),a=0,s=Object.keys(e);a<s.length;a++){var l=s[a];"_"!==l.slice(-1)&&(l in o&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),o[l]=e[l])}return o},t}(),g=/\{\$([^}]+)}/g;function v(t){return JSON.parse(t)}var y=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=v(u(o[0])||""),n=v(u(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:i,signature:r}},_=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return _(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var i in t)if(e.call(n,t[i],i,t))return i},C=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++)n[i]=4294967295&((h=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|h>>>31);var r,o,a=this.chain_[0],s=this.chain_[1],l=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(r=u^s&(l^u),o=1518500249):(r=s^l^u,o=1859775393):i<60?(r=s&l|u&(s|l),o=2400959708):(r=s^l^u,o=3395469782);var h=(a<<5|a>>>27)+r+c+o+n[i]&4294967295;c=u,u=l,l=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0==o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o==this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o==this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}(),E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(i.next=S),void 0===i.error&&(i.error=S),void 0===i.complete&&(i.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}}),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function T(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+i+" argument "}e.CONSTANTS=r,e.Deferred=h,e.ErrorFactory=m,e.FirebaseError=f,e.Sha1=C,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=l,e.base64Decode=u,e.base64Encode=function(t){var e=s(t);return l.encodeByteArray(e,!0)},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.decode=y,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=T,e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var i=w(t,e,n);return i&&t[i]},e.forEach=_,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getUA=d,e.getValues=function(t){var e=[],n=0;for(var i in t)e[n++]=t[i];return e},e.isAdmin=function(t){var e=y(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"undefined"!=typeof window},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=y(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,i=y(t).claims,r=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?e=i.nbf:i.hasOwnProperty("iat")&&(e=i.iat),n=i.hasOwnProperty("exp")?i.exp:e+86400),r&&e&&n&&r>=e&&r<=n},e.issuedAtTime=function(t){var e=y(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var i={};for(var r in t)i[r]=e.call(n,t[r],r,t);return i},e.patchProperty=function(t,e,n){t[e]=n},e.querystring=function(t){var e=[];return _(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var a=r-55296;o(++i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(a<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(T(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(T(t,e,i)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(T(t,e,i)+"must be a valid firebase namespace.")}}}]);
//# sourceMappingURL=app-admin-admin-module-ngfactory-es2015.5689df73e93fc2c790f7.js.map